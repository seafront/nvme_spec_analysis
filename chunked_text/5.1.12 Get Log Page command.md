
**Get Log Page command**


The Get Log Page command returns a data buffer containing the log page requested. The Get Log Page
command may be impacted by the ANA state (refer to section 8.1.1.10).


The Get Log Page command uses the Data Pointer, Command Dword 10, Command Dword 11, Command
Dword 12, Command Dword 13, and Command Dword 14 fields. All other command specific fields are
reserved.


There are mandatory and optional Log Page Identifiers defined in section 3.1.3.5. If a Get Log Page
command is processed that specifies a Log Page Identifier that is not supported, then the controller shall
abort the command with a status code of Invalid Log Page with the exception defined in Figure 306.


The controller indicates support for the Log Page Offset and extended Number of Dwords (32 bits rather
than 12 bits) in the Log Page Attributes field of the Identify Controller data structure. If extended data is not
supported, then bits 27:16 of the Number of Dwords Lower field specify the Number of Dwords to transfer.


If the Log Page Offset is supported, then


  - a byte offset shall be supported (i.e., Offset Type field cleared to ‘0’) for all log pages; and

  - for each log page that has the IOS bit set to ‘1’ in the LID Supported and Effects data structure
(refer to Figure 205) for the specified LID in the Supported Log Pages log page an index offset shall
be supported (i.e., Offset Type field set to ‘1’).


If the IOS bit is cleared to ‘0’ in the LID Supported and Effects data structure for the specified LID in the
Supported Log Pages log page and a Get Log Page command specifies Offset Type field set to ‘1’, then
that command shall be aborted with a status code of Invalid Field in Command.


198


NVM Express [®] Base Specification, Revision 2.2


**Figure 197: Get Log Page – Data Pointer**

|Bits|Description|
|---|---|
|127:00|**Data Pointer (DPTR):**This field specifies the start of the data buffer. Refer to Figure 92 for the definition<br>of this field.|



**Figure 198: Get Log Page – Command Dword 10**







|Bits|Description|
|---|---|
|31:16|**Number of Dwords Lower (NUMDL):** This field specifies the least significant 16 bits of the number of<br>dwords to return unless otherwise specified. If host software specifies a size larger than the log page<br>requested, the controller returns the complete log page with undefined results for dwords beyond the end<br>of the log page. The combined NUMDL and NUMDU fields form a 0’s based value.|
|15|**Retain Asynchronous Event (RAE):**This bit specifies whether to retain or clear an Asynchronous<br>Event. If this bit is cleared to ‘0’, then the corresponding Asynchronous Event is cleared by the controller<br>upon successful command completion. If this bit is set to ‘1’, then the corresponding Asynchronous Event<br>is retained (i.e., not cleared) by the controller upon command completion.<br>If the command does not complete successfully, the Asynchronous Event shall be retained by the<br>controller.<br>Host software should clear this bit to ‘0’ for log pages that are not used with Asynchronous Events. Refer<br>to section 5.1.2.<br>Refer to the NVM Express Admin Command Set section of the NVM Express Management Interface<br>Specification for the behavior associated with this bit when the Get Log Page command is received on a<br>Management Endpoint.|
|14:08|**Log Specific Parameter (LSP):**If not defined for the log specified by the Log Page Identifier field, this<br>field is reserved**.**|
|07:00|**Log Page Identifier (LID):**This field specifies the identifier of the log page to retrieve (refer to Figure<br>203).|


**Figure 199: Get Log Page – Command Dword 11**

|Bits|Description|
|---|---|
|31:16|**Log Specific Identifier (LSI):** This field specifies an identifier that is required for a particular log page.<br>If not defined for the log page specified by the Log Page Identifier field, this field is reserved.|
|15:00|**Number of Dwords (NUMDU):** This field specifies the most significant 16 bits of the number of dwords<br>to return unless otherwise specified.|



199


NVM Express [®] Base Specification, Revision 2.2


**Figure 200: Get Log Page – Command Dword 12**





|Bits|Description|
|---|---|
|31:00|**Log Page Offset Lower (LPOL):**The log page offset specifies the location within a log page to start<br>returning data from unless otherwise specified.<br>If the OT bit is cleared to ‘0’, then:<br>a)<br>This field specifies the least significant 32 bits of the log page offset. The offset shall be dword<br>aligned, indicated by bits 1:0 being cleared to 00b;<br>b)<br>The controller is not required to check that bits 1:0 are cleared to 00b. The controller may report<br>an error of Invalid Field in Command if bits 1:0 are not cleared to 00b. If the controller does not<br>report an error of Invalid Field in Command, then the controller shall operate as if bits 1:0 are<br>cleared to 00b; and<br>c)<br>If the host specifies an offset (i.e., LPOL and LPOU) that is greater than the size of the log page<br>requested (e.g., a log page containing 100 bytes is requested starting at offset 200), then the<br>controller shall abort the command with a status of Invalid Field in Command.<br>If the OT bit is set to ‘1’, then:<br>a)<br>This field specifies the least significant 32 bits of the index into the list of data structures in the<br>log page;<br>b)<br>If the host specifies an index (i.e., LPOL and LPOU) that is greater than the number of entries<br>in the list of data structures in the log page requested (e.g., a log page containing 100 data<br>structures is requested starting at index 200), then the controller shall abort the command with<br>a status code of Invalid Field in Command;<br>c)<br>If the IOS bit is cleared to ‘0’ in the LID Supported and Effects data structure for the specified<br>LID in the Supported Log Pages log page, then the controller shall abort the command with a<br>status code of Invalid Field in Command; and<br>d)<br>Each log page that supports the use of an index offset value defines the contents of an entry<br>for the purposes of indexing into that log page.|


**Figure 201: Get Log Page – Command Dword 13**








|Bits|Description|
|---|---|
|31:00|**Log Page Offset Upper (LPOU):**This field specifies the most significant 32 bits of either the log page<br>offset or the index into the list of data structures unless otherwise specified. Refer to the Log Page Offset<br>Lower definition.|



If the controller supports selection of a UUID by the Get Log Page command (refer to Figure 203 and section
8.1.28), then Command Dword 14 is used to specify a UUID Index value (refer to Figure 202).


**Figure 202: Get Log Page – Command Dword 14**







|Bits|Description|
|---|---|
|31:24|**Command Set Identifier (CSI)**: This field specifies the I/O Command Set (refer to Figure 312) to be<br>used by the command. This field is log page specific; refer to Figure 203 for log pages that use this field.<br>This field shall be ignored by the controller if the specified log page does not support the use of this field<br>(refer to Figure 203) or if the CC.CSS field is not set to 110b.|
|23|**Offset Type (OT):** If this bit is set to ‘1’, then the Log Page Offset Lower field and the Log Page Offset<br>Upper field specify the index into the list of data structures in the log page to be returned. If this bit is<br>cleared to ‘0’, then the Log Page Offset Lower field and the Log Page Offset Upper field specify the byte<br>offset into the log page to be returned.|
|22:07|Reserved|
|06:00|**UUID Index (UIDX):** Refer to Figure 659.|


Figure 203 defines the log pages that are able to be retrieved with the Get Log Page command and the
scope of the information that is returned in those log pages. Section 5.1.12.1 describes log pages that are
common to all transport models. Section 5.1.12.2 describes log pages that are specific to the Memorybased transport model. Section 5.1.12.3 describes log pages that are specific to the Message-based
transport model.


200


NVM Express [®] Base Specification, Revision 2.2


**Figure 203: Get Log Page – Log Page Identifiers**













|Log Page<br>Identifier|8<br>CSI|Scope|Log Page Name|Reference<br>Section|
|---|---|---|---|---|
|00h|Y|Controller|Supported Log Pages|5.1.12.1.1|
|01h|N|Controller|Error Information|5.1.12.1.2|
|02h|N|Controller / Namespace1, 2|SMART / Health Information|5.1.12.1.3|
|03h|N|Domain / NVM subsystem6|Firmware Slot Information|5.1.12.1.4|
|04h|N|Controller|Changed Attached Namespace List|5.1.12.1.5|
|05h|Y|Controller|Commands Supported and Effects|5.1.12.1.6|
|06h|N|Controller / Domain / NVM<br>subsystem3, 4, 6|Device Self-test5|5.1.12.1.7|
|07h|N|Controller / NVM subsystem7|Telemetry Host-Initiated5|5.1.12.1.8|
|08h|N|Controller / NVM subsystem7|Telemetry Controller-Initiated5|5.1.12.1.9|
|09h|N|Domain / NVM subsystem6|Endurance Group Information|5.1.12.1.10|
|0Ah|N|Domain / NVM subsystem6|Predictable Latency Per NVM Set|5.1.12.1.11|
|0Bh|N|Domain / NVM subsystem6|Predictable Latency Event Aggregate|5.1.12.1.12|
|0Ch|N|Controller|Asymmetric Namespace Access|5.1.12.1.13|
|0Dh|N|NVM subsystem|Persistent Event Log5|5.1.12.1.14|
|0Eh|Refer to the NVM Command Set Specification|Refer to the NVM Command Set Specification|Refer to the NVM Command Set Specification|Refer to the NVM Command Set Specification|
|0Fh|N|Domain / NVM subsystem6|Endurance Group Event Aggregate|5.1.12.1.15|
|10h|N|Domain / NVM subsystem 5, 6|Media Unit Status|5.1.12.1.16|
|11h|N|Domain / NVM subsystem 6|Supported Capacity Configuration List|5.1.12.1.17|
|12h|Y|Controller|Feature Identifiers Supported and Effects|5.1.12.1.18|
|13h|N|Controller|NVMe-MI Commands Supported and<br>Effects|5.1.12.1.19|
|14h|Y|NVM subsystem|Command and Feature Lockdown5|5.1.12.1.20|
|15h|N|Controller|Boot Partition|5.1.12.1.21|
|16h|N|Endurance Group|Rotational Media Information|5.1.12.1.22|
|17h|N|Namespace|Dispersed Namespace Participating<br>NVM Subsystems|5.1.12.1.23|
|18h|N|NVM subsystem|Management Address List|5.1.12.1.24|
|19h|Refer to the applicable NVM Express transport specification|Refer to the applicable NVM Express transport specification|Refer to the applicable NVM Express transport specification|Refer to the applicable NVM Express transport specification|
|1Ah|N|Controller|Reachability Groups|5.1.12.1.25|
|1Bh|N|Controller|Reachability Associations|5.1.12.1.26|
|1Ch|N|Controller|Changed Allocated Namespace List|5.1.12.1.27|
|1Dh to 1Fh|Reserved|Reserved|Reserved|Reserved|
|20h|N|Endurance Group|FDP Configurations|5.1.12.1.28|
|21h|N|Endurance Group|Reclaim Unit Handle Usage|5.1.12.1.29|
|22h|N|Endurance Group|FDP Statistics|5.1.12.1.30|
|23h|N|Endurance Group|FDP Events|5.1.12.1.31|
|24h to 6Fh|Reserved|Reserved|Reserved|Reserved|
|70h|N|Controller|Discovery|5.1.12.3.1|
|71h|N|Controller|Host Discovery|5.1.12.3.2|
|72h|N|Controller|AVE Discovery|5.1.12.3.3|
|73h|N|Controller|Pull Model DDC Request|5.1.12.3.4|
|74h to 7Fh|Reserved|Reserved|Reserved|Reserved|
|80h|N|Controller|Reservation Notification|5.1.12.1.32|
|81h|N|NVM subsystem|Sanitize Status|5.1.12.1.33|
|82h to BEh|I/O Command Set Specific|I/O Command Set Specific|I/O Command Set Specific|I/O Command Set Specific|


201


NVM Express [®] Base Specification, Revision 2.2


**Figure 203: Get Log Page – Log Page Identifiers**









|Log Page<br>Identifier|8<br>CSI|Scope|Log Page Name|Reference<br>Section|
|---|---|---|---|---|
|BFh|Refer to the Zoned Namespace Command Set Specification|Refer to the Zoned Namespace Command Set Specification|Refer to the Zoned Namespace Command Set Specification|Refer to the Zoned Namespace Command Set Specification|
|C0h to FFh|Vendor specific5|Vendor specific5|Vendor specific5|Vendor specific5|
|Notes:<br>1.<br>For namespace identifiers of 0h or FFFFFFFFh.<br>2.<br>For namespace identifiers other than 0h or FFFFFFFFh.<br>3.<br>The Single Device Self-test Operation (SDSO) bit is cleared to ‘0’ in the DSTO field in the Identify Controller data<br>structure (refer to Figure 313).<br>4.<br>The SDSO bit is set to ‘1’.<br>5.<br>Selection of a UUID may be supported. Refer to section 8.1.28.<br>6.<br>For NVM subsystems that support multiple domains (refer to the MDS bit in the Identify Controller data structure,<br>Figure 313), Domain scope information is returned.<br>7.<br>The scope is defined in the header of the log page (refer to the Telemetry Host-Initiated Scope field and the<br>Telemetry Controller-Initiated Scope field).<br>8.<br>If multiple I/O Command Sets are supported, then the CDW14.CSI field (refer to Figure 202) is used by the log<br>page: Y = Yes, N = No. If Yes, then refer to the definition of the log page for details on usage.|Notes:<br>1.<br>For namespace identifiers of 0h or FFFFFFFFh.<br>2.<br>For namespace identifiers other than 0h or FFFFFFFFh.<br>3.<br>The Single Device Self-test Operation (SDSO) bit is cleared to ‘0’ in the DSTO field in the Identify Controller data<br>structure (refer to Figure 313).<br>4.<br>The SDSO bit is set to ‘1’.<br>5.<br>Selection of a UUID may be supported. Refer to section 8.1.28.<br>6.<br>For NVM subsystems that support multiple domains (refer to the MDS bit in the Identify Controller data structure,<br>Figure 313), Domain scope information is returned.<br>7.<br>The scope is defined in the header of the log page (refer to the Telemetry Host-Initiated Scope field and the<br>Telemetry Controller-Initiated Scope field).<br>8.<br>If multiple I/O Command Sets are supported, then the CDW14.CSI field (refer to Figure 202) is used by the log<br>page: Y = Yes, N = No. If Yes, then refer to the definition of the log page for details on usage.|Notes:<br>1.<br>For namespace identifiers of 0h or FFFFFFFFh.<br>2.<br>For namespace identifiers other than 0h or FFFFFFFFh.<br>3.<br>The Single Device Self-test Operation (SDSO) bit is cleared to ‘0’ in the DSTO field in the Identify Controller data<br>structure (refer to Figure 313).<br>4.<br>The SDSO bit is set to ‘1’.<br>5.<br>Selection of a UUID may be supported. Refer to section 8.1.28.<br>6.<br>For NVM subsystems that support multiple domains (refer to the MDS bit in the Identify Controller data structure,<br>Figure 313), Domain scope information is returned.<br>7.<br>The scope is defined in the header of the log page (refer to the Telemetry Host-Initiated Scope field and the<br>Telemetry Controller-Initiated Scope field).<br>8.<br>If multiple I/O Command Sets are supported, then the CDW14.CSI field (refer to Figure 202) is used by the log<br>page: Y = Yes, N = No. If Yes, then refer to the definition of the log page for details on usage.|Notes:<br>1.<br>For namespace identifiers of 0h or FFFFFFFFh.<br>2.<br>For namespace identifiers other than 0h or FFFFFFFFh.<br>3.<br>The Single Device Self-test Operation (SDSO) bit is cleared to ‘0’ in the DSTO field in the Identify Controller data<br>structure (refer to Figure 313).<br>4.<br>The SDSO bit is set to ‘1’.<br>5.<br>Selection of a UUID may be supported. Refer to section 8.1.28.<br>6.<br>For NVM subsystems that support multiple domains (refer to the MDS bit in the Identify Controller data structure,<br>Figure 313), Domain scope information is returned.<br>7.<br>The scope is defined in the header of the log page (refer to the Telemetry Host-Initiated Scope field and the<br>Telemetry Controller-Initiated Scope field).<br>8.<br>If multiple I/O Command Sets are supported, then the CDW14.CSI field (refer to Figure 202) is used by the log<br>page: Y = Yes, N = No. If Yes, then refer to the definition of the log page for details on usage.|Notes:<br>1.<br>For namespace identifiers of 0h or FFFFFFFFh.<br>2.<br>For namespace identifiers other than 0h or FFFFFFFFh.<br>3.<br>The Single Device Self-test Operation (SDSO) bit is cleared to ‘0’ in the DSTO field in the Identify Controller data<br>structure (refer to Figure 313).<br>4.<br>The SDSO bit is set to ‘1’.<br>5.<br>Selection of a UUID may be supported. Refer to section 8.1.28.<br>6.<br>For NVM subsystems that support multiple domains (refer to the MDS bit in the Identify Controller data structure,<br>Figure 313), Domain scope information is returned.<br>7.<br>The scope is defined in the header of the log page (refer to the Telemetry Host-Initiated Scope field and the<br>Telemetry Controller-Initiated Scope field).<br>8.<br>If multiple I/O Command Sets are supported, then the CDW14.CSI field (refer to Figure 202) is used by the log<br>page: Y = Yes, N = No. If Yes, then refer to the definition of the log page for details on usage.|


**Common Log Specific Information**


Refer to section 3.1.3.5 for mandatory, optional, and prohibited log pages for the various controller types.


Log pages that indicate a scope of NVM subsystem return information that is global to the NVM subsystem.
Log pages that indicate a scope of Domain return information that is global to the Domain. Log pages that
indicate a scope of controller return information that is specific to the controller that is processing the
command. Log pages that indicate a scope of Namespace return information that is specific to the specified
namespace. For log pages that indicate multiple scopes, support for multiple domains or the namespace
identifier that is specified determines which information is returned. The definition of any individual field
within a log page may indicate a different scope that is specific to that individual field.


For log pages with a scope of NVM subsystem or controller (as shown in Figure 203), the controller shall
abort commands that specify namespace identifiers other than 0h or FFFFFFFFh with a status code of
Invalid Field in Command. Otherwise, the rules for namespace identifier usage in Figure 92 apply.


**5.1.12.1.1** **Supported Log Pages (Log Page Identifier 00h)**


An NVM subsystem may support several interfaces for submitting a Get Log Page command such as an
Admin Submission Queue, PCIe VDM Management Endpoint, or 2-Wire Management Endpoint (refer to
the NVM Express Management Interface Specification for details on Management Endpoints) and may
have zero or more instances of each of those interfaces. The log pages supported on each instance of each
interface may be different. This log page is used to describe the log pages that are supported on the
interface to which the Get Log Page command was submitted and attributes specific to each log page. The
log page is defined in Figure 204. The attributes of each log page are described in a LID Supported and
Effects data structure defined in Figure 205.


If the UUID Selection Supported bit is set to ‘1’ for the Get Log Page command in the Commands Supported
and Effects log page (refer to section 5.1.12.1.6), then the log page data reflects the log pages that are
supported based on the value of the UUID Index field (refer to section 8.1.28).


For controllers that implement I/O Queues, the log pages that the controller supports are dependent on the
I/O Command Set that is based on:


  - the I/O Command Set selected in CC.CSS, if CC.CSS is not set to 110b; and

  - the Command Set Identifier (CSI) field in CDW 14, if CC.CSS is set to 110b.


202


NVM Express [®] Base Specification, Revision 2.2


**Figure 204: Supported Log Pages Log Page**

|Bytes|Description|
|---|---|
|3:0|**Log Page Identifier Supported 0 (LIDS0):**Contains the LID Supported and Effects data structure<br>(refer to Figure 205) for the LID 0h.|
|7:4|**Log Page Identifier Supported 1 (LIDS1):**Contains the LID Supported and Effects data structure<br>(refer to Figure 205) for the LID 1h.|
|…|…|
|1019:1016|**Log Page Identifier Supported 254 (LIDS254):**Contains the LID Supported and Effects data<br>structure (refer to Figure 205) for the LID FEh.|
|1023:1020|**Log Page Identifier Supported 255 (LIDS255):**Contains the LID Supported and Effects data<br>structure (refer to Figure 205) for the LID FFh.|



**Figure 205: LID Supported and Effects Data Structure**





|Bits|Description|
|---|---|
|31:16|**LID Specific Parameter (LIDSP):**This field is specific to the log page identifier and if not defined for<br>the log specified by the Log Page Identifier field, this field is reserved.|
|15:2|Reserved|
|1|**Index Offset Supported (IOS):**If this bit is set to ‘1’, then the controller supports an index offset for<br>this LID in a Get Log Page command (i.e., the OT bit in the Get Log Page command is allowed to be<br>set to ‘1’). If this bit is cleared to ‘0’, then the controller does not support an index offset for this LID in<br>a Get Log Page command (i.e., the OT bit in the Get Log Page command is only allowed to be cleared<br>to ‘0’).<br>If the controller does not support extended data for the Get Log Page command (refer to the Log Page<br>Extended Data Support (SPEDS) bit in the LPA field in Figure 313), then this bit shall be cleared to ‘0’.|
|0|**LID Supported (LSUPP):**If this bit is set to ‘1’, then the controller supports this LID for a Get Log Page<br>command. If this bit is cleared to ‘0’, then the controller does not support this LID for a Get Log Page<br>command, and the host should ignore other fields in this data structure.<br>Refer to section 3.1.3.5 for the LID support requirements for each controller type.|


203


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.2** **Error Information (Log Page Identifier 01h)**


This log page is used to describe extended error information for a command that completed with error or
report an error that is not specific to a particular command. Extended error information is provided when
the More (M) bit is set to ‘1’ in the Status field for the completion queue entry associated with the command
that completed with error or as part of an asynchronous event with an Error status type. This log page is
global to the controller.


This error log may return the last _n_ errors. If host software specifies a data transfer of the size of _n_ error
logs, then the error logs for the most recent _n_ errors are returned. The ordering of the entries is based on
the time when the error occurred, with the most recent error being returned as the first log entry.


Each entry in the log page returned is defined in Figure 206. The log page is a set of 64-byte entries; the
maximum number of entries supported is indicated in the ELPE field in the Identify Controller data structure
(refer to Figure 313). If the log page is full when a new entry is generated, the controller should insert the
new entry into the log and discard the oldest entry.


The controller should clear this log page by removing all entries on power cycle and Controller Level Reset.


**Figure 206: Error Information Log Entry Data Structure**






|Bits|Description|
|---|---|
|15:1|**Status (STATUS):**This field contains the Status field from the completion queue<br>entry (refer to Figure 100) of the command that completed. If the error is not<br>specific to a particular command, then this field reports the most applicable status<br>value.|
|0|**Phase Tag (P):**This bit may indicate the Phase Tag posted for the command.|


|Bits|Description|
|---|---|
|15:11|Reserved|
|10:08|**Bit Location (BITLOC):** The offset in the byte specified by the Byte Location field<br>to the bit in that byte that contained the error.|
|07:00|**Byte Location (BYTLOC):** The offset in the submission queue entry to the byte<br>in the command that contained the error. Valid values are based on the SQES<br>field (refer to Figure 313) (e.g., a value of 6 in SQES indicates that the valid values<br>for this field are 0 to 63).|



|Bytes|Description|
|---|---|
|07:00|**Error Count (ECNT):**This is a 64-bit incrementing error count, indicating a unique identifier for this<br>error. The error count starts at 1h, is incremented for each unique error log entry, and is retained<br>across power off conditions. A value of 0h indicates an invalid entry; this value is used when there<br>are lost entries or when there are fewer errors than the maximum number of entries the controller<br>supports.<br>If the value of this field is FFFFFFFF_FFFFFFFFh, then the field shall be set to 1h when incremented<br>(i.e., rolls over to 1h). Prior to NVMe 1.4, processing of incrementing beyond FFFFFFFFh is<br>unspecified.|
|09:08|**Submission Queue ID (SQID):**This field indicates the Submission Queue Identifier of the<br>command that the error information is associated with. If the error is not specific to a particular<br>command, then this field shall be set to FFFFh.|
|11:10|**Command ID (CID):**This field indicates the Command Identifier of the command that the error is<br>associated with. If the error is not specific to a particular command, then this field shall be set to<br>FFFFh.|
|13:12|**Status Info (STS):**<br>**Bits**<br>**Description**<br>15:1<br>**Status (STATUS):**This field contains the Status field from the completion queue<br>entry (refer to Figure 100) of the command that completed. If the error is not<br>specific to a particular command, then this field reports the most applicable status<br>value.<br>0 <br>**Phase Tag (P):**This bit may indicate the Phase Tag posted for the command.|
|15:14|**Parameter Error Location (PEL):**This field indicates the byte and bit of the command parameter<br>that the error is associated with, if applicable. If the parameter spans multiple bytes or bits, then the<br>location indicates the least-significant byte and bit of the parameter.<br>**Bits**<br>**Description**<br>15:11<br>Reserved<br>10:08<br>**Bit Location (BITLOC):** The offset in the byte specified by the Byte Location field<br>to the bit in that byte that contained the error.<br>07:00<br>**Byte Location (BYTLOC):** The offset in the submission queue entry to the byte<br>in the command that contained the error. Valid values are based on the SQES<br>field (refer to Figure 313) (e.g., a value of 6 in SQES indicates that the valid values<br>for this field are 0 to 63).<br>If the error is not specific to a particular command, then this field shall be set to FFFFh.|
|23:16|**Logical Block Address (LBA):**This field indicates I/O Command Set specific data about the error<br>condition, if applicable. The description is described in the applicable I/O Command Set<br>specification.<br>NOTE: The original field name has been retained for historical continuity.|


204






NVM Express [®] Base Specification, Revision 2.2


**Figure 206: Error Information Log Entry Data Structure**













|Bytes|Description|
|---|---|
|27:24|**Namespace Identifier (NSID):**This field indicates the NSID of the namespace that the error is<br>associated with, if applicable.|
|28|**Vendor Specific Information Available (VSIA):**If there is additional vendor specific error<br>information available, this field provides the log page identifier associated with that page. A value of<br>0h indicates that no additional information is available. Valid values are in the range of 80h to FFh.|
|29|**Transport Type (TRTYPE):** This field indicates the Transport Type of the transport associated with<br>the error. The values in this field are the same as the TRTYPE values in the Discovery Log Page<br>Entry (refer to section 5.1.12.3.1). If the error is not transport related, this field shall be cleared to<br>0h. If the error is transport related, this field shall be set to the type of the transport as defined in the<br>TRTYPE field within Figure 295.|
|30|**Command Set Indicator (CSI):**This field contains command set indicator for the command that<br>the error is associated with. This field is valid if the Log Page Version field is greater than or equal<br>to 1h.|
|31|**Opcode (OPC):** This field contains opcode for the command that the error is associated with. This<br>field is valid if the Log Page Version field is greater than or equal to 1h.<br>This field, the CSI field, and the Submission Queue ID field uniquely indicate the command and the<br>command set.|
|39:32|**Command Specific Information (CSINFO):**This field contains the command specific information.<br>If used, the command definition specifies the information returned.|
|41:40|**Transport Type Specific Information (TTSI):** This field indicates additional transport type specific<br>error information. If multiple errors exist, then this field indicates additional information about the first<br>error. This field is transport type dependent (refer to TRTYPE) as follows: <br>**Transport**<br>**Type**<br>**Description**<br>All other values<br>Reserved<br>3h<br>This field indicates, the offset, in bytes, from the start of the Transport Header<br>to the start of the field that is in error. If multiple errors exist, then this field<br>indicates the lowest offset that is in error.|
|62:42|Reserved|
|63|**Log Page Version (LPVER):** This field shall be set to 1h.|


|Transport<br>Type|Description|
|---|---|
|All other values|Reserved|
|3h|This field indicates, the offset, in bytes, from the start of the Transport Header<br>to the start of the field that is in error. If multiple errors exist, then this field<br>indicates the lowest offset that is in error.|


**5.1.12.1.3** **SMART / Health Information (Log Page Identifier 02h)**


This log page is used to provide SMART and general health information. The information provided is over
the life of the controller and is retained across power cycles unless otherwise specified. To request the
controller log page, the namespace identifier specified is FFFFFFFFh or 0h. For compatibility with
implementations compliant with NVM Express Base Specification, Revision 1.4 and earlier, hosts should
use a namespace identifier of FFFFFFFFh to request the controller log page. The controller may also
support requesting the log page on a per namespace basis, as indicated by the SMART Support bit of the
LPA field in the Identify Controller data structure in Figure 313.


If the log page is not supported on a per namespace basis and:


  - if a namespace identifier other than 0h or FFFFFFFFh is specified by the host, then the controller
shall abort the command with a status code of Invalid Field in Command; and

  - if a namespace identifier of 0h or FFFFFFFFh is specified by the host, then the controller returns
the controller log page.


There is no namespace specific information defined in the SMART / Health Information log page in this
revision of the specification, thus the controller log page and namespaces specific log page contain identical
information.


Critical warnings regarding the health of the NVM subsystem may be indicated via an asynchronous event
notification to the host. The warnings that results in an asynchronous event notification to the host are
configured using the Set Features command; refer to section 5.1.25.1.5.


205


NVM Express [®] Base Specification, Revision 2.2


Performance may be calculated using parameters returned as part of the SMART / Health Information log.
Specifically, the number of Read or Write commands, the amount of data read or written, and the amount
of controller busy time enables both I/Os per second and bandwidth to be calculated.


The log page returned is defined in Figure 207.


**Figure 207: SMART / Health Information Log Page**










|Bits|Description|
|---|---|
|7:6|Reserved|
|5|**Persistent Memory Region Read-Only (PMRRO):**If this bit is set to ‘1’, then the<br>Persistent Memory Region has become read-only or unreliable (refer to section 8.2.4).|
|4|**Volatile Memory Backup Failed (VMBF):**If this bit is set to ‘1’, then the volatile memory<br>backup device has failed. This field is only valid if the controller has a volatile memory<br>backup solution.|
|3|**All Media Read-Only (AMRO):**If this bit is set to ‘1’, then all of the media has been placed<br>in read only mode. The controller shall not set this bit to '1' if the read-only condition on<br>the media is a result of a change in the write protection state of a namespace (refer to<br>section 8.1.16.1).|
|2|**NVM Subsystem Degraded Reliability (NDR):**If this bit is set to ‘1’, then the NVM<br>subsystem reliability has been degraded due to significant media related errors or any<br>internal error that degrades NVM subsystem reliability.|
|1|**Temperature Threshold Condition (TTC):**If this bit is set to ‘1’, then a temperature is:<br>a)<br>greater than or equal to an over temperature threshold; or<br>b)<br>less than or equal to an under temperature threshold,<br>(refer to section 5.1.25.1.3).|
|0|**Available Spare Capacity Below Threshold (ASCBT):**If this bit is set to ‘1’, then the<br>available spare capacity has fallen below the threshold.|







|Bytes|Description|
|---|---|
|00|**Critical Warning (CW):** This field indicates critical warnings for the state of the controller. Each bit<br>corresponds to a critical warning type; multiple bits may be set to ‘1’. If a bit is cleared to ‘0’, then that<br>critical warning does not apply. Critical warnings may result in an asynchronous event notification to the<br>host. Bits in this field represent the state at the time the Get Log Page command is processed and may<br>not reflect the state at the time a related asynchronous event notification, if any, occurs or occurred.<br>**Bits**<br>**Description**<br>7:6<br>Reserved<br>5 <br>**Persistent Memory Region Read-Only (PMRRO):**If this bit is set to ‘1’, then the<br>Persistent Memory Region has become read-only or unreliable (refer to section 8.2.4).<br>4 <br>**Volatile Memory Backup Failed (VMBF):**If this bit is set to ‘1’, then the volatile memory<br>backup device has failed. This field is only valid if the controller has a volatile memory<br>backup solution.<br>3 <br>**All Media Read-Only (AMRO):**If this bit is set to ‘1’, then all of the media has been placed<br>in read only mode. The controller shall not set this bit to '1' if the read-only condition on<br>the media is a result of a change in the write protection state of a namespace (refer to<br>section 8.1.16.1).<br>2 <br>**NVM Subsystem Degraded Reliability (NDR):**If this bit is set to ‘1’, then the NVM<br>subsystem reliability has been degraded due to significant media related errors or any<br>internal error that degrades NVM subsystem reliability.<br>1 <br>**Temperature Threshold Condition (TTC):**If this bit is set to ‘1’, then a temperature is:<br>a)<br>greater than or equal to an over temperature threshold; or<br>b)<br>less than or equal to an under temperature threshold,<br>(refer to section 5.1.25.1.3).<br>0 <br>**Available Spare Capacity Below Threshold (ASCBT):**If this bit is set to ‘1’, then the<br>available spare capacity has fallen below the threshold.|
|02:01|**Composite Temperature (CTEMP):**Contains a value corresponding to a temperature in Kelvins that<br>represents the current composite temperature of the controller and namespace(s) associated with that<br>controller. The manner in which this value is computed is implementation specific and may not represent<br>the actual temperature of any physical point in the NVM subsystem. The value of this field may be used<br>to trigger an asynchronous event (refer to section 5.1.25.1.3).<br>Warning and critical overheating composite temperature threshold values are reported by the WCTEMP<br>and CCTEMP fields in the Identify Controller data structure in Figure 313.|
|03|**Available Spare (AVSP):**Contains a normalized percentage (0% to 100%) of the remaining spare<br>capacity available.|
|04|**Available Spare Threshold (AVSPT):**When the Available Spare falls below the threshold indicated in<br>this field, an asynchronous event completion may occur. The value is indicated as a normalized<br>percentage (0% to 100%). The values 101 to 255 are reserved.|
|05|**Percentage Used (PUSED):**Contains a vendor specific estimate of the percentage of NVM subsystem<br>life used based on the actual usage and the manufacturer’s prediction of NVM life. A value of 100<br>indicates that the estimated endurance of the NVM in the NVM subsystem has been consumed, but may<br>not indicate an NVM subsystem failure. The value is allowed to exceed 100. Percentages greater than<br>254 shall be represented as 255. This value shall be updated once per power-on hour (when the<br>controller is not in a sleep state).<br>Refer to the JEDEC JESD218B-02 standard for SSD device life and endurance measurement<br>techniques.|


206


NVM Express [®] Base Specification, Revision 2.2


**Figure 207: SMART / Health Information Log Page**












|Bits|Description|
|---|---|
|7:4|Reserved|
|3|**Endurance Group Read-Only (EGRO):**If this bit is set to ‘1’, then the namespaces in<br>one or more Endurance Groups have been placed in read only mode not as a result of a<br>change in the write protection state of a namespace (refer to section 8.1.16.1).|
|2|**Endurance Group Degraded Reliability (EGDR):**If this bit is set to ‘1’, then the reliability<br>of one or more Endurance Groups has been degraded due to significant media related<br>errors or any internal error that degrades NVM subsystem reliability.|
|1|Reserved|
|0|**Endurance Group Available Spare Capacity Below Threshold (EGASCBT):**If this bit<br>is set to ‘1’, then the available spare capacity of one or more Endurance Groups has fallen<br>below the threshold.|







|Bytes|Description|
|---|---|
|06|**Endurance Group Critical Warning Summary (EGCWS):** This field indicates critical warnings for the<br>state of Endurance Groups. Each bit corresponds to a critical warning type, multiple bits may be set to<br>‘1’. If a bit is cleared to ‘0’, then that critical warning does not apply to any Endurance Group. Critical<br>warnings may result in an asynchronous event notification to the host. Bits in this field represent the<br>current associated state and are not persistent.<br>If a bit is set to ‘1’ in one or more Endurance Groups, then the corresponding bit shall be set to ‘1’ in this<br>field. <br>**Bits**<br>**Description**<br>7:4<br>Reserved<br>3 <br>**Endurance Group Read-Only (EGRO):**If this bit is set to ‘1’, then the namespaces in<br>one or more Endurance Groups have been placed in read only mode not as a result of a<br>change in the write protection state of a namespace (refer to section 8.1.16.1).<br>2 <br>**Endurance Group Degraded Reliability (EGDR):**If this bit is set to ‘1’, then the reliability<br>of one or more Endurance Groups has been degraded due to significant media related<br>errors or any internal error that degrades NVM subsystem reliability.<br>1 <br>Reserved<br>0 <br>**Endurance Group Available Spare Capacity Below Threshold (EGASCBT):**If this bit<br>is set to ‘1’, then the available spare capacity of one or more Endurance Groups has fallen<br>below the threshold.|
|31:07|Reserved|
|47:32|**Data Units Read (DUR):** Contains the number of 512 byte data units the host has read from the<br>controller as part of processing a SMART Data Units Read Command; this value does not include<br>metadata. This value is reported in thousands (i.e., a value of 1 corresponds to 1,000 units of 512 bytes<br>read) and is rounded up (e.g., one indicates the that number of 512 byte data units read is from 1 to<br>1,000, three indicates that the number of 512 byte data units read is from 2,001 to 3,000).<br>Refer to the specific I/O Command Set specification for the list of SMART Data Units Read Commands<br>that affect this field.<br>A value of 0h in this field indicates that the number of SMART Data Units Read is not reported.|
|63:48|**Data Units Written (DUW):**Contains the number of 512 byte data units the host has written to the<br>controller as part of processing a User Data Out Command; this value does not include metadata. This<br>value is reported in thousands (i.e., a value of 1 corresponds to 1,000 units of 512 bytes written) and is<br>rounded up (e.g., one indicates that the number of 512 byte data units written is from 1 to 1,000, three<br>indicates that the number of 512 byte data units written is from 2,001 to 3,000).<br>Refer to the specific I/O Command Set specification for the list of User Data Out Commands that affect<br>this field.<br>A value of 0h in this field indicates that the number of Data Units Written is not reported.|
|79:64|**Host Read Commands (HRC):**Contains the number of SMART Host Read Commands completed by<br>the controller.<br>Refer to the specific I/O Command Set specification for the list of SMART Host Read Commands that<br>affect this field.|
|95:80|**Host Write Commands (HWC):**Contains the number of User Data Out Commands completed by the<br>controller.<br>Refer to the specific I/O Command Set specification for the list of User Data Out Commands that affect<br>this field.|
|111:96|**Controller Busy Time (CBT):**Contains the amount of time the controller is busy with I/O commands.<br>The controller is busy when there is a command outstanding to an I/O Queue (specifically, a command<br>was issued via an I/O Submission Queue Tail doorbell write and the corresponding completion queue<br>entry has not been posted yet to the associated I/O Completion Queue). This value is reported in<br>minutes.|
|127:112|**Power Cycles (PWRC):**Contains the number of power cycles.|
|143:128|**Power On Hours (POH):**Contains the number of power-on hours. This may not include time that the<br>controller was powered and in a non-operational power state.|


207


NVM Express [®] Base Specification, Revision 2.2


**Figure 207: SMART / Health Information Log Page**













|Bytes|Description|
|---|---|
|159:144|**Unexpected Power Losses (UPL):**Contains a count of the number of unexpected power losses. This<br>count shall be incremented if, and only if, main power is lost when:<br>a)<br>the controller does not report it is ready to be powered off (i.e., the CSTS.SHST field is not set<br>to 10b); or<br>b)<br>media is not in the shutdown state (refer to Figure 85) because an Admin command that<br>accesses media as defined by Figure 84 was processed via the out-of-band mechanism with<br>the Ignore Shutdown bit set to ‘1’ (refer to the NVM Express Management Interface<br>Specification) while shutdown processing was reported as in progress or was reported as<br>complete (i.e., the CSTS.SHST field was set to 01b or set to 10b).<br>Note that this field was previously named Unsafe Shutdowns.<br>If power is lost when the CSTS.SHST field is not set to 10b, then subsequent controller initialization (i.e.,<br>the amount of time from when the CC.EN bit transitions from ‘0’ to ‘1’ until the CSTS.RDY bit transitions<br>from ‘0’ to ‘1’) may take longer for any NVM subsystem, and data corruption may occur for any NVM<br>subsystem that is not protected against power loss.<br>If the Controller Power Scope (i.e., CAP.CPS) field is cleared to 00b (i.e., Not Reported) or set to 01b<br>(i.e., Controller scope), then the controller reports that the controller is ready to be powered off when the<br>controller is shutdown (i.e., CSTS.SHST field is set to 10b).<br>If the CAP.CPS field is set to 10b (i.e., Domain scope), then the controller reports that the domain is<br>ready to be powered off when all the controllers in that domain are shutdown (e.g., NVM Subsystem<br>Shutdown processing is complete).<br>If the CAP.CPS field is set to 11b (i.e., NVM subsystem scope), then the controller reports that the NVM<br>subsystem is ready to be powered off when all controllers in the NVM subsystem are shutdown (e.g.,<br>NVM Subsystem Shutdown processing is complete).|
|175:160|**Media and Data Integrity Errors (MDIE):**Contains the number of occurrences where the controller<br>detected an unrecovered data integrity error. Errors such as uncorrectable ECC, CRC checksum failure,<br>or LBA tag mismatch are included in this field. Errors introduced as a result of a Write Uncorrectable<br>command (refer to the NVM Command Set Specification) may or may not be included in this field.|
|191:176|**Number of Error Information Log Entries (NEILE):**Contains the number of Error Information Log<br>Entries over the life of the controller.|
|195:192|**Warning Composite Temperature Time (WCTT):**If the Temperature Threshold Hysteresis Attributes<br>(TMPTHHA) field cleared to 0h (refer to Figure 313), then this field contains the amount of time in minutes<br>that the controller is operational and the Composite Temperature is greater than or equal to the Warning<br>Composite Temperature Threshold (WCTEMP) field and less than the Critical Composite Temperature<br>Threshold (CCTEMP) field in the Identify Controller data structure in Figure 313.<br>If the Temperature Threshold Maximum Hysteresis (TMPTHMH) and Temperature Threshold Hysteresis<br>(TMPTHH) fields are non-zero, then hysteresis time is included in the time specified in this field (refer to<br>section 5.1.25.1.3.1).<br>If the value of the WCTEMP or CCTEMP field is 0h, then this field is always cleared to 0h regardless of<br>the Composite Temperature value.|
|199:196|**Critical Composite Temperature Time (CCTT):**Contains the amount of time in minutes that the<br>controller is operational and the Composite Temperature is greater than or equal to the Critical<br>Composite Temperature Threshold (CCTEMP) field in the Identify Controller data structure in Figure<br>313.<br>If the value of the CCTEMP field is 0h, then this field is always cleared to 0h regardless of the Composite<br>Temperature value.|
|201:200|**Temperature Sensor 1 (TSEN1):**Contains the current temperature reported by temperature sensor 1.<br>This field is defined by Figure 208.|
|203:202|**Temperature Sensor 2 (TSEN2):**Contains the current temperature reported by temperature sensor 2.<br>This field is defined by Figure 208.|
|205:204|**Temperature Sensor 3 (TSEN3):**Contains the current temperature reported by temperature sensor 3.<br>This field is defined by Figure 208.|


208


NVM Express [®] Base Specification, Revision 2.2


**Figure 207: SMART / Health Information Log Page**







|Bytes|Description|
|---|---|
|207:206|**Temperature Sensor 4 (TSEN4):**Contains the current temperature reported by temperature sensor 4.<br>This field is defined by Figure 208.|
|209:208|**Temperature Sensor 5 (TSEN5):**Contains the current temperature reported by temperature sensor 5.<br>This field is defined by Figure 208.|
|211:210|**Temperature Sensor 6 (TSEN6):**Contains the current temperature reported by temperature sensor 6.<br>This field is defined by Figure 208.|
|213:212|**Temperature Sensor 7 (TSEN7):**Contains the current temperature reported by temperature sensor 7.<br>This field is defined by Figure 208.|
|215:214|**Temperature Sensor 8 (TSEN8):**Contains the current temperature reported by temperature sensor 8.<br>This field is defined by Figure 208.|
|219:216|**Thermal Management Temperature 1 Transition Count (TMT1TC):** Contains the number of times the<br>controller transitioned to lower power active power states or performed vendor specific thermal<br>management actions while minimizing the impact on performance in order to attempt to reduce the<br>Composite Temperature because of the host controlled thermal management feature (refer to section<br>8.1.17.5) (i.e., the Composite Temperature rose above the Thermal Management Temperature 1). This<br>counter shall not wrap once the value FFFFFFFFh is reached. A value of 0h, indicates that this transition<br>has never occurred or this field is not implemented.|
|223:220|**Thermal Management Temperature 2 Transition Count (TMT2TC):** Contains the number of times the<br>controller transitioned to lower power active power states or performed vendor specific thermal<br>management actions regardless of the impact on performance (e.g., heavy throttling) in order to attempt<br>to reduce the Composite Temperature because of the host controlled thermal management feature (refer<br>to section 8.1.17.5) (i.e., the Composite Temperature rose above the Thermal Management<br>Temperature 2). This counter shall not wrap once the value FFFFFFFFh is reached. A value of 0h,<br>indicates that this transition has never occurred or this field is not implemented.|
|227:224|**Total Time For Thermal Management Temperature 1 (TTTMT1):**Contains the number of seconds<br>that the controller had transitioned to lower power active power states or performed vendor specific<br>thermal management actions while minimizing the impact on performance in order to attempt to reduce<br>the Composite Temperature because of the host controlled thermal management feature (refer to<br>section 8.1.17.5). This counter shall not wrap once the value FFFFFFFFh is reached. A value of 0h,<br>indicates that this transition has never occurred or this field is not implemented.|
|231:228|**Total Time For Thermal Management Temperature 2 (TTTMT2):** Contains the number of seconds<br>that the controller had transitioned to lower power active power states or performed vendor specific<br>thermal management actions regardless of the impact on performance (e.g., heavy throttling) in order<br>to attempt to reduce the Composite Temperature because of the host controlled thermal management<br>feature (refer to section 8.1.17.5). This counter shall not wrap once the value FFFFFFFFh is reached. A<br>value of 0h, indicates that this transition has never occurred or this field is not implemented.|
|511:232|Reserved|


**Figure 208: Temperature Sensor Data Structure**





|Bits|Description|
|---|---|
|15:00|**Temperature Sensor Temperature (TST):**Contains the current temperature in Kelvins reported by the<br>temperature sensor.<br>The physical point in the NVM subsystem whose temperature is reported by the temperature sensor<br>and the temperature accuracy is implementation specific. An implementation that does not implement<br>the temperature sensor reports a value of 0h. The temperature reported by a temperature sensor may<br>be used to trigger an asynchronous event (refer to section 5.1.25.1.3).|


209


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.4** **Firmware Slot Information (Log Page Identifier 03h)**


This log page is used to describe the firmware revision stored in each firmware slot supported. The firmware
revision is indicated as an ASCII string. The log page also indicates the active slot number. The log page
returned is defined in Figure 209.


**Figure 209: Firmware Slot Information Log Page**








|Bits|Description|
|---|---|
|7|Reserved|
|6:4|**Next Active Firmware Slot (NAFS):** This field indicates the firmware slot that is going to be<br>activated at the next Controller Level Reset. If this field is cleared to 0h, then the controller<br>does not indicate the firmware slot that is going to be activated at the next Controller Level<br>Reset.|
|3|Reserved|
|2:0|**Current Active Firmware Slot (CAFS):** This field indicates the firmware slot from which the<br>actively running firmware revision was loaded|







|Bytes|Description|
|---|---|
|00|**Active Firmware Info (AFI):**Specifies information about the active firmware revision.<br>**Bits**<br>**Description**<br>7 <br>Reserved<br>6:4<br>**Next Active Firmware Slot (NAFS):** This field indicates the firmware slot that is going to be<br>activated at the next Controller Level Reset. If this field is cleared to 0h, then the controller<br>does not indicate the firmware slot that is going to be activated at the next Controller Level<br>Reset.<br>3 <br>Reserved<br>2:0<br>**Current Active Firmware Slot (CAFS):** This field indicates the firmware slot from which the<br>actively running firmware revision was loaded|
|07:01|Reserved|
|15:08|**Firmware Revision for Slot 1 (FRS1):**Contains the revision of the firmware downloaded to firmware<br>slot 1. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|23:16|**Firmware Revision for Slot 2 (FRS2):**Contains the revision of the firmware downloaded to firmware<br>slot 2. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|31:24|**Firmware Revision for Slot 3 (FRS3):**Contains the revision of the firmware downloaded to firmware<br>slot 3. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|39:32|**Firmware Revision for Slot 4 (FRS4):**Contains the revision of the firmware downloaded to firmware<br>slot 4. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|47:40|**Firmware Revision for Slot 5 (FRS5):**Contains the revision of the firmware downloaded to firmware<br>slot 5. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|55:48|**Firmware Revision for Slot 6 (FRS6):**Contains the revision of the firmware downloaded to firmware<br>slot 6. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|63:56|**Firmware Revision for Slot 7 (FRS7):**Contains the revision of the firmware downloaded to firmware<br>slot 7. If no valid firmware revision is present or if this slot is unsupported, this field shall be cleared to<br>0h.|
|511:64|Reserved|


**5.1.12.1.5** **Changed Attached Namespace List (Log Page Identifier 04h)**


This log page is used to describe changes to attached namespaces for this controller, since the last time
that this log page was read, that:


a) have changed information in their Identify Namespace data structures (refer to section 1.5.49);
b) were previously unattached to the controller and have since been attached to the controller;
c) were previously attached to the controller and have since been detached from the controller; and
d) were deleted.


The log page contains a Namespace List with up to 1,024 entries. If more than 1,024 namespaces have
changed attributes since the last time the log page was read, the first entry in the log page shall be set to
FFFFFFFFh and the remainder of the list shall be zero filled.


210


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.6** **Commands Supported and Effects (Log Page Identifier 05h)**


This log page is used to describe the commands that the controller supports and the effects of those
commands on the state of the NVM subsystem. The log page is 4,096 bytes in size. There is one
Commands Supported and Effects data structure per Admin command opcode value. For controllers that
implement I/O Queues, there is one Commands Supported and Effects data structure per I/O command
opcode value for a specified I/O Command Set based on:


a) the I/O Command Set selected in CC.CSS, if CC.CSS is not set to 110b; and
b) the Command Set Identifier field in CDW 14, if CC.CSS is set to 110b.


**Figure 210: Commands Supported and Effects Log Page**

|Bytes|Description|
|---|---|
|03:00|**Admin Command Supported 0 (ACS0):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the Admin command with an opcode value of 0h.|
|07:04|**Admin Command Supported 1 (ACS1):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the Admin command with an opcode value of 1h.|
|…|…|
|1019:1016|**Admin Command Supported 254 (ACS254):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the Admin command with an opcode value of 254.|
|1023:1020|**Admin Command Supported 255 (ACS255):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the Admin command with an opcode value of 255.|
|1027:1024|**I/O Command Supported 0 (IOCS0):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the I/O command with an opcode value of 0h.|
|1031:1028|**I/O Command Supported 1 (IOCS1):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the I/O command with an opcode value of 1h.|
|…|…|
|2043:2040|**I/O Command Supported 254 (IOCS254):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the I/O command with an opcode value of 254.|
|2047:2044|**I/O Command Supported 255 (IOCS255):**Contains the Commands Supported and Effects data<br>structure (refer to Figure 211) for the I/O command with an opcode value of 255.|
|4095:2048|Reserved|



The Commands Supported and Effects data structure describes the overall possible effect of a command,
including any optional features of the command.


Host software may take command effects into account when determining how to submit commands and
actions to take after the command is complete. It is recommended that if a command may change a
particular capability that host software re-enumerate and/or re-initialize the associated capability after the
command is complete. For example, if a namespace capability change may occur, then host software is
recommended to pause the use of the associated namespace, submit the command that may cause a
namespace capability change and wait for its completion, and then re-issue the Identify command.


If the namespace is attached to multiple controllers, the host(s) associated with those controllers should
coordinate their commands to meet the Command Submission and Execution requirements (refer to Figure
211). The details of this coordination are outside the scope of this specification.


211


NVM Express [®] Base Specification, Revision 2.2


**Figure 211: Commands Supported and Effects Data Structure**








|Bits|Description|
|---|---|
|11:6|Reserved|
|5|**NVM Subsystem Scope (NSSCPE)**: If this bit is set to ‘1’, then the command<br>performs actions that may impact the whole NVM subsystem. If this bit is cleared to<br>‘0’ and the CSP field is non-zero, then the command performs actions that does not<br>impact the whole NVM subsystem.|
|4|**Domain Scope (DSCPE)**: If this bit is set to ‘1’, then the command performs actions<br>that may impact a single Domain. If this bit is cleared to ‘0’ and the CSP field is non-<br>zero, then the command performs actions that does not impact a single Domain.|
|3|**Endurance Group Scope (EGSCPE)**: If this bit is set to ‘1’, then the command<br>performs actions that may impact Endurance Groups. If this bit is cleared to ‘0’ and<br>the CSP field is non-zero, then the command performs actions that does not impact<br>a single Endurance Group.|
|2|**NVM Set Scope (NSETSCPE)**: If this bit is set to ‘1’, then the command performs<br>actions that may impact NVM Sets. If this bit is cleared to ‘0’ and the CSP field is<br>non-zero, then the command performs actions that do not impact NVM Sets.|
|1|**Controller Scope (CSCPE)**: If this bit is set to ‘1’, then the command performs<br>actions that may impact controllers. If this bit is cleared to ‘0’ and the CSP field is<br>non-zero, then the command performs actions that do not impact controllers.|
|0|**Namespace Scope (NSCPE)**: If this bit is set to ‘1’, then the command performs<br>actions that may impact namespaces. If this bit is cleared to ‘0’ and the CSP field is<br>non-zero, then the command performs actions that do not impact namespaces.|









|Bits|Description|
|---|---|
|31:20|**Command Scope (CSP):** This field defines the scope for the associated command. If the value<br>of this field is 0h then no scope is reported. A command may have multiple scopes depending on<br>the effects of the command based on the parameters passed to that command. For a command<br>that supports multiple scopes, multiple bits may set to ‘1’.<br>**Bits**<br>**Description**<br>11:6<br>Reserved<br>5 <br>**NVM Subsystem Scope (NSSCPE)**: If this bit is set to ‘1’, then the command<br>performs actions that may impact the whole NVM subsystem. If this bit is cleared to<br>‘0’ and the CSP field is non-zero, then the command performs actions that does not<br>impact the whole NVM subsystem. <br>4 <br>**Domain Scope (DSCPE)**: If this bit is set to ‘1’, then the command performs actions<br>that may impact a single Domain. If this bit is cleared to ‘0’ and the CSP field is non-<br>zero, then the command performs actions that does not impact a single Domain.<br>3 <br>**Endurance Group Scope (EGSCPE)**: If this bit is set to ‘1’, then the command<br>performs actions that may impact Endurance Groups. If this bit is cleared to ‘0’ and<br>the CSP field is non-zero, then the command performs actions that does not impact<br>a single Endurance Group.<br>2 <br>**NVM Set Scope (NSETSCPE)**: If this bit is set to ‘1’, then the command performs<br>actions that may impact NVM Sets. If this bit is cleared to ‘0’ and the CSP field is<br>non-zero, then the command performs actions that do not impact NVM Sets.<br>1 <br>**Controller Scope (CSCPE)**: If this bit is set to ‘1’, then the command performs<br>actions that may impact controllers. If this bit is cleared to ‘0’ and the CSP field is<br>non-zero, then the command performs actions that do not impact controllers.<br>0 <br>**Namespace Scope (NSCPE)**: If this bit is set to ‘1’, then the command performs<br>actions that may impact namespaces. If this bit is cleared to ‘0’ and the CSP field is<br>non-zero, then the command performs actions that do not impact namespaces.|
|19|**UUID Selection Supported (USS):** If this bit is set to ‘1’, then the controller supports selection<br>of a UUID by this command (refer to section 8.1.28). If this bit is cleared to ‘0’, then the controller<br>does not support selection of a UUID by this command.|
|18:16|**Command Submission and Execution (CSE):**This field defines the command submission and<br>execution recommendations for the associated command.<br>If the CSER field contains a non-zero value and the host supports the value in that field, then this<br>field should be ignored by the host. If the CSER field is set to 01b, then this field shall be set to<br>001b.<br>**Value**<br>**Definition**<br>000b<br>No command submission or execution restriction<br>001b<br>The command associated with this structure should only be submitted<br>when there is no other outstanding command affecting the same<br>namespace and another command should not be submitted that affects<br>the same namespace until this command is complete.<br>010b<br>The command associated with this structure should only be submitted<br>when there is no other outstanding command that affects any<br>namespace and another command should not be submitted that affects<br>any namespace until this command is complete.<br>011b to 111b<br>Reserved|


|Value|Definition|
|---|---|
|000b|No command submission or execution restriction|
|001b|The command associated with this structure should only be submitted<br>when there is no other outstanding command affecting the same<br>namespace and another command should not be submitted that affects<br>the same namespace until this command is complete.|
|010b|The command associated with this structure should only be submitted<br>when there is no other outstanding command that affects any<br>namespace and another command should not be submitted that affects<br>any namespace until this command is complete.|
|011b to 111b|Reserved|


212


NVM Express [®] Base Specification, Revision 2.2


**Figure 211: Commands Supported and Effects Data Structure**












|Value|Definition|
|---|---|
|00b|No relaxed command submission and execution recommendation is defined.<br>The host should use the value in the CSE field as the command submission<br>and execution recommendation.|
|01b|The command associated with this structure should only be submitted when<br>there is no outstanding Admin command that affects any namespace and no<br>Admin command should be submitted that affects any namespace until this<br>command is complete.|
|10b to 11b|Reserved|






|Bits|Description|
|---|---|
|15:14|**Command Submission and Execution Relaxations (CSER):** This field defines relaxed<br>command submission and execution recommendations for the associated command.<br>If this field is cleared to 00b, then the CSE field defines the command submission and execution<br>recommendations for the associated command and this field has no effect.<br>If this field is set to a non-zero value, then:<br>• <br>if the host supports the value in this field, then the host should ignore the CSE field and<br>use the value in this field as the command submission and execution recommendation;<br>and<br>• <br>if the host does not support the value in this field, then the host should ignore this field<br>and use the value in the CSE field as the command submission and execution<br>recommendation.<br>**Value**<br>**Definition**<br>00b<br>No relaxed command submission and execution recommendation is defined.<br>The host should use the value in the CSE field as the command submission<br>and execution recommendation.<br>01b<br>The command associated with this structure should only be submitted when<br>there is no outstanding Admin command that affects any namespace and no<br>Admin command should be submitted that affects any namespace until this<br>command is complete.<br>10b to 11b<br>Reserved|
|13:05|Reserved|
|04|**Controller Capability Change (CCC):**If this bit is set to ‘1’, then this command may change<br>controller capabilities. If this bit is cleared to ‘0’, then this command does not modify controller<br>capabilities. Controller capability changes include a firmware update that changes the capabilities<br>reported in the CAP property.|
|03|**Namespace Inventory Change (NIC):**If this bit is set to ‘1’, then this command may change the<br>number of namespaces or capabilities for multiple namespaces. If this bit is cleared to ‘0’, then<br>this command does not modify the number of namespaces or capabilities for multiple<br>namespaces. Namespace inventory changes include adding or removing namespaces.|
|02|**Namespace Capability Change (NCC):**If this bit is set to ‘1’, then this command may change<br>the capabilities of a single namespace. If this bit is cleared to ‘0’, then this command does not<br>modify any namespace capabilities for the specified namespace. Namespace capability changes<br>include a logical format change.|
|01|**Logical Block Content Change (LBCC):**If this bit is set to ‘1’, then this command may modify<br>user data content in one or more namespaces that contain formatted storage. If this bit is cleared<br>to ‘0’, then this command does not modify user data content in any namespace. User data content<br>changes include a write to user data. <br>NOTE: This field applies to all user data content changes. The original name has been retained<br>for historical continuity.|
|00|**Command Supported (CSUPP):**If this bit is set to ‘1’, then this command is supported by the<br>controller. If this bit is cleared to ‘0’, then this command is not supported by the controller and all<br>other fields in this structure shall be cleared to 0h.|



**5.1.12.1.7** **Device Self-test (Log Page Identifier 06h)**


This log page is used to indicate:


a) the status of any device self-test operation in progress and the percentage complete of that

operation; and
b) the results of the last 20 device self-test operations.


The Self-test Result data structure (refer to Figure 213) contained in the Result Data Structure 1 field is
always the result of the most recently completed or aborted self-test operation. The next entry in the Device
Self-test Result list in the Device Self-test log page contains the results of the second most recent self-test


213


NVM Express [®] Base Specification, Revision 2.2


operation and so on. If fewer than 20 self-test operations have completed or been aborted, then the Device
Self-test Result field shall be set to Fh (i.e., Entry is empty) and the Self-test Code field shall be cleared to
0h (i.e., Entry is empty) in the Device Self-test Status field in the unused Self-test Result Data Structure
fields and all other fields in that Self-test Result data structure should be ignored by the host.


**Figure 212: Device Self-test Log Page**








|Bits|Description|
|---|---|
|7:4|Reserved|
|3:0|**Device Self-test Operation Status (DSTOS):**This field indicates the status of the<br>current device self-test operation as defined in the following table. If a device self-<br>test operation is in process (i.e., this field is set to 1h or 2h), then the controller shall<br>not set this field to 0h until a new Self-test Result Data Structure is created (i.e., if<br>a device self-test operation completes or is aborted, then the controller shall create<br>a Self-test Result Data Structure prior to setting this field to 0h).<br>**Value**<br>**Definition**<br>0h<br>No device self-test operation in progress<br>1h<br>Short device self-test operation in progress<br>2h<br>Extended device self-test operation in progress<br>3h to Dh<br>Reserved<br>Eh<br>Vendor specific<br>Fh<br>Reserved|


|Value|Definition|
|---|---|
|0h|No device self-test operation in progress|
|1h|Short device self-test operation in progress|
|2h|Extended device self-test operation in progress|
|3h to Dh|Reserved|
|Eh|Vendor specific|
|Fh|Reserved|










|Bits|Description|
|---|---|
|7|Reserved|
|6:0|**Device Self-test Completion Status (DSTCS):**This field indicates the percentage<br>of the device self-test operation that is complete (e.g., a value of 25 indicates that<br>25% of the device self-test operation is complete and 75% remains to be tested). If<br>the Device Self-test Operation Status (DSTOS) field in the Current Device Self-Test<br>Operation field is cleared to 0h (i.e., there is no device self-test operation in<br>progress), then this field should be ignored by the host.|



|Bytes|Description|
|---|---|
|00|**Current Device Self-Test Operation (CDSTO):** This field defines the current device self-test<br>operation.<br>**Bits**<br>**Description**<br>7:4<br>Reserved<br>3:0<br>**Device Self-test Operation Status (DSTOS):**This field indicates the status of the<br>current device self-test operation as defined in the following table. If a device self-<br>test operation is in process (i.e., this field is set to 1h or 2h), then the controller shall<br>not set this field to 0h until a new Self-test Result Data Structure is created (i.e., if<br>a device self-test operation completes or is aborted, then the controller shall create<br>a Self-test Result Data Structure prior to setting this field to 0h).<br>**Value**<br>**Definition**<br>0h<br>No device self-test operation in progress<br>1h<br>Short device self-test operation in progress<br>2h<br>Extended device self-test operation in progress<br>3h to Dh<br>Reserved<br>Eh<br>Vendor specific<br>Fh<br>Reserved|
|01|**Current Device Self-Test Completion (CDSTC):** This field defines the completion status of the<br>current device self-test.<br>**Bits**<br>**Description**<br>7 <br>Reserved<br>6:0<br>**Device Self-test Completion Status (DSTCS):**This field indicates the percentage<br>of the device self-test operation that is complete (e.g., a value of 25 indicates that<br>25% of the device self-test operation is complete and 75% remains to be tested). If<br>the Device Self-test Operation Status (DSTOS) field in the Current Device Self-Test<br>Operation field is cleared to 0h (i.e., there is no device self-test operation in<br>progress), then this field should be ignored by the host.|
|03:02|Reserved|
|**Device Self-test Result List**|**Device Self-test Result List**|
|31:04|**Result Data Structure 1 (RDS1):** The newest Self-test Result data structure (refer to Figure 213)|
|59:32|**Result Data Structure 2 (RDS2):** The 2nd newest Self-test Result data structure (refer to Figure 213)|
|…|…|
|535:508|**Result Data Structure 19 (RDS19):** The 19th newest Self-test Result data structure (refer to Figure<br>213)|
|563:536|**Result Data Structure 20 (RDS20):** The 20th newest Self-test Result data structure (refer to Figure<br>213)|


214


NVM Express [®] Base Specification, Revision 2.2


**Figure 213: Self-test Result Data Structure**




|Value|Definition|
|---|---|
|0h|Entry is empty|
|1h|Short device self-test operation|
|2h|Extended device self-test operation|
|3h|Host-Initiated Refresh operation|
|4h to Dh|Reserved|
|Eh|Vendor specific|
|Fh|Reserved|












|Bits|Description|
|---|---|
|7:4|**Self-test Code (DSTC):** This field indicates the Self-test Code value that was<br>specified in the Device Self-test command that started the device self-test operation<br>that this Self-test Result Data Structure describes.<br>**Value**<br>**Definition**<br>0h<br>Entry is empty<br>1h<br>Short device self-test operation<br>2h<br>Extended device self-test operation<br>3h<br>Host-Initiated Refresh operation<br>4h to Dh<br>Reserved<br>Eh<br>Vendor specific<br>Fh<br>Reserved|
|3:0|**Device Self-test Result (DSTR):**This field indicates the result of the device self-test<br>operation that this Self-test Result Data Structure describes.<br>**Value**<br>**Definition**<br>0h<br>Operation completed without error<br>1h<br>Operation was aborted by a Device Self-test command<br>2h<br>Operation was aborted by a Controller Level Reset<br>3h<br>Operation was aborted due to a removal of a namespace from the<br>namespace inventory<br>4h<br>Operation was aborted due to the processing of a Format NVM<br>command<br>5h<br>A fatal error or unknown test error occurred while the controller<br>was executing the device self-test operation and the operation did<br>not complete<br>6h<br>Operation completed with a segment that failed and the segment<br>that failed is not known<br>7h<br>Operation completed with one or more failed segments and the<br>first segment that failed is indicated in the Segment Number field<br>8h<br>Operation was aborted for unknown reason<br>9h<br>Operation was aborted due to a sanitize operation<br>Ah to Eh<br>Reserved<br>Fh<br>Entry is empty (i.e., does not contain a test result)|


|Value|Definition|
|---|---|
|0h|Operation completed without error|
|1h|Operation was aborted by a Device Self-test command|
|2h|Operation was aborted by a Controller Level Reset|
|3h|Operation was aborted due to a removal of a namespace from the<br>namespace inventory|
|4h|Operation was aborted due to the processing of a Format NVM<br>command|
|5h|A fatal error or unknown test error occurred while the controller<br>was executing the device self-test operation and the operation did<br>not complete|
|6h|Operation completed with a segment that failed and the segment<br>that failed is not known|
|7h|Operation completed with one or more failed segments and the<br>first segment that failed is indicated in the Segment Number field|
|8h|Operation was aborted for unknown reason|
|9h|Operation was aborted due to a sanitize operation|
|Ah to Eh|Reserved|
|Fh|Entry is empty (i.e., does not contain a test result)|







|Bytes|Description|
|---|---|
|00|**Device Self-test Status (DSTS):** This field indicates the device self-test code and the status of<br>that operation.<br>**Bits**<br>**Description**<br>7:4<br>**Self-test Code (DSTC):** This field indicates the Self-test Code value that was<br>specified in the Device Self-test command that started the device self-test operation<br>that this Self-test Result Data Structure describes.<br>**Value**<br>**Definition**<br>0h<br>Entry is empty<br>1h<br>Short device self-test operation<br>2h<br>Extended device self-test operation<br>3h<br>Host-Initiated Refresh operation<br>4h to Dh<br>Reserved<br>Eh<br>Vendor specific<br>Fh<br>Reserved<br>3:0<br>**Device Self-test Result (DSTR):**This field indicates the result of the device self-test<br>operation that this Self-test Result Data Structure describes.<br>**Value**<br>**Definition**<br>0h<br>Operation completed without error<br>1h<br>Operation was aborted by a Device Self-test command<br>2h<br>Operation was aborted by a Controller Level Reset<br>3h<br>Operation was aborted due to a removal of a namespace from the<br>namespace inventory<br>4h<br>Operation was aborted due to the processing of a Format NVM<br>command<br>5h<br>A fatal error or unknown test error occurred while the controller<br>was executing the device self-test operation and the operation did<br>not complete<br>6h<br>Operation completed with a segment that failed and the segment<br>that failed is not known<br>7h<br>Operation completed with one or more failed segments and the<br>first segment that failed is indicated in the Segment Number field<br>8h<br>Operation was aborted for unknown reason<br>9h<br>Operation was aborted due to a sanitize operation<br>Ah to Eh<br>Reserved<br>Fh<br>Entry is empty (i.e., does not contain a test result)|
|01|**Segment Number (SEGN):** This field indicates the segment number (refer to section 8.1.7)<br>where the first self-test failure occurred. If Device Self-test Status field bits [3:0] are not set to 7h,<br>then this field should be ignored by the host.|
|02|**Valid Diagnostic Information (VDINFO):** This field indicates the diagnostic failure information<br>that is reported.<br>**Bits**<br>**Description**<br>7:4<br>Reserved<br>3 <br>**SC Valid (SCVLD):**If this bit is set to ‘1’, then the contents of Status Code field are<br>valid. If this bit is cleared to ‘0’, then the contents of the Status Code field are invalid.<br>2 <br>**SCT Valid (SCTVLD):** If this bit is set to ‘1’, then the contents of the Status Code Type<br>field are valid. If this bit is cleared to ‘0’, then the contents of the Status Code Type<br>field are invalid. <br>1 <br>**FLBA Valid (FVLD):** If this bit is set to ‘1’, then the contents of the Failing LBA field<br>are valid. If this bit is cleared to ‘0’, then the contents of the Failing LBA field are invalid. <br>0 <br>**NSID Valid (NSIDVLD):** If this bit is set to ‘1’, then the contents of the Namespace<br>Identifier field are valid. If this bit is cleared to ‘0’, then the contents of the Namespace<br>Identifier field are invalid.|
|03|Reserved|


|Bits|Description|
|---|---|
|7:4|Reserved|
|3|**SC Valid (SCVLD):**If this bit is set to ‘1’, then the contents of Status Code field are<br>valid. If this bit is cleared to ‘0’, then the contents of the Status Code field are invalid.|
|2|**SCT Valid (SCTVLD):** If this bit is set to ‘1’, then the contents of the Status Code Type<br>field are valid. If this bit is cleared to ‘0’, then the contents of the Status Code Type<br>field are invalid.|
|1|**FLBA Valid (FVLD):** If this bit is set to ‘1’, then the contents of the Failing LBA field<br>are valid. If this bit is cleared to ‘0’, then the contents of the Failing LBA field are invalid.|
|0|**NSID Valid (NSIDVLD):** If this bit is set to ‘1’, then the contents of the Namespace<br>Identifier field are valid. If this bit is cleared to ‘0’, then the contents of the Namespace<br>Identifier field are invalid.|


215


NVM Express [®] Base Specification, Revision 2.2


**Figure 213: Self-test Result Data Structure**


















|Bits|Description|
|---|---|
|7:3|Reserved|
|2:0|**Additional Status Code Info (ASTCI):**This field may contain additional<br>information relating to errors or conditions that occurred during the device self-<br>test operation represented in the same format used in the Status Code Type field<br>of the completion queue entry (refer to Figure 101). The contents of this field are<br>valid only when the SCT Valid bit is set to ‘1’.|



|Bytes|Description|
|---|---|
|11:04|**Power On Hours (POH):** This field indicates the number of power-on hours at the time the<br>device self-test operation was completed or aborted. This does not include time that the controller<br>was powered and in a low power state condition.|
|15:12|**Namespace Identifier (NSID):** This field indicates the namespace that the Failing LBA occurred<br>on. The contents of this field are valid only when the NSID Valid bit is set to ‘1’.|
|23:16|**Failing LBA (FLBA):** This field is I/O Command Set specific and is described in the applicable<br>I/O Command Set specification.<br>NOTE: The original field name has been retained for historical continuity.|
|24|**Status Code Type (STCT):** This field may contain additional information related to errors or<br>conditions.<br>**Bits**<br>**Description**<br>7:3<br>Reserved<br>2:0<br>**Additional Status Code Info (ASTCI):**This field may contain additional<br>information relating to errors or conditions that occurred during the device self-<br>test operation represented in the same format used in the Status Code Type field<br>of the completion queue entry (refer to Figure 101). The contents of this field are<br>valid only when the SCT Valid bit is set to ‘1’.|
|25|**Status Code (STC):** This field may contain additional information relating to errors or conditions<br>that occurred during the device self-test operation represented in the same format used in the<br>Status Code field of the completion queue entry (refer to section 4.2.3). The contents of this field<br>are valid only when the SC Valid bit is set to ‘1’.|
|27:26|**Vendor Specific (VS):** This field is vendor specific.|


**5.1.12.1.8** **Telemetry Host-Initiated (Log Page Identifier 07h)**


This log page consists of a header (i.e., bytes 511:0 of the log page) describing the log and zero or more
Telemetry Data Blocks (refer to section 8.1.27). The header shall always be available even if there is no
Telemetry Host-Initiated Data available. All Telemetry Data Blocks are 512 bytes in size. The controller
shall initiate a capture of the internal controller state or internal NVM subsystem state to this log page if the
controller processes a Get Log Page command for this log with the Create Telemetry Host-Initiated Data
bit set to ‘1’ in the Log Specific Parameter field. If the host specifies a Log Page Offset Lower value that is
not a multiple of 512 bytes in the Get Log Page command for this log, then the controller shall abort the
command with a status code of Invalid Field in Command.


The Log Specific Parameter field in Command Dword 10 (refer to Figure 198) for this log page is defined
in Figure 214.


**Figure 214: Telemetry Host-Initiated Log Specific Parameter Field**





|Bits|Description|
|---|---|
|14:12|Reserved|
|11:09|**Maximum Created Data Area (MCDA):** If the MCDAS bit is set to ‘1’ in the LID Specific Parameter field<br>(refer to Figure 216) and the Create Telemetry Host-Initiated Data bit is set to ‘1’, then this field specifies<br>the data areas the host is requesting to be created in the log page. Data areas not requested shall not<br>be created.<br>**Values**<br>**Definition**<br>000b<br>The controller determines the data areas to be created in the log page.<br>001b<br>Data Area 1<br>010b<br>Data Area 1 through Data Area 2<br>011b<br>Data Area 1 through Data Area 3<br>100b<br>Data Area 1 through Data Area 4 <br>101b to 111b<br>Reserved<br>If the MCDAS bit is cleared to ‘0’ or the Create Telemetry Host-Initiated Data bit is cleared to ‘0’, then<br>this field shall be ignored by the controller.|


|Values|Definition|
|---|---|
|000b|The controller determines the data areas to be created in the log page.|
|001b|Data Area 1|
|010b|Data Area 1 through Data Area 2|
|011b|Data Area 1 through Data Area 3|
|100b|Data Area 1 through Data Area 4|
|101b to 111b|Reserved|


216


NVM Express [®] Base Specification, Revision 2.2


**Figure 214: Telemetry Host-Initiated Log Specific Parameter Field**






|Bits|Description|
|---|---|
|08|**Create Telemetry Host-Initiated Data (CTHID):** If this bit is set to ‘1’, then the controller shall capture<br>the Telemetry Host-Initiated Data representing the internal state of the controller at the time the<br>associated Get Log Page command is processed. If this bit is cleared to ‘0’, then the controller shall not<br>update the Telemetry Host-Initiated Data. The Host-Initiated Data shall not change until the controller<br>processes:<br>a)<br>a subsequent Telemetry Host-Initiated Log with this bit set to ‘1’;<br>b)<br>a Firmware Commit command; or<br>c)<br>a power on reset.|



The Telemetry Host-Initiated Data consists of:


a) Three areas, if the Data Area 4 Support (DA4S) bit is cleared to ‘0’ in the Log Page Attributes field:

Telemetry Host-Initiated Data Area 1, Telemetry Host-Initiated Data Area 2, and Telemetry HostInitiated Data Area 3; or
b) Four areas, if the DA4S bit is set to ‘1’ in the Log Page Attributes field: Telemetry Host-Initiated

Data Area 1, Telemetry Host-Initiated Data Area 2, Telemetry Host-Initiated Data Area 3 and
Telemetry Host-Initiated Data Area 4.


All areas start at Telemetry Host-Initiated Data Area Block 1. The last block of each area is indicated in
Telemetry Host-Initiated Data Area _y_ Last Block, respectively. The telemetry data captured and the size of
that data is implementation dependent.


The size of the log page is variable and:


  - If the DA4S bit is cleared to ‘0’ in the Log Page Attributes field, the size may be calculated using
the Telemetry Host-Initiated Data Area 3 Last Block field.

  - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is set to 1h in the Host Behavior Support feature (refer to section
5.1.25.1.14), then the size of the log page may be calculated using the Telemetry Host-Initiated
Data Area 4 Last Block field.

  - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is cleared to 0h in the Host Behavior Support feature (refer to section
5.1.25.1.14), then the size of the log page may be calculated using the Telemetry Host-Initiated
Data Area 3 Last Block field.


The controller shall return data for all blocks requested:


   - If the DA4S bit is cleared to ‘0’ in the Log Page Attributes field, then the data beyond the last block
in Telemetry Host-Initiated Data Area 3 Last Block is undefined.

   - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is set to 1h in the Host Behavior Support feature, then the data beyond
the last block in Telemetry Host-Initiated Data Area 4 Last Block is undefined.

   - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is cleared to 0h in the Host Behavior Support feature, then the data
beyond the last block in Telemetry Host-Initiated Data Area 3 Last Block is undefined.


If the host requests a data transfer that is not a multiple of 512 bytes, then the controller shall return an
error of Invalid Field in Command.


If the MCDAS bit (refer to Figure 216) is set to ‘1’ and a Get Log Page command with the Create Telemetry
Host-Initiated Data bit is set to ‘1’, then the maximum data area to be created in the Telemetry Host-Initiated
log page shall be less than or equal to the MCDA field in the Log Specific Parameter field in Command
Dword 10 (refer to Figure 214).


217


NVM Express [®] Base Specification, Revision 2.2


**Figure 215: Telemetry Host-Initiated Log Page**


















|Value|Scope|
|---|---|
|00h|Not reported|
|01h|Controller|
|02h|NVM subsystem|
|03h to FFh|Reserved|



|Bytes|Description|
|---|---|
|00|**Log Page Identifier (LID):** This field shall be set to 07h.|
|04:01|Reserved|
|07:05|**IEEE OUI Identifier (IEEE):**Contains the Organization Unique Identifier (OUI) for the<br>controller vendor that is able to interpret the data. If this field is cleared to 0h, then no IEEE<br>OUI Identifier is present. The OUI shall be a valid IEEE/RAC assigned identifier that is<br>registered at http://standards.ieee.org/develop/regauth/oui/public.html.|
|09:08|**Telemetry Host-Initiated Data Area 1 Last Block (THDA1LB):**Contains the value of the<br>last block of Telemetry Host-Initiated Data Area 1. If the Telemetry Host-Initiated Data Area<br>1 does not contain data, then this field shall be cleared to 0h.<br>If this field is not 0h, then Telemetry Host-Initiated Data Area 1 begins at block 1h and ends<br>at the block indicated in this field.|
|11:10|**Telemetry Host-Initiated Data Area 2 Last Block (THDA2LB):**Contains the value of the<br>last block of Telemetry Host-Initiated Data Area 2. This value shall be greater than or equal<br>to the value in the Telemetry Host-Initiated Data Area 1 Last Block field.<br>If this field is not 0h, then Telemetry Host-Initiated Data Area 2 begins at block 1h and ends<br>at the block indicated in this field.|
|13:12|**Telemetry Host-Initiated Data Area 3 Last Block (THDA3LB):**Contains the value of the<br>last block of Telemetry Host-Initiated Data Area 3. This value shall be greater than or equal<br>to the value in the Telemetry Host-Initiated Data Area 2 Last Block field.<br>If this field is not 0h, then Telemetry Host-Initiated Data Area 3 begins at block 1h and ends<br>at the block contained in this field.|
|15:14|Reserved|
|19:16|**Telemetry Host-Initiated Data Area 4 Last Block (THDA4LB):**Contains the value of the<br>last block of Telemetry Host-Initiated Data Area 4. If the Data Area 4 Support (DA4S) bit is<br>set to ‘1’ in the Log Page Attributes field, then this value shall be greater than or equal to the<br>value in the Telemetry Host-Initiated Data Area 3 Last Block field.<br>If this field is not 0h, then Telemetry Host-Initiated Data Area 4 begins at block 1h and ends<br>at the block contained in this field.|
|379:20|Reserved|
|380|**Telemetry Host-Initiated Scope (THS):** This field shall indicate the scope of the Telemetry<br>Host-Initiated log page. Implementations compliant with versions of this specification later<br>than 2.0 shall not set this field to a value of 0h.<br> <br>**Value** <br>**Scope** <br>00h<br>Not reported<br>01h<br>Controller<br>02h<br>NVM subsystem<br>03h to FFh<br>Reserved|
|381|**Telemetry Host-Initiated Data Generation Number (THDGN):** Contains a value that is<br>incremented each time the internal controller state or internal NVM subsystem state for this<br>log page is captured. If the value of this field is FFh, then the field shall be cleared to 0h when<br>incremented (i.e., rolls over to 0h).|
|382|**Telemetry Controller-Initiated Data Available (TCDA):** Contains the value of Telemetry<br>Controller-Initiated Data Available field in the Telemetry Controller-Initiated log (refer to<br>Figure 217).|
|383|**Telemetry Controller-Initiated Data Generation Number (TCDGN):** Contains the value of<br>the Telemetry Controller-Initiated Data Generation Number field in the Telemetry Controller-<br>Initiated log (refer to Figure 217).|
|511:384|**Reason Identifier (RID):** Contains a vendor specific identifier that describes the operating<br>conditions of the controller at the time of capture. The Reason Identifier field should provide<br>an identification of unique operating conditions of the controller.|
|1023:512|**Telemetry Host-Initiated Data Block 1 (THDB1):** Contains Telemetry Data Block 1 for the<br>Telemetry Host-Initiated Log.|
|1535:1024|**Telemetry Host-Initiated Data Block 2 (THDB2):**Contains Telemetry Data Block 2 for the<br>Telemetry Host-Initiated Log.|


218


NVM Express [®] Base Specification, Revision 2.2


**Figure 215: Telemetry Host-Initiated Log Page**

|Bytes|Description|
|---|---|
|…|…|
|(_n_*512)+511:(_n_*512)|**Telemetry Host-Initiated Data Block****_n _(THDBN):**Contains Telemetry Data Block_n_ for the<br>Telemetry Host-Initiated Log.|



**Telemetry Host-Initiated LID Specific Parameter Field**


Figure 216 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.1.12.1.1) for the Telemetry Host-Initiated log page.


**Figure 216: Telemetry Host-Initiated Log Page - LID Specific Parameter Field**






|Bits|Description|
|---|---|
|15:1|Reserved|
|0|**Maximum Created Data Area Support (MCDAS):**If this bit is set to ‘1’, then the controller supports the<br>Maximum Created Data Area field in Log Specific Parameter field for a Telemetry Host-Initiated log page. If<br>this bit is cleared to ‘0’, then the controller does not support the Maximum Created Data Area field in Log<br>Specific Parameter field for a Telemetry Host-Initiated log page.|



**5.1.12.1.9** **Telemetry Controller-Initiated (Log Page Identifier 08h)**


This log page consists of a header (i.e., bytes 511:0 of the log page) describing the log and zero or more
Telemetry Data Blocks (refer to section 8.1.27). The header shall always be available even if there is no
Telemetry Controller-Initiated Data available. All Telemetry Data Blocks are 512 bytes in size. This log is a
controller-initiated capture of the controller’s internal state or NVM subsystem’s internal state. The
Telemetry Controller-Initiated Data for Data Area 1 through Data Area 3 shall persist across all resets. The
Telemetry Controller-Initiated Data for Data Area 4 may persist across Controller Level Resets. If the host
specifies a Log Page Offset Lower value that is not a multiple of 512 bytes in the Get Log Page command
for this log, then the controller shall return an error of Invalid Field in Command.


The Telemetry Controller-Initiated Data consists of:


a) three areas, if the Data Area 4 Support (DA4S) bit is cleared to ‘0’ in the Log Page Attributes field:

Telemetry Controller-Initiated Data Area 1, Telemetry Controller-Initiated Data Area 2, and
Telemetry Controller-Initiated Data Area 3; or
b) four areas, if the DA4S bit is set to ‘1’ in the Log Page Attributes field: Telemetry Controller-Initiated

Data Area 1, Telemetry Controller-Initiated Data Area 2, Telemetry Controller-Initiated Data Area 3
and Telemetry Controller-Initiated Data Area 4.


All areas start at Telemetry Controller-Initiated Data Area Block 1. The last block of each area is indicated
in the Telemetry Controller-Initiated Data Area y Last Block, respectively. The telemetry data captured and
its size is implementation dependent.


The size of the log page is variable and:


   - If the DA4S bit is cleared to ‘0’ in the Log Page Attributes field, the size may be calculated using
the Telemetry Controller-Initiated Data Area 3 Last Block field.

   - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is set to 1h in the Host Behavior Support feature (refer to section
5.1.25.1.14), then the size of the log page may be calculated using the Telemetry ControllerInitiated Data Area 4 Last Block field.

   - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is cleared to 0h in the Host Behavior Support feature (refer to section
5.1.25.1.14), then the size of the log page may be calculated using the Telemetry ControllerInitiated Data Area 3 Last Block field.


219


NVM Express [®] Base Specification, Revision 2.2


The controller shall return data for all blocks requested:


   - If the DA4S bit is cleared to ‘0’ in the Log Page Attributes field, then the data beyond the last block
in Telemetry Controller-Initiated Data Area 3 Last Block is undefined.

   - If the DA4S bit is set to ‘1’ in the Log Page Attributes field, then the data beyond the last block in
Telemetry Controller-Initiated Data Area 4 Last Block is undefined.

   - If the DA4S bit is set to ‘1’ in the Log Page Attributes field and the Extended Telemetry Data Area
4 Supported (ETDAS) field is cleared to 0h in the Host Behavior Support feature, then the data
beyond the last block in Telemetry Controller-Initiated Data Area 3 Last Block is undefined.


If the host requests a data transfer that is not a multiple of 512 bytes, then the controller shall abort the
command with the status code of Invalid Field in Command.


**Figure 217: Telemetry Controller-Initiated Log Page**

















|Bytes|Description|
|---|---|
|00|**Log Page Identifier (LID):** This field shall be set to 08h.|
|04:01|Reserved|
|07:05|**IEEE OUI Identifier (IEEE):**Contains the Organization Unique Identifier (OUI) for the<br>controller vendor that is able to interpret the data. If this field is cleared to 0h, then no IEEE<br>OUI Identifier is present. The OUI shall be a valid IEEE/RAC assigned identifier that is<br>registered at http://standards.ieee.org/develop/regauth/oui/public.html.|
|09:08|**Telemetry Controller-Initiated Data Area 1 Last Block (TCDA1LB):**Contains the value<br>of the last block of Telemetry Controller-Initiated Data Area 1. If the Telemetry Controller-<br>Initiated Data Area 1 does not contain data, then this field shall be cleared to 0h.<br>If this field is not 0h, then Telemetry Controller-Initiated Data Area 1 begins at block 1 and<br>ends at the block indicated in this field.|
|11:10|**Telemetry Controller-Initiated Data Area 2 Last Block (TCDA2LB):**Contains the value<br>of the last block of Telemetry Controller-Initiated Data Area 2. This value shall be greater<br>than or equal to the value in the Telemetry Controller-Initiated Data Area 1 Last Block field.<br>If this field is not 0h, then Telemetry Controller-Initiated Data Area 2 begins at block 1h and<br>ends at the block indicated in this field.|
|13:12|**Telemetry Controller-Initiated Data Area 3 Last Block (TCDA3LB):**Contains the value<br>of the last block of Telemetry Controller-Initiated Data Area 3. This value shall be greater<br>than or equal to the value in the Telemetry Controller-Initiated Data Area 2 Last Block field.<br>If this field is not 0h, then Telemetry Controller-Initiated Data Area 3 begins at block 1h and<br>ends at the block indicated in this field.|
|15:14|Reserved|
|19:16|**Telemetry Controller-Initiated Data Area 4 Last Block (TCDA4LB):**Contains the value<br>of the last block of Telemetry Controller-Initiated Data Area 4. If the DA4S bit is set to ‘1’ in<br>the Log Page Attributes field, then this value shall be greater than or equal to the value in<br>the Telemetry Controller-Initiated Data Area 3 Last Block field.<br>If this field is not 0h, then Telemetry Controller-Initiated Data Area 4 begins at block 1h and<br>ends at the block contained in this field.|
|380:20|Reserved|
|381|**Telemetry Controller-Initiated Scope (TCS):** This field shall indicate the scope of the<br>Telemetry Controller-Initiated log page. Implementations compliant with versions of this<br>specification later than 2.0 shall not set this field to a value of 0h.<br> <br>**Value**<br>**Scope**<br>00h<br>Not reported<br>01h<br>Controller<br>02h<br>NVM subsystem<br>03h to FFh<br>Reserved|


|Value|Scope|
|---|---|
|00h|Not reported|
|01h|Controller|
|02h|NVM subsystem|
|03h to FFh|Reserved|


220


NVM Express [®] Base Specification, Revision 2.2


**Figure 217: Telemetry Controller-Initiated Log Page**







|Bytes|Description|
|---|---|
|382|**Telemetry Controller-Initiated Data Available (TCDA):** If this field is cleared to 0h, then<br>the log page consists of only the 512-byte header and does not contain saved internal<br>controller state or saved internal NVM subsystem state available to be reported in response<br>to a Get Log Page command issued to the Admin Submission Queue.<br>If this field is set to 1h, then the log page contains saved internal controller state or saved<br>internal NVM subsystem state to be reported in response to a Get Log Page command<br>issued to the Admin Submission Queue. If this field is set to 1h, then it shall not be cleared<br>to 0h until a Get Log Page command with Retain Asynchronous Event bit cleared to ‘0’ for<br>the Telemetry Controller-Initiated log page completes successfully. This value is persistent<br>across power states and reset.<br>Regardless of the value of this field, the log page may contain saved internal controller state<br>or saved internal NVM subsystem state available to be reported in response to a Get Log<br>Page command issued out-of-band to a Management Endpoint (refer to the NVM Express<br>Management Interface Specification).<br>Other values are reserved.|
|383|**Telemetry Controller-Initiated Data Generation Number (TCDGN):** Contains a value<br>that is incremented each time the internal controller state or the NVM subsystem state for<br>this log page is captured. If the value of this field is FFh, then the field shall be cleared to<br>0h when incremented (i.e., rolls over to 0h). This field is persistent across power cycles.|
|511:384|**Reason Identifier (RID):** Contains a vendor specific identifier that describes the operating<br>conditions of the controller at the time of capture. The Controller-Initiated Reason Identifier<br>field should provide an identification of unique operating conditions of the controller.|
|1023:512|**Telemetry Controller-Initiated Data Block 1 (TCDB1):** Contains Telemetry Data Block 1<br>for the Telemetry Controller -Initiated Log captured at a vendor specific time.|
|1535:1024|**Telemetry Controller-Initiated Data Block 2 (TCDB2):**Contains Telemetry Data Block 2<br>for the Telemetry Controller -Initiated Log captured at a vendor specific time.|
|…|…|
|(_n_*512)+511:(_n_*512)|**Telemetry Controller-Initiated Data Block****_n_ (TCDBN):**Contains Telemetry Data Block_n_ <br>for the Telemetry Controller-Initiated log captured at a vendor specific time.|


**5.1.12.1.10** **Endurance Group Information (Log Page Identifier 09h)**


This log page is used to provide endurance information based on the Endurance Group (refer to section
3.2.3). An Endurance Group contains capacity that may be allocated to zero or more NVM Sets. Capacity
that has not been allocated to an NVM Set is unallocated Endurance Group capacity. The information
provided is over the life of the Endurance Group. The Endurance Group Identifier is specified in the Log
Specific Identifier field in Command Dword 11 of the Get Log Page command as defined in Figure 218. The
log page is 512 bytes in size.


**Figure 218: Endurance Group Identifier - Log Specific Identifier**

|Bits|Description|
|---|---|
|15:00|**Endurance Group Identifier (ENDGID)**: This field specifies the identifier for the Endurance<br>Group (refer to section 3.2.3) used for this log page.|



221


NVM Express [®] Base Specification, Revision 2.2


**Figure 219: Endurance Group Information Log Page**












|Bits|Description|
|---|---|
|7:4|Reserved|
|3|**Endurance Group Read-Only (EGRO):**If this bit is set to ‘1’, then all namespaces in<br>the Endurance Group have been placed in read only mode for reasons other than a<br>change in the write protect state of the namespace. The controller shall not set this bit<br>to '1' if the read-only condition on the Endurance Group is a result of a change in the<br>write protection state of all namespaces in the Endurance Group.|
|2|**Endurance Group Degraded Reliability (EGDR):**If this bit is set to ‘1’, then the<br>Endurance Group reliability has been degraded due to significant media related errors<br>or any internal error that degrades NVM subsystem reliability.|
|1|Reserved|
|0|**Endurance Group Available Spare Below (EGASB):**If this bit is set to ‘1’, then the<br>available spare capacity of the Endurance Group has fallen below the threshold.|






|Bits|Description|
|---|---|
|7:1|Reserved|
|0|**Endurance Group Media (EGRMEDIA):** If this bit is set to ‘1’, then the Endurance<br>Group stores data on rotational media (refer to section 8.1.23). If this bit is cleared to<br>‘0’, then the Endurance Group does not store data on rotational media.|











|Bytes|Description|
|---|---|
|00|**Endurance Group Critical Warning (EGCW):** This field indicates critical warnings for the state of<br>the Endurance Group. Each bit corresponds to a critical warning type; multiple bits may be set to ‘1’.<br>If a bit is cleared to ‘0’, then that critical warning does not apply. Critical warnings may result in an<br>asynchronous event notification to the host. Bits in this field represent the state at the time the Get<br>Log Page command is processed and may not reflect the state at the time a related asynchronous<br>event notification, if any, occurs or occurred.<br>If a bit is set to ‘1’ in all Endurance Groups in the NVM subsystem, then the corresponding bit shall<br>be set to ‘1’ in the Critical Warning field of the SMART / Health Information log page (refer to Figure<br>207).<br>**Bits**<br>**Description**<br>7:4<br>Reserved<br>3 <br>**Endurance Group Read-Only (EGRO):**If this bit is set to ‘1’, then all namespaces in<br>the Endurance Group have been placed in read only mode for reasons other than a<br>change in the write protect state of the namespace. The controller shall not set this bit<br>to '1' if the read-only condition on the Endurance Group is a result of a change in the<br>write protection state of all namespaces in the Endurance Group.<br>2 <br>**Endurance Group Degraded Reliability (EGDR):**If this bit is set to ‘1’, then the<br>Endurance Group reliability has been degraded due to significant media related errors<br>or any internal error that degrades NVM subsystem reliability.<br>1 <br>Reserved<br>0 <br>**Endurance Group Available Spare Below (EGASB):**If this bit is set to ‘1’, then the<br>available spare capacity of the Endurance Group has fallen below the threshold.|
|01|**Endurance Group Features (EGFEAT):** This field defines features of the Endurance Group.<br>**Bits**<br>**Description**<br>7:1<br>Reserved<br>0 <br>**Endurance Group Media (EGRMEDIA):** If this bit is set to ‘1’, then the Endurance<br>Group stores data on rotational media (refer to section 8.1.23). If this bit is cleared to<br>‘0’, then the Endurance Group does not store data on rotational media.|
|02|Reserved|
|03|**Available Spare (AVSP):** Contains a normalized percentage (0% to 100%) of the remaining spare<br>capacity available for the Endurance Group.|
|04|**Available Spare Threshold (AVSPT):** If the Available Spare falls below the threshold indicated in<br>this field, an asynchronous event completion may occur. The value is indicated as a normalized<br>percentage (0% to 100%). The values 101 to 255 are reserved.|
|05|**Percentage Used (PUSED):** Contains a vendor specific estimate of the percentage of life used for<br>the Endurance Group based on the actual usage and the manufacturer’s prediction of NVM life. A<br>value of 100 indicates that the estimated endurance of the NVM in the Endurance Group has been<br>consumed, but may not indicate an NVM failure. The value is allowed to exceed 100. Percentages<br>greater than 254 shall be represented as 255. This value shall be updated once per power-on hour<br>when the controller is not in a sleep state.<br>Refer to the JEDEC JESD218B-02 standard for SSD device life and endurance measurement<br>techniques.|
|07:06|**Domain Identifier (DID):**This field indicates the identifier of the domain that contains this Endurance<br>Group. If the NVM subsystem supports multiple domains, this field shall be set to a non-zero value.<br>If this field is cleared to 0h, then the NVM subsystem does not support multiple domains.|
|31:08|Reserved|
|47:32|**Endurance Estimate (EE):** This field is an estimate of the total number of data bytes that may be<br>written to the Endurance Group over the lifetime of the Endurance Group assuming a write<br>amplification of 1 (i.e., no increase in the number of write operations performed by the device beyond<br>the number of write operations requested by a host). This value is reported in billions (i.e., a value of<br>1 corresponds to 1,000,000,000 bytes written) and is rounded up (e.g., one indicates the number of<br>bytes written is from 1 to 1,000,000,000, three indicates the number of bytes written is from<br>2,000,000,001 to 3,000,000,000).<br>A value of 0h indicates that the controller does not report an Endurance Estimate.|


222


NVM Express [®] Base Specification, Revision 2.2


**Figure 219: Endurance Group Information Log Page**













|Bytes|Description|
|---|---|
|63:48|**Data Units Read (DUR):** Contains the total number of data bytes that have been read from the<br>Endurance Group. This value does not include controller reads due to internal operations such as<br>garbage collection. This value is reported in billions (i.e., a value of 1 corresponds to 1,000,000,000<br>bytes read) and is rounded up (e.g., one indicates the number of bytes read is from 1 to<br>1,000,000,000, three indicates the number of bytes read is from 2,000,000,001 to 3,000,000,000).<br>A value of 0h indicates that the controller does not report the number of Data Units Read.|
|79:64|**Data Units Written (DUW):** Contains the total number of data bytes that have been written to the<br>Endurance Group. This value does not include controller writes due to internal operations such as<br>garbage collection. This value is reported in billions (i.e., a value of 1 corresponds to 1,000,000,000<br>bytes written) and is rounded up (e.g., one indicates the number of bytes written is from 1 to<br>1,000,000,000, three indicates the number of bytes written is from 2,000,000,001 to 3,000,000,000).<br>A value of 0h indicates that the controller does not report the number of Data Units Written.|
|95:80|**Media Units Written (MUW):** Contains the total number of data bytes that have been written to the<br>Endurance Group including both host and controller writes (e.g., garbage collection). This value is<br>reported in billions (i.e., a value of 1 corresponds to 1,000,000,000 bytes written) and is rounded up<br>(e.g., one indicates the number of bytes written is from 1 to 1,000,000,000, three indicates the<br>number of bytes written is from 2,000,000,001 to 3,000,000,000).<br>A value of 0h indicates that controller does not report the number of Media Units Written.|
|111:96|**Host Read Commands (HRC):** Contains the number of Endurance Group Host Read Commands<br>completed by the controller.<br>Refer to the specific I/O Command Set specification for the list of Endurance Group Host Read<br>Commands that affect this field.|
|127:112|**Host Write Commands (HWC):** Contains the number of User Data Out Commands completed by<br>the controller.<br>Refer to the specific I/O Command Set specification for the list of User Data Out Commands that<br>affect this field.|
|143:128|**Media and Data Integrity Errors (MDIE):** Contains the number of occurrences where the controller<br>detected an unrecovered data integrity error for the Endurance Group. Errors such as uncorrectable<br>ECC, CRC checksum failure, or LBA tag mismatch are included in this field.|
|159:144|**Number of Error Information Log Entries (NEILE):** Contains the number of Error Information Log<br>Entries over the life of the controller for the Endurance Group.|
|175:160|**Total Endurance Group Capacity (TEGCAP):** This field indicates the total NVM capacity in this<br>Endurance Group. The value is in bytes. If this field is cleared to 0h, then the NVM subsystem does<br>not report the total NVM capacity in this Endurance Group.|
|191:176|**Unallocated Endurance Group Capacity (UEGCAP):** This field indicates the unallocated NVM<br>capacity in this Endurance Group. The value is in bytes. If this field is cleared to 0h, then the NVM<br>subsystem does not report the unallocated NVM capacity in this Endurance Group.|
|511:192|Reserved|


**5.1.12.1.11** **Predictable Latency Per NVM Set (Log Page Identifier 0Ah)**


This log page may be used to determine the current window for the specified NVM Set when Predictable
Latency Mode is enabled and any events that have occurred for the specified NVM Set. There is one log
page for each NVM Set when Predictable Latency Mode is supported. The NVM Set for which the log page
is to be returned is specified in the Log Specific Identifier field in Command Dword 11 of the Get Log Page
command as defined in Figure 220. The log page is 512 bytes in size.


**Figure 220: NVM Set Identifier – Log Specific Identifier**

|Bits|Description|
|---|---|
|15:00|**NVM Set Identifier (NVMSETID)**: This field specifies the identifier for the NVM Set (refer to section<br>3.2.2) used for this log page.|



223


NVM Express [®] Base Specification, Revision 2.2


The log page indicates typical values and reliable estimates for attributes associated with the Deterministic
Window and the Non-Deterministic Window of the specified NVM Set. The Typical, Maximum, and Minimum
values are static and worst-case values over the lifetime of the NVM subsystem.


After the controller successfully completes a read of this log page with Retain Asynchronous Event bit
cleared to ‘0’, then reported events are cleared to ‘0’ for the specified NVM Set and the field corresponding
to the specified NVM Set is cleared to ‘0’ in the Predictable Latency Event Aggregate log page. Coordination between two or more hosts is beyond the scope of this specification.


**Figure 221: Predictable Latency Per NVM Set Log Page**








|Bits|Description|
|---|---|
|7:3|Reserved|
|2:0|**Predictable Latency Mode Window (PLMW):**This field indicates the window for<br>the NVM Set when Predictable Latency Mode is enabled.<br>**Value**<br>**Definition**<br>000b<br>Not used (Predictable Latency Mode not enabled)<br>001b<br>Deterministic Window (DTWIN)<br>010b<br>Non-Deterministic Window (NDWIN)<br>011b to 111b<br>Reserved|


|Value|Definition|
|---|---|
|000b|Not used (Predictable Latency Mode not enabled)|
|001b|Deterministic Window (DTWIN)|
|010b|Non-Deterministic Window (NDWIN)|
|011b to 111b|Reserved|








|Bits|Description|
|---|---|
|15|**Deterministic Excursion Autonomous Transition (DEAT):** Autonomous transition<br>from DTWIN to NDWIN due to Deterministic Excursion|
|14|**Max Value Exceeded Autonomous Transition (MVEAT):** Autonomous transition<br>from DTWIN to NDWIN due to typical or maximum value exceeded|
|13:03|Reserved|
|02|**DTWIN Time Warning (DTTW)**|
|01|**DTWIN Writes Warning (DTWW)**|
|00|**DTWIN Reads Warning (DTRW)**|











|Bytes|Description|
|---|---|
|00|**Status (STSNVMS):** This field indicates the status of the specified NVM Set.<br>**Bits**<br>**Description**<br>7:3<br>Reserved<br>2:0<br>**Predictable Latency Mode Window (PLMW):**This field indicates the window for<br>the NVM Set when Predictable Latency Mode is enabled.<br>**Value**<br>**Definition**<br>000b<br>Not used (Predictable Latency Mode not enabled)<br>001b<br>Deterministic Window (DTWIN)<br>010b<br>Non-Deterministic Window (NDWIN)<br>011b to 111b<br>Reserved|
|01|Reserved|
|03:02|**Event Type (ETYP):** This field specifies the event(s) that occurred for the NVM Set indicated.<br>Multiple bits may be set to ‘1’. All bits are cleared to ‘0’ after the log page is read with Retain<br>Asynchronous Event bit cleared to ‘0’.<br>**Bits**<br>**Description**<br>15<br>**Deterministic Excursion Autonomous Transition (DEAT):** Autonomous transition<br>from DTWIN to NDWIN due to Deterministic Excursion<br>14<br>**Max Value Exceeded Autonomous Transition (MVEAT):** Autonomous transition<br>from DTWIN to NDWIN due to typical or maximum value exceeded<br>13:03<br>Reserved<br>02<br>**DTWIN Time Warning (DTTW)**<br>01<br>**DTWIN Writes Warning (DTWW)**<br>00<br>**DTWIN Reads Warning (DTRW)**|
|31:04|Reserved|
|**Typical, Maximum, and Minimum Values**|**Typical, Maximum, and Minimum Values**|
|39:32|**DTWIN Reads Typical (DTWRT):** Indicates the typical number of 4 KiB random reads that may<br>be performed in the Deterministic Window. Refer to section 8.1.18.|
|47:40|**DTWIN Writes Typical (DTWWT):** Indicates the typical number of writes in units of the Optimal<br>Write Size that may be performed in the Deterministic Window. Refer to section 8.1.18.|
|55:48|**DTWIN Time Maximum (DTWTM):** Indicates the maximum time in milliseconds that the NVM<br>Set is able to remain in a Deterministic Window before entering a Non-Deterministic Window.<br>Refer to section 8.1.18.|
|63:56|**NDWIN Time Minimum High (NTWTMH):** Indicates the minimum time in milliseconds that the<br>NVM Set needs to remain in the Non-Deterministic Window before entering a Deterministic<br>Window. This is the time necessary to prepare for remaining in the Deterministic Window for<br>DTWIN Time Maximum. Refer to section 8.1.18.|
|71:64|**NDWIN Time Minimum Low (NTWTML):** Indicates the minimum time in milliseconds that the<br>NVM Set needs to remain in the Non-Deterministic Window before entering a Deterministic<br>Window. This is regardless of the amount of time spent in the previous Deterministic Window.<br>Refer to section 8.1.18.|
|127:72|Reserved|
|**Reliable Estimates**|**Reliable Estimates**|
|135:128|**DTWIN Reads Estimate (DTWRE):** Indicates a reliable estimate of the number of 4 KiB random<br>reads remaining in the current Deterministic Window, if applicable. This value decrements from<br>DTWIN Reads Typical to 0h based on host read activity and operating conditions. Refer to section<br>8.1.18.1.|


224


NVM Express [®] Base Specification, Revision 2.2


**Figure 221: Predictable Latency Per NVM Set Log Page**







|Bytes|Description|
|---|---|
|143:136|**DTWIN Writes Estimate (DTWWE):** Indicates a reliable estimate of the number of writes in units<br>of the Optimal Write Size remaining in the current Deterministic Window, if applicable. This value<br>decrements from DTWIN Writes Typical to 0h based on host write activity and operating<br>conditions. Refer to section 8.1.18.1.|
|151:144|**DTWIN Time Estimate (DTWTE):** Indicates a reliable estimate of the time in milliseconds<br>remaining in the current Deterministic Window, if applicable. Refer to section 8.1.18.1.|
|511:152|Reserved|


**5.1.12.1.12** **Predictable Latency Event Aggregate (Log Page Identifier 0Bh)**


This log page indicates if a Predictable Latency Event (refer to section 8.1.18) has occurred for a particular
NVM Set. If a Predictable Latency Event has occurred, the details of the particular event are included in the
Predictable Latency Per NVM Set log page for that NVM Set. An asynchronous event is generated when
an entry for an NVM Set is newly added to this log page.


This log page shall not contain an entry (i.e., an NVM Set Identifier) that is cleared to 0h.


If there is an enabled Predictable Latency Event pending for an NVM Set, then the Predictable Latency
Event Aggregate log page includes an entry for that NVM Set. The log page is an ordered list by NVM Set
Identifier. For example, if Predictable Latency Events are pending for NVM Set 27, 13, and 17, then the log
page shall have entries in numerical order of 13, 17, and 27. A particular NVM Set is removed from this log
page after the Get Log Page command with the Retain Asynchronous Event bit cleared to ‘0’ for the
Predictable Latency Per NVM Set log page for that NVM Set is completed successfully.


The log page size is limited by the NVM Set Identifier Maximum value reported in the Identify Controller
data structure (refer to Figure 313). If the host reads beyond the end of the log page, zeroes are returned.
The log page is defined in Figure 222.


**Figure 222: Predictable Latency Event Aggregate Log Page**














|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Number of Entries (NUMENT):** This field indicates the number of entries in the list. The<br>maximum number of entries in the list corresponds to the NVM Set Identifier Maximum field<br>reported in the Identify Controller data structure. A value of 0h indicates there are no entries<br>in the list.|
|**NVM Set Identifier List**|**NVM Set Identifier List**|
|09:08|**Entry 1:** Indicates the NVM Set that has a Predictable Latency Event pending that has the<br>numerically smallest NVM Set Identifier, if any.|
|11:10|**Entry 2:** Indicates the NVM Set that has a Predictable Latency Event pending that has the<br>second numerically smallest NVM Set Identifier, if any.|
|…|…|
|(NUMENT*2) + 9:<br>(NEMENT*2) + 8|**Entry NUMENT:** Indicates the NVM Set that has a Predictable Latency Event pending that<br>has the numerically largest NVM Set Identifier, if any.|



**5.1.12.1.13** **Asymmetric Namespace Access (Log Page Identifier 0Ch)**


This log page consists of a header describing the log and descriptors containing the asymmetric namespace
access information for ANA Groups (refer to section 8.1.1.2) that contain namespaces that are attached to
the controller processing the command. If ANA Reporting (refer to section 8.1.1) is supported, this log page
is supported. ANA Group Descriptors shall be returned in ascending ANA Group Identifier order.


225


NVM Express [®] Base Specification, Revision 2.2


If the Index Offset Supported bit is cleared to ‘0’ in the LID Support and Effects data structure for this log
page (refer to Figure 205), then:


  - if the RGO bit is cleared to ‘0’ in Command Dword 10, then the LPOL field in Command Dword 12
and the LPOU field in Command Dword 13 of the Get Log Page command should be cleared to
0h.


If the Index Offset Supported bit is set to ‘1’ in the LID Supported and Effects data structure for this log page
(refer to Figure 205) and the OT bit is set to ‘1’, then an index value specified in the Log Page Offset Lower
(LPOL) field (refer to Figure 200) and the Log Page Offset Upper (LPOU) field (refer to Figure 201) in the
Get Log Page command shall be used to index to the header or an ANA Group Descriptor within the list of
ANA Group Descriptors as shown in Figure 224 (e.g., specifying an index offset of 0 returns this log page
starting at byte offset 0h, specifying an index offset of 1 returns this log page starting at the offset of ANA
Group Descriptor 0, specifying an index offset of 2 returns this log page starting at the offset of ANA Group
Descriptor 1, etc.). Due to the complexity of using a byte offset with a variable sized ANA Group Descriptor,
the host should use an index offset by setting the OT bit to ‘1’ in Command Dword 14 of the Get Log Page
command.


If the host performs multiple Get Log Page commands to read the ANA log page (e.g., using the LPOL field
or the LPOU field), the host should re-read the header of the log page and ensure that the Change Count
field in the Asymmetric Namespace Access log matches the original value read. If it does not match, then
the data captured is not consistent and the ANA log page should be re-read.


The Log Specific Parameter field in Command Dword 10 (refer to Figure 198) for this log page is defined
in Figure 223.


**Figure 223: Asymmetric Namespace Access Log Specific Parameter Field**





|Bits|Description|
|---|---|
|14:09|Reserved|
|08|**Return Groups Only (RGO):** If this bit is set to ‘1’, then the controller shall return ANA Group<br>Descriptors with the Number of NSID Values field in each ANA Group Descriptor cleared to 0h (i.e.,<br>no Namespace Identifiers are returned). If this bit is cleared to ‘0’, then the controller shall return<br>ANA Group Descriptors that contain the Namespace Identifiers of attached namespaces that are<br>members of the ANA Group described by that ANA Group Descriptor and the Number of NSID<br>Values field set to the number of Namespace Identifier values in that ANA Group Descriptor.|


**Figure 224: Asymmetric Namespace Access Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Change Count (CHGC):** This field contains a 64-bit incrementing Asymmetric Namespace Access<br>log change count, indicating an identifier for this set of asymmetric namespace access information.<br>The count starts at 0h following a Controller Level Reset and is incremented each time the contents<br>of the log page change (e.g., not only if an Asymmetric Namespace Access Change Asynchronous<br>Event Notification is generated). If the value of this field is FFFFFFFF_FFFFFFFFh, then the field<br>shall be cleared to 0h when incremented (i.e., rolls over to 0h).|
|09:08|**Number of ANA Group Descriptors (NAGD):** This field indicates the number of ANA Group<br>Descriptors available in the log page. The log page shall contain one ANA Group Descriptor for each<br>ANA Group that contains namespaces that are attached to the controller.<br>If, for an ANA Group, there are no namespaces attached to the controller processing the command,<br>then no ANA Group Descriptor is returned for that ANA Group (i.e., an ANA Group Descriptor is<br>returned only if that ANA Group contains namespaces that are attached to the controller processing<br>the command).<br>If no namespaces are attached to the controller, then the log page does not contain any ANA Group<br>Descriptors and this field is cleared to 0h.|
|15:10|Reserved|
|**List of ANA Group Descriptors**|**List of ANA Group Descriptors**|
|n:16|**ANA Group Descriptor 0:** This if the first ANA Group Descriptor (refer to Figure 225), if any.|


226


NVM Express [®] Base Specification, Revision 2.2


**Figure 224: Asymmetric Namespace Access Log Page**

|Bytes|Description|
|---|---|
|m:n+1|**ANA Group Descriptor 1:** This if the second ANA Group Descriptor (refer to Figure 225), if any.|
|…|…|
|x:y|**ANA Group Descriptor NAGD-1:** This if the last ANA Group Descriptor (refer to Figure 225), if any.|



The format of the ANA Group Descriptor is defined in Figure 225. Namespace Identifiers shall be listed in
ascending NSID order.


**Figure 225: ANA Group Descriptor format**










|Bits|Description|
|---|---|
|07:04|Reserved|
|03:00|**Asymmetric Namespace Access State (ANAS):** This field indicates the<br>Asymmetric Namespace Access state for all namespaces in this ANA<br>Group when accessed through this controller.<br>**Value**<br>**Asymmetric Namespace Access State**<br>**Reference**<br>01h<br>ANA Optimized state<br>8.1.1.4<br>02h<br>ANA Non-Optimized state<br>8.1.1.5<br>03h<br>ANA Inaccessible state<br>8.1.1.6<br>04h<br>ANA Persistent Loss state<br>8.1.1.7<br>0Fh<br>ANA Change state<br>8.1.1.8<br>All other<br>values<br>Reserved|


|Value|Asymmetric Namespace Access State|Reference|
|---|---|---|
|01h|ANA Optimized state|8.1.1.4|
|02h|ANA Non-Optimized state|8.1.1.5|
|03h|ANA Inaccessible state|8.1.1.6|
|04h|ANA Persistent Loss state|8.1.1.7|
|0Fh|ANA Change state|8.1.1.8|
|All other<br>values|Reserved|Reserved|










|Bytes|Description|
|---|---|
|**Header**|**Header**|
|03:00|**ANA Group ID (AGID):** The ANA Group Identifier associated with all namespaces in the<br>ANA Group (refer to section 8.1.1.2) described by this ANA Group Descriptor.|
|07:04|**Number of NSID Values (NNV):** This field indicates the number of Namespace Identifier<br>values in this ANA Group Descriptor.<br>If the RGO bit is set to ‘1’, then this field is cleared to 0h.|
|15:08|**Change Count (CHGC):** This field contains a 64-bit incrementing count, indicating an<br>identifier for the information contained in this ANA Group Descriptor. A value of 0h indicates<br>that the controller does not report a Change Count for this ANA Group Descriptor. If a Change<br>Count is reported, then the count starts at 1h following a Controller Level Reset and is<br>incremented each time the data in this ANA Group Descriptor change. If the value of this field<br>is FFFFFFFF_FFFFFFFFh, then the field shall be set to 1h when incremented (i.e., rolls over<br>to 1h).<br>If this field contains 0h, the host should examine this ANA Group Descriptor for any changes<br>and not use this field as an indicator that a change has occurred.|
|16|**Asymmetric Namespace Access State Attributes (ANASA):**<br>**Bits**<br>**Description**<br>07:04<br>Reserved<br>03:00<br>**Asymmetric Namespace Access State (ANAS):** This field indicates the<br>Asymmetric Namespace Access state for all namespaces in this ANA<br>Group when accessed through this controller.<br>**Value**<br>**Asymmetric Namespace Access State**<br>**Reference**<br>01h<br>ANA Optimized state<br>8.1.1.4<br>02h<br>ANA Non-Optimized state<br>8.1.1.5<br>03h<br>ANA Inaccessible state<br>8.1.1.6<br>04h<br>ANA Persistent Loss state<br>8.1.1.7<br>0Fh<br>ANA Change state<br>8.1.1.8<br>All other<br>values<br>Reserved|
|31:17|Reserved|
|**Namespace Identifier List**|**Namespace Identifier List**|
|35:32|**Namespace Identifier 0:** The Namespace Identifier of the first namespace that is a member<br>of this ANA Group.|
|39:36|**Namespace Identifier 1:** The Namespace Identifier of the second namespace, if any, that<br>is a member of this ANA Group.|
|…|…|
|(((NNV-1)*4) + 35):<br>(((NNV-1)*4) + 32)|**Namespace Identifier NNV-1:** The Namespace Identifier of the last namespace that is a<br>member of this ANA Group.|



**5.1.12.1.14** **Persistent Event (Log Page Identifier 0Dh)**


The Persistent Event log page contains information about significant events not specific to a particular
command. The information in this log page shall be retained across power cycles and resets. NVM


227


NVM Express [®] Base Specification, Revision 2.2


subsystems should be designed for minimal loss of event information upon power failure. This log page
consists of a header describing the log and zero or more Persistent Events (refer to section 5.1.12.1.14.1).


This log page is global to the NVM subsystem.


The Log Specific Parameter field in Command Dword 10 (refer to Figure 198) for this log page is defined
in Figure 226.


A sanitize operation may alter this log page (e.g., remove or modify events to prevent derivation of user
data from log page information, refer to section 8.1.24). The events removed from this log page by a sanitize
operation are unspecified.


Persistent Event Log events specified in this section should be reported in an order such that more recent
events are generally reported earlier in the log data than older events. The method by which the NVM
subsystem determines the order in which events occurred is vendor specific.


The number of events supported is vendor specific. The supported maximum size for the Persistent Event
Log is indicated in the PELS field of the Identify Controller data structure (refer to Figure 313). The number
of events supported and the supported maximum size should be large enough that the number of events
or the size of the Persistent Event Log data does not reach the maximum supported size over the usable
life of the NVM subsystem.


The controller shall log all supported events at each event occurrence unless the controller determines that
the same event is occurring at a frequency that exceeds a vendor specific threshold for the frequency of
event creation. If the same event is occurring at a frequency that exceeds a vendor specific threshold then
the vendor may suppress further entries for the same event. A controller may indicate if events have been
suppressed in vendor specific event data.


It is vendor specific which events are deleted (e.g., important events may be retained and events that are
newer than an important event that was retained may be deleted) to make room for future events if:


a) the size of the Persistent Event Log data reaches the maximum supported size;
b) the number of events reaches the largest reportable number of events; or
c) an event category reaches the largest reportable number of events for that category (e.g.,

information regarding 1,000 occurrences of changes to the timestamp is stored in internal data
structures and extracted for reporting as Timestamp Change events in the Persistent Event Log
and more than 1,000 Timestamp Change events have occurred).


Events that affect multiple controllers (e.g., an NVM Subsystem Reset) should be logged once by a
controller selected by the vendor and not logged by any other controllers.


The Action field in the Log Specific Parameter field (refer to Figure 226) specifies whether:


a) A persistent event log reporting context is created at the start of processing this Get Log Page

command and log page data, if any, is read from the log page data associated with that log reporting
context;
b) Log page data is read from the log page data associated with a preexisting log reporting context;


or
c) The persistent event log reporting context, if any, is released.


The persistent event log reporting context is vendor specific information that the controller creates for
determining what information is included in the persistent event log page data (e.g., the persistent event
log reporting context may be the persistent event log page data or may contain a set of pointers to the
events to report).


The controller should retain the persistent event log reporting context:


a) Until the controller processes:


a) a Get Log Page command requesting the Persistent Event log page with the Action field set to

02h (i.e., Release Context);
b) an NVM Subsystem Reset; or
c) a Controller Level Reset;


228


NVM Express [®] Base Specification, Revision 2.2


or


b) For a vendor specific time long enough to allow retrieval of the Persistent Event log page data.


Persistent Event Log events that occur while a persistent event log reporting context exists shall not be
reported in the existing reporting context but shall be logged.


The host is expected to issue a Get Log Page command with the Action field set to 02h to release the
persistent event log reporting context after reading the persistent event log page data.


If the Persistent Event Log is not read with a single Get Log Page command, then host software should
read the Generation Number field in the Persistent Event Log header after establishing a reporting context
but before reading the remainder of the log and then re-read the Generation Number field after it has read
the entire log. If the generation numbers do not match, then:


   - the reporting context may have been lost while reading the log;

   - the Persistent Event Log contents read may be invalid; and

   - host software should re-read the log.


229


NVM Express [®] Base Specification, Revision 2.2


**Figure 226: Persistent Event Log Specific Parameter Field**








|Col1|Bits|Description|Col4|
|---|---|---|---|
||14:10|Reserved|Reserved|
||09:08|**Action (ACT):**This field specifies the action the controller shall take during processing this Get<br>Log Page command.<br>**Value**<br>**Definition**<br>00b<br>**Read Log Data:** Return Persistent Event log page data starting at the address<br>indicated by the LPOU field and the LPOL field in the Get Log Page command. If the<br>controller does not have a persistent event log reporting context, then the controller<br>shall abort the command with a status code of Command Sequence Error.<br>01b<br>**Establish Context and Read Log Data:** The controller shall:<br>a)<br>determine the length of the Persistent Event log page data;<br>b)<br>determine the set of events to report in the Persistent Event log page data;<br>and<br>c)<br>establish a persistent event log reporting context to store information<br>describing the Persistent Event log page data to be reported and track<br>Persistent Event log page data accesses.<br>After establishing a persistent event log reporting context, the controller shall return<br>Persistent Event log page data starting at the address indicated by the LPOU field<br>and the LPOL field in the Get Log Page command.<br>If a persistent event log reporting context already exists, then the controller shall abort<br>the command with a status code of Command Sequence Error.<br>10b<br>**Release Context:** The controller shall:<br>• <br>release the persistent event log reporting context, if any. It is not an error if<br>the controller does not have a persistent event log reporting context; and<br>• <br>not return any Persistent Event log page data (i.e., the controller ignores the<br>NUMDU field, NUMDL field, LPOL field, and the LPOU field).<br>11b<br>**Establish Context and Read 512 Bytes of Header:** The controller shall:<br>a)<br>determine the length of the Persistent Event log page data;<br>b)<br>determine the set of events to report in the Persistent Event log page data;<br>and<br>c)<br>if a reporting context does not already exist, then establish a persistent<br>event log reporting context to store information describing the Persistent<br>Event log page data to be reported and track Persistent Event log page data<br>accesses.<br>If a persistent event log reporting context did not already exist when the Get Log Page<br>command was processed, then the controller shall:<br>a)<br>establish a persistent event log reporting context; and<br>b)<br>after establishing the context, return 512 bytes of the Persistent Event Log<br>Header starting at offset 0h with the Reporting Context Exists bit cleared to<br>‘0’ with a status code of Successful Completion.<br>If a persistent event log reporting context already existed when the Get Log Page<br>command was processed, then the controller shall return 512 bytes of the Persistent<br>Event Log Header starting at offset 0h with the Reporting Context Exists bit set to ‘1’<br>with a status code of Successful Completion.<br>The 512 bytes of the Persistent Event Log Header shall be returned regardless of the<br>values in the LPOL, LPOU, NUMDL, and NUMDU fields (i.e., the controller shall<br>ignore the LPOL, LPOU, NUMDL, and NUMDU fields). Hosts should ensure<br>allocation of at least 512 bytes in the data buffer to avoid possible data corruption.|**Action (ACT):**This field specifies the action the controller shall take during processing this Get<br>Log Page command.<br>**Value**<br>**Definition**<br>00b<br>**Read Log Data:** Return Persistent Event log page data starting at the address<br>indicated by the LPOU field and the LPOL field in the Get Log Page command. If the<br>controller does not have a persistent event log reporting context, then the controller<br>shall abort the command with a status code of Command Sequence Error.<br>01b<br>**Establish Context and Read Log Data:** The controller shall:<br>a)<br>determine the length of the Persistent Event log page data;<br>b)<br>determine the set of events to report in the Persistent Event log page data;<br>and<br>c)<br>establish a persistent event log reporting context to store information<br>describing the Persistent Event log page data to be reported and track<br>Persistent Event log page data accesses.<br>After establishing a persistent event log reporting context, the controller shall return<br>Persistent Event log page data starting at the address indicated by the LPOU field<br>and the LPOL field in the Get Log Page command.<br>If a persistent event log reporting context already exists, then the controller shall abort<br>the command with a status code of Command Sequence Error.<br>10b<br>**Release Context:** The controller shall:<br>• <br>release the persistent event log reporting context, if any. It is not an error if<br>the controller does not have a persistent event log reporting context; and<br>• <br>not return any Persistent Event log page data (i.e., the controller ignores the<br>NUMDU field, NUMDL field, LPOL field, and the LPOU field).<br>11b<br>**Establish Context and Read 512 Bytes of Header:** The controller shall:<br>a)<br>determine the length of the Persistent Event log page data;<br>b)<br>determine the set of events to report in the Persistent Event log page data;<br>and<br>c)<br>if a reporting context does not already exist, then establish a persistent<br>event log reporting context to store information describing the Persistent<br>Event log page data to be reported and track Persistent Event log page data<br>accesses.<br>If a persistent event log reporting context did not already exist when the Get Log Page<br>command was processed, then the controller shall:<br>a)<br>establish a persistent event log reporting context; and<br>b)<br>after establishing the context, return 512 bytes of the Persistent Event Log<br>Header starting at offset 0h with the Reporting Context Exists bit cleared to<br>‘0’ with a status code of Successful Completion.<br>If a persistent event log reporting context already existed when the Get Log Page<br>command was processed, then the controller shall return 512 bytes of the Persistent<br>Event Log Header starting at offset 0h with the Reporting Context Exists bit set to ‘1’<br>with a status code of Successful Completion.<br>The 512 bytes of the Persistent Event Log Header shall be returned regardless of the<br>values in the LPOL, LPOU, NUMDL, and NUMDU fields (i.e., the controller shall<br>ignore the LPOL, LPOU, NUMDL, and NUMDU fields). Hosts should ensure<br>allocation of at least 512 bytes in the data buffer to avoid possible data corruption.|


|Value|Definition|
|---|---|
|00b|**Read Log Data:** Return Persistent Event log page data starting at the address<br>indicated by the LPOU field and the LPOL field in the Get Log Page command. If the<br>controller does not have a persistent event log reporting context, then the controller<br>shall abort the command with a status code of Command Sequence Error.|
|01b|**Establish Context and Read Log Data:** The controller shall:<br>a)<br>determine the length of the Persistent Event log page data;<br>b)<br>determine the set of events to report in the Persistent Event log page data;<br>and<br>c)<br>establish a persistent event log reporting context to store information<br>describing the Persistent Event log page data to be reported and track<br>Persistent Event log page data accesses.<br>After establishing a persistent event log reporting context, the controller shall return<br>Persistent Event log page data starting at the address indicated by the LPOU field<br>and the LPOL field in the Get Log Page command.<br>If a persistent event log reporting context already exists, then the controller shall abort<br>the command with a status code of Command Sequence Error.|
|10b|**Release Context:** The controller shall:<br>• <br>release the persistent event log reporting context, if any. It is not an error if<br>the controller does not have a persistent event log reporting context; and<br>• <br>not return any Persistent Event log page data (i.e., the controller ignores the<br>NUMDU field, NUMDL field, LPOL field, and the LPOU field).|
|11b|**Establish Context and Read 512 Bytes of Header:** The controller shall:<br>a)<br>determine the length of the Persistent Event log page data;<br>b)<br>determine the set of events to report in the Persistent Event log page data;<br>and<br>c)<br>if a reporting context does not already exist, then establish a persistent<br>event log reporting context to store information describing the Persistent<br>Event log page data to be reported and track Persistent Event log page data<br>accesses.<br>If a persistent event log reporting context did not already exist when the Get Log Page<br>command was processed, then the controller shall:<br>a)<br>establish a persistent event log reporting context; and<br>b)<br>after establishing the context, return 512 bytes of the Persistent Event Log<br>Header starting at offset 0h with the Reporting Context Exists bit cleared to<br>‘0’ with a status code of Successful Completion.<br>If a persistent event log reporting context already existed when the Get Log Page<br>command was processed, then the controller shall return 512 bytes of the Persistent<br>Event Log Header starting at offset 0h with the Reporting Context Exists bit set to ‘1’<br>with a status code of Successful Completion.<br>The 512 bytes of the Persistent Event Log Header shall be returned regardless of the<br>values in the LPOL, LPOU, NUMDL, and NUMDU fields (i.e., the controller shall<br>ignore the LPOL, LPOU, NUMDL, and NUMDU fields). Hosts should ensure<br>allocation of at least 512 bytes in the data buffer to avoid possible data corruption.|



The log page returned is defined in Figure 227.



230


NVM Express [®] Base Specification, Revision 2.2


**Figure 227: Persistent Event Log Page**













|Bytes|Description|
|---|---|
|**Persistent Event Log Header**|**Persistent Event Log Header**|
|00|**Log Page Identifier (LID):** This field shall be set to 0Dh.|
|03:01|Reserved|
|07:04|**Total Number of Events (TNEV):** Contains the number of event entries in this log page.|
|15:08|**Total Log Length (TLL):** Contains the total number of bytes of persistent event log page data<br>available, including the header.|
|16|**Log Revision (LREV):** Contains a number indicating the revision of the Get Log Page data<br>structure that this log page data complies with. Shall be set to 03h. This revision applies to the<br>Persistent Event Log and the Persistent Event Format (refer to Figure 228). This revision does<br>not apply to the contents of the Event Data field in the Persistent Event Format as that field is<br>covered by the Event Type Revision (refer to Figure 228).|
|17|Reserved|
|19:18|**Log Header Length (LHL):** This field contains the length in bytes of the log header information<br>that follows. The total length of the log header in bytes is the value in this field plus 20.|
|27:20|**Timestamp (TSTMP):** Shall contain a timestamp of the time at which the persistent event log<br>reporting context was established. The value returned shall use the Timestamp data structure<br>defined in Figure 397.|
|43:28|**Power on Hours (POH):** This field indicates the number of power-on hours at the time the<br>Persistent Event log was retrieved. This may not include time that the controller was powered<br>and in a non-operational state.|
|51:44|**Power Cycle Count (PWRCC):** Contains the number of power cycles for this controller.|
|53:52|**PCI Vendor ID (VID):**This is the same value as reported in the Identify Controller data structure<br>PCI Vendor ID field (i.e., bytes 01:00).|
|55:54|**PCI Subsystem Vendor ID (SSVID):** This is the same value as reported in the Identify Controller<br>data structure PCI Subsystem Vendor ID field (i.e., bytes 03:02).|
|75:56|**Serial Number (SN):** This field contains the same value as reported in the Serial Number field<br>of the Identify Controller data structure, bytes 23:04.|
|115:76|**Model Number (MN):** This field contains the same value as reported in the Model Number field<br>of the Identify Controller data structure, bytes 63:24.|
|371:116|**NVM Subsystem NVMe Qualified Name (SUBNQN):** This field contains the same value as<br>reported in the NVM Subsystem NVMe Qualified Name field of the Identify Controller data<br>structure, bytes 1023:768. If the NVM Subsystem NVMe Qualified Name field of the Identify<br>Controller data structure is not supported, then all bytes of this field shall be cleared to 0h.|
|373:372|**Generation Number (GNUM):**Contains a value that is incremented each time a persistent event<br>log reporting context is established and the log page returns different data than when this log<br>page last established a reporting context. If the value of this field is FFFFh, then the field shall<br>be cleared to 0h when incremented (i.e., rolls over to 0h).|


231


NVM Express [®] Base Specification, Revision 2.2


**Figure 227: Persistent Event Log Page**








|Value|Definition|
|---|---|
|00b|A persistent event log reporting context does not already exist.|
|01b|The reporting context was established by an NVM subsystem port.|
|10b|The reporting context was established by a Management Endpoint<br>(refer to the NVM Express Management Interface Specification).|
|11b|Reserved|



|Bytes|Description|
|---|---|
|377:374|**Reporting Context Information (RCI):**This field contains information about the persistent event<br>log reporting context.<br>**Bits**<br>**Description**<br>31:19<br>Reserved<br>18<br>**Reporting Context Exists (RCE):** This bit indicates the persistent event log reporting<br>context. If this bit is set to ‘1’, then a persistent event log reporting context already<br>existed when the Get Log Page command that requested this log page was<br>processed. If this bit is cleared to ‘0’, then a persistent event log reporting context did<br>not already exist when the Get Log Page command that requested this log page was<br>processed.<br>17:16<br>**Reporting Context Port Identifier Type (RCPIT):** If the RCE bit is set to ‘1’, then<br>this field indicates the type of port identifier reported in the Reporting Context Port<br>Identifier (RCPID) field. If the RCE bit is cleared to ‘0’, then this field shall be cleared<br>to 00b.<br>**Value**<br>**Definition**<br>00b<br>A persistent event log reporting context does not already exist.<br>01b<br>The reporting context was established by an NVM subsystem port.<br>10b<br>The reporting context was established by a Management Endpoint<br>(refer to the NVM Express Management Interface Specification).<br>11b<br>Reserved<br>15:00<br>**Reporting Context Port Identifier (RCPID):**If the RCE bit is cleared to ‘0’, then this<br>field shall be cleared to 0h.<br>If the RCE bit is set to ‘1’, then this field contains a Port Identifier of the type indicated<br>in the RCPIT field.<br>If the RCPIT field is set to 01b, then this field shall contain the Port Identifier of the<br>NVM subsystem port that established the reporting context as defined in the Primary<br>Controller Capabilities data structure (refer to section 5.1.13.3.1).<br>If the RCPIT field is set to 10b, then:<br>• <br>the least-significant byte of this field shall contain the Port Identifier of the<br>Management Endpoint (refer to the NVM Express Management Interface<br>Specification); and <br>• <br>the most-significant byte of this field shall be cleared to 0h.|
|479:378|Reserved|


|Bits|Description|
|---|---|
|31:19|Reserved|
|18|**Reporting Context Exists (RCE):** This bit indicates the persistent event log reporting<br>context. If this bit is set to ‘1’, then a persistent event log reporting context already<br>existed when the Get Log Page command that requested this log page was<br>processed. If this bit is cleared to ‘0’, then a persistent event log reporting context did<br>not already exist when the Get Log Page command that requested this log page was<br>processed.|
|17:16|**Reporting Context Port Identifier Type (RCPIT):** If the RCE bit is set to ‘1’, then<br>this field indicates the type of port identifier reported in the Reporting Context Port<br>Identifier (RCPID) field. If the RCE bit is cleared to ‘0’, then this field shall be cleared<br>to 00b.<br>**Value**<br>**Definition**<br>00b<br>A persistent event log reporting context does not already exist.<br>01b<br>The reporting context was established by an NVM subsystem port.<br>10b<br>The reporting context was established by a Management Endpoint<br>(refer to the NVM Express Management Interface Specification).<br>11b<br>Reserved|
|15:00|**Reporting Context Port Identifier (RCPID):**If the RCE bit is cleared to ‘0’, then this<br>field shall be cleared to 0h.<br>If the RCE bit is set to ‘1’, then this field contains a Port Identifier of the type indicated<br>in the RCPIT field.<br>If the RCPIT field is set to 01b, then this field shall contain the Port Identifier of the<br>NVM subsystem port that established the reporting context as defined in the Primary<br>Controller Capabilities data structure (refer to section 5.1.13.3.1).<br>If the RCPIT field is set to 10b, then:<br>• <br>the least-significant byte of this field shall contain the Port Identifier of the<br>Management Endpoint (refer to the NVM Express Management Interface<br>Specification); and <br>• <br>the most-significant byte of this field shall be cleared to 0h.|


232


NVM Express [®] Base Specification, Revision 2.2


**Figure 227: Persistent Event Log Page**










|Bits|Description|Reference|
|---|---|---|
|255:224|Reserved||
|223|**TCG Defined**|TCG Storage<br>Interface Interactions<br>Specification|
|222|**Vendor Specific Event Supported (VSES)**|5.1.12.1.14.2.15|
|221:15|Reserved||
|14|**Sanitize**<br>**Media**<br>**Verification**<br>**Event**<br>**Support**<br>**(SMVES)**|5.1.12.1.14.2.14|
|13|**Thermal Excursion Event Support (TEES)**|5.1.12.1.14.2.13|
|12|**Telemetry Log Create Event Support (TLCES)**|5.1.12.1.14.2.12|
|11|**Set Feature Event Support (SFES)**|5.1.12.1.14.2.11|
|10|**Sanitize Completion Event Support (SCES)**|5.1.12.1.14.2.10|
|09|**Sanitize Start Event Support (SSES)**|5.1.12.1.14.2.9|
|08|**Format NVM Completion Event Support (FNCES)**|5.1.12.1.14.2.8|
|07|**Format NVM Start Event Support (FNSES)**|5.1.12.1.14.2.7|
|06|**Change Namespace Event Support (CNES)**|5.1.12.1.14.2.6|
|05|**NVM Subsystem Hardware Error Event Support**<br>**(NSHEES)**|5.1.12.1.14.2.5|
|04|**Power-on or Reset Event Supported (PRES)**|5.1.12.1.14.2.4|
|03|**Timestamp Change Event Supported (TCES)**|5.1.12.1.14.2.3|
|02|**Firmware Commit Event Supported (FCES)**|5.1.12.1.14.2.2|
|01|**SMART / Health Log Snapshot Event Supported**<br>**(SHLSES)**|5.1.12.1.14.2.1|
|00|Reserved||








|Bytes|Description|
|---|---|
|511:480|**Supported Events Bitmap (SEB):** This field contains a bitmap indicating support for the<br>persistent event log events. Each bit in the bitmap corresponds to the value for the event type<br>(refer to Figure 230) (e.g., bit 222 decimal, DEh, corresponds to event type value DEh, Vendor<br>Specific Event). A bit set to ‘1’ indicates that the corresponding event is supported. A bit cleared<br>to ‘0’ indicates that the corresponding event is not supported.<br>**Bits**<br>**Description**<br>**Reference**<br>255:224<br>Reserved<br> <br>223<br>**TCG Defined**<br>TCG Storage<br>Interface Interactions<br>Specification<br>222<br>**Vendor Specific Event Supported (VSES)**<br>5.1.12.1.14.2.15<br>221:15<br>Reserved<br> <br>14<br>**Sanitize**<br>**Media**<br>**Verification**<br>**Event**<br>**Support**<br>**(SMVES)**<br>5.1.12.1.14.2.14<br>13<br>**Thermal Excursion Event Support (TEES)**<br>5.1.12.1.14.2.13<br>12<br>**Telemetry Log Create Event Support (TLCES)**<br>5.1.12.1.14.2.12<br>11<br>**Set Feature Event Support (SFES)**<br>5.1.12.1.14.2.11<br>10<br>**Sanitize Completion Event Support (SCES)**<br>5.1.12.1.14.2.10<br>09<br>**Sanitize Start Event Support (SSES)**<br>5.1.12.1.14.2.9<br>08<br>**Format NVM Completion Event Support (FNCES)**<br>5.1.12.1.14.2.8<br>07<br>**Format NVM Start Event Support (FNSES)**<br>5.1.12.1.14.2.7<br>06<br>**Change Namespace Event Support (CNES)**<br>5.1.12.1.14.2.6<br>05<br>**NVM Subsystem Hardware Error Event Support**<br>**(NSHEES)**<br>5.1.12.1.14.2.5<br>04<br>**Power-on or Reset Event Supported (PRES)**<br>5.1.12.1.14.2.4<br>03<br>**Timestamp Change Event Supported (TCES)**<br>5.1.12.1.14.2.3<br>02<br>**Firmware Commit Event Supported (FCES)**<br>5.1.12.1.14.2.2<br>01<br>**SMART / Health Log Snapshot Event Supported**<br>**(SHLSES)**<br>5.1.12.1.14.2.1<br>00<br>Reserved<br>|
|**Persistent Event Log Events**|**Persistent Event Log Events**|
|(M-1)+512:512|**Persistent Event 0:** This field contains the first persistent event log entry (refer to Figure 228)<br>where M is the length of this persistent event.|
|…|…|
|(TLL-1):(TLL-K)|**Persistent Event N:** This field contains the last persistent event log entry (refer to Figure 228)<br>where K is the length of this persistent event, TLL is the size specified in the Total Log Length<br>field, and N is the value of the TNEV field minus 1h.|



The format of the Persistent Events in the Persistent Event log is shown in Figure 228.


**Figure 228: Persistent Event Format**





|Bytes|Description|
|---|---|
|**Persistent Event Log Event Header**|**Persistent Event Log Event Header**|
|00|**Event Type (ET):** This field indicates the event type for this entry. Refer to section<br>5.1.12.1.14.1 for the definition of the event types.|
|01|**Event Type Revision (ETR):**This field contains a number indicating the revision of the event<br>data structure for the event indicated by the Event Type field that this event data complies<br>with.|
|02|**Event Header Length (EHL):** This field contains the length in bytes of the event header<br>information that follows. The total length of the event header in bytes is the value in this field<br>plus 3. The host should use the value in this field to calculate the offset to the start of the<br>Vendor Specific Information field.|


233


NVM Express [®] Base Specification, Revision 2.2


**Figure 228: Persistent Event Format**




|Bits|Description|
|---|---|
|7:2|Reserved|
|1:0|**Port Identifier Type (PIT):** This field indicates the type of port identifier reported<br>in the Port Identifier (PELPID) field. Implementations that are compliant with NVM<br>Express Base Specification Revision 2.0 and later shall set this field to a non-zero<br>value.<br>**Value**<br>**Definition**<br>00b<br>The Port Identifier Type is not reported and the Port Identifier<br>(PELPID) field does not apply.<br>01b<br>This event is associated with an NVM subsystem port.<br>10b<br>This event is associated with a Management Endpoint (refer to<br>the NVM Express Management Interface Specification).<br>11b<br>This event is not associated with any port.|


|Value|Definition|
|---|---|
|00b|The Port Identifier Type is not reported and the Port Identifier<br>(PELPID) field does not apply.|
|01b|This event is associated with an NVM subsystem port.|
|10b|This event is associated with a Management Endpoint (refer to<br>the NVM Express Management Interface Specification).|
|11b|This event is not associated with any port.|





















|Bytes|Description|
|---|---|
|03|**Event Header Additional Information (EHAI):** This field indicates if additional<br>information is present in this event header.<br>**Bits**<br>**Description**<br>7:2<br>Reserved<br>1:0<br>**Port Identifier Type (PIT):** This field indicates the type of port identifier reported<br>in the Port Identifier (PELPID) field. Implementations that are compliant with NVM<br>Express Base Specification Revision 2.0 and later shall set this field to a non-zero<br>value.<br>**Value**<br>**Definition**<br>00b<br>The Port Identifier Type is not reported and the Port Identifier<br>(PELPID) field does not apply.<br>01b<br>This event is associated with an NVM subsystem port.<br>10b<br>This event is associated with a Management Endpoint (refer to<br>the NVM Express Management Interface Specification).<br>11b<br>This event is not associated with any port.|
|05:04|**Controller Identifier (CNTLID):** This field contains the NVM subsystem unique controller<br>identifier for the controller that created this event. If the event is controller specific, then the<br>event data is associated with that controller. If the event is not controller specific, then this is<br>the controller that the NVM subsystem selected for creating the event.|
|13:06|**Event Timestamp (ETSTP):** This field contains a timestamp of the time when this event<br>occurred using the Timestamp data structure defined in Figure 396.|
|15:14|**Port Identifier (PELPID):**If the PIT field in the EHAI field is cleared to 00b or set to 11b,<br>then this field shall be cleared to 0h.<br>If the PIT field in the EHAI field is not cleared to 00b or set to 11b, then this field contains a<br>Port Identifier of the type indicated in the PIT field.<br>If the PIT field in the EHAI field is set to 01b, then this field shall contain the Port Identifier of<br>the NVM subsystem port associated with this event as defined in the Primary Controller<br>Capabilities data structure (refer to section 5.1.13.3.1).<br>If the PIT field in the EHAI field is set to 10b, then:<br>• <br>the least-significant byte of this field shall contain the Port Identifier of the<br>Management Endpoint associated with this event (refer to the NVM Express<br>Management Interface Specification); and<br>• <br>the most-significant byte of this field shall be cleared to 0h.|
|19:16|Reserved|
|21:20|**Vendor Specific Information Length (VSIL):** This field indicates the length in bytes of the<br>Vendor Specific Information. If no Vendor Specific Information is present, then this field shall<br>be cleared to 0h. The length of the Vendor Specific Information is included in the Event<br>Length field (bytes 23:22). Information associated with this event that is not able to be<br>described in the event data structure fields may be reported in Vendor Specific Information<br>fields in this event.|
|23:22|**Event Length (EL):** This field indicates the length in bytes of the vendor specific information,<br>if any, and the persistent event log event data that follows. The total length of the event in<br>bytes is the value in this field plus the value in the Event Header Length field plus 3.|
|**Vendor Specific Information, if any**|**Vendor Specific Information, if any**|
|EHL+2+VSIL:EHL+3|**Vendor Specific Information (VSI):** This field contains the vendor specific information, if<br>any. This field is omitted if there is no vendor specific information (i.e., if VSIL is cleared to<br>0h).|
|**Persistent Event Log Event Data**|**Persistent Event Log Event Data**|
|EHL+EL+2:<br>EHL+3+VSIL|**Event Data (ED):** This field contains persistent event log event data, if any (refer to section<br>5.1.12.1.14.1).|


234


NVM Express [®] Base Specification, Revision 2.2


**Persistent Event Log Page LID Specific Parameter Field**


Figure 229 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.1.12.1.1) for the Persistent Event log page.


**Figure 229: Persistent Event LID Specific Parameter Field**

|Bits|Description|
|---|---|
|15:1|Reserved|
|0|**Establish Context and Read 512 Bytes of Header Supported (ECRH):** If this bit is cleared to ‘0’, then<br>the controller does not support the Establish Context and Read 512 Bytes of Header action (refer to Figure<br>226).<br>If this bit is set to ‘1’, then the controller supports:<br>• <br>the Establish Context and Read 512 Bytes of Header action; and<br>• <br>the Generation Number field in the Persistent Event log page.<br>If the Persistent Event log page is supported by the controller, then implementations compliant with NVM<br>Express Base Specification, Revision 2.0 and later shall set this bit to ‘1’.|



**Persistent Event Log Events**


The values that may be reported in the Event Type field (refer to section 5.1.12.1.14) of the event header
for events in the Persistent Event log are defined in Figure 230.


**Figure 230: Persistent Event Log Event Types**

|Type|1<br>O/M|Event|Reference Section|
|---|---|---|---|
|00h||Reserved|Reserved|
|01h|NOTE 2|SMART / Health Log Snapshot|5.1.12.1.14.2.1|
|02h|M|Firmware Commit|5.1.12.1.14.2.2|
|03h|M|Timestamp Change|5.1.12.1.14.2.3|
|04h|M|Power-on or Reset|5.1.12.1.14.2.4|
|05h|M|NVM Subsystem Hardware Error|5.1.12.1.14.2.5|
|06h|NOTE 3|Change Namespace|5.1.12.1.14.2.6|
|07h|NOTE 3|Format NVM Start|5.1.12.1.14.2.7|
|08h|NOTE 3|Format NVM Completion|5.1.12.1.14.2.8|
|09h|NOTE 3|Sanitize Start|5.1.12.1.14.2.9|
|0Ah|NOTE 3|Sanitize Completion|5.1.12.1.14.2.10|
|0Bh|O|Set Feature|5.1.12.1.14.2.11|
|0Ch|O|Telemetry Log Created|5.1.12.1.14.2.12|
|0Dh|O|Thermal Excursion|5.1.12.1.14.2.13|
|0Eh|O|Sanitize Media Verification Event|5.1.12.1.14.2.14|
|0Fh to DDh||Reserved|Reserved|
|DEh|O|Vendor Specific Event|5.1.12.1.14.2.15|
|DFh|O|TCG Defined|5.1.12.1.14.2.16|
|E0h to FFh||Reserved|Reserved|
|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Mandatory for NVMe over PCIe implementations, Optional for NVMe over Fabrics implementations.<br>3.<br>Mandatory if the command used to initiate the activity reported by the event is supported.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Mandatory for NVMe over PCIe implementations, Optional for NVMe over Fabrics implementations.<br>3.<br>Mandatory if the command used to initiate the activity reported by the event is supported.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Mandatory for NVMe over PCIe implementations, Optional for NVMe over Fabrics implementations.<br>3.<br>Mandatory if the command used to initiate the activity reported by the event is supported.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Mandatory for NVMe over PCIe implementations, Optional for NVMe over Fabrics implementations.<br>3.<br>Mandatory if the command used to initiate the activity reported by the event is supported.|



**5.1.12.1.14.2.1 SMART / Health Log Snapshot Event (Event Type 01h)**


NVM subsystems that support the Persistent Event Log shall create a SMART / Health Log Snapshot Event:


a) If virtualization management is not implemented, then for every controller in the NVM subsystem;


or
b) If virtualization management is implemented, then for every primary controller,


at least once every 24 power on hours at a time determined by the controller.


235


NVM Express [®] Base Specification, Revision 2.2


The SMART / Health Log Snapshot Event shall set the Persistent Event Log Event Header:


  - Event Type field to 01h; and

  - Event Type Revision field to 01h.


The SMART / Health Log Snapshot Event data is specified in Figure 231.


**Figure 231: SMART / Health Log Snapshot Event Data Format (Event Type 01h)**

|Bytes|Description|
|---|---|
|511:00|**Event Data (ED):** Contains a snapshot of the SMART/Health Information Log data specified in Figure<br>207.|



**5.1.12.1.14.2.2 Firmware Commit Event (Event Type 02h)**


A firmware commit event shall be recorded in the Persistent Event Log when a Firmware Commit command
is completed. The Firmware Commit Event shall set the Persistent Event Log Event Header:


  - Event Type field to 02h; and

  - Event Type Revision field to 01h.


The Firmware Commit Event data is specified in Figure 232.


**Figure 232: Firmware Commit Event Data Format (Event Type 02h)**






|Bytes|Description|
|---|---|
|07:00|**Old Firmware Revision (OFR):** Contains the firmware revision of the active firmware before this<br>firmware commit event.|
|15:08|**New Firmware Revision (NFR):** Contains the firmware revision for the firmware that was requested to<br>become active.|
|16|**Firmware Commit Action (FCA):** Contains the value from the Commit Action field in the Firmware<br>Commit command.|
|17|**Firmware Slot (FSLT):** Contains the value from the Firmware Slot field in the Firmware Commit<br>command.|
|18|**Status Code Type for Firmware Commit Command (STCTFCC):** Contains the status code type from<br>the completion queue entry for the Firmware Commit command.|
|19|**Status Returned for Firmware Commit Command (SRFCC):** Contains the status code from the<br>completion queue entry for the Firmware Commit command.|
|21:20|**Vendor Assigned Firmware Commit Result Code (VAFCRC):** Contains a vendor specific value that<br>provides more information about the result of the firmware commit. A value of 0h indicates that no vendor<br>assigned firmware commit result code is provided.|



**5.1.12.1.14.2.3 Timestamp Change Event (Event Type 03h)**


The Timestamp Change Event (refer to Figure 233) contains the current timestamp, reported in the event
header, and the timestamp from the time at which the timestamp was changed (i.e., the old timestamp).


The Timestamp Change Event shall set the Persistent Event Log Event Header:


  - Event Type field to 03h; and

  - Event Type Revision field to 01h.


The Timestamp Change Event data is specified in Figure 233.


**Figure 233: Timestamp Change Event Format (Event Type 03h)**

|Bytes|Description|
|---|---|
|07:00|**Previous Timestamp (PTSTP):** Contains a timestamp of the time immediately before the timestamp<br>was changed (i.e., the old timestamp) using the Timestamp data structure as defined in Figure 396.|
|15:08|**Milliseconds Since Reset (MSR):** Contains the time since the last Controller Level Reset reported in<br>milliseconds.|



236


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.14.2.4 Power-on or Reset Event (Event Type 04h)**


A Power-on or Reset event shall be recorded in the Persistent Event Log when an NVM Subsystem Reset
(e.g., due to a power-on) or a Controller Level Reset is completed. The Power-on or Reset Event reports
information about resets due to power-on or other events that cause resets (refer to section 3.7) followed
by descriptors reporting information about the controller at the time the reset occurred, including timestamp
values for all controllers for use in synchronization of timestamp values across controllers.


The controller shall set the Persistent Event Log Event Header:


  - Event Type field to 04h; and

  - Event Type Revision field to 01h.


The Power-on or Reset Event data is specified in Figure 234.


**Figure 234: Power-on or Reset Event (Event Type 04h)**







|Bytes|Description|
|---|---|
|07:00|**Firmware Revision (FREV):** Contains the firmware revision that becomes effective when CC.EN<br>transitions from ‘0’ to ‘1’.|
|EL-VSIL-1:081|**Reset Information List (RIL):** Contains a list of one or more Controller Reset Information<br>descriptors (refer to Figure 235). If virtualization management is not implemented, then the list<br>shall contain a Controller Reset Information descriptor for every controller in the NVM subsystem.<br>If virtualization management is implemented, then the list shall contain a Controller Reset<br>Information descriptor for every primary controller.<br>The Controller Reset Information descriptor is shown in Figure 235.|
|Notes:<br>1.<br>Refer to Figure 228 for the definitions of EL and VSIL.|Notes:<br>1.<br>Refer to Figure 228 for the definitions of EL and VSIL.|


**Figure 235: Controller Reset Information descriptor**






|Value|Definition|
|---|---|
|00h|Indicates that this event did not trigger a firmware activation on the controller.|
|01h|Indicates that new firmware was activated on the controller due to this power on or reset.|
|02h|Indicates that an attempt to activate new firmware on the controller due to this power-on or<br>reset failed.|
|03h to<br>FFh|Reserved|








|Bits|Description|
|---|---|
|7:1|Reserved|
|0|**Reset During NVM Format (RDNF):**If this bit is set to ‘1’, then a Format NVM command was in<br>progress for a namespace attached to the controller when this reset event occurred. If this bit is<br>cleared to ‘0’, then no Format NVM command was in progress for any namespace attached to<br>the controller when this reset event occurred.|









|Bytes|Description|
|---|---|
|01:00|**Controller ID (CNTLID):** Contains the Controller ID for the controller with the timestamp in the Controller<br>Timestamp field.|
|02|**Firmware Activation (FA):** Contains a code indicating if this event triggered a firmware activation. <br>**Value**<br>**Definition**<br>00h<br>Indicates that this event did not trigger a firmware activation on the controller.<br>01h<br>Indicates that new firmware was activated on the controller due to this power on or reset. <br>02h<br>Indicates that an attempt to activate new firmware on the controller due to this power-on or<br>reset failed.<br>03h to<br>FFh<br>Reserved|
|03|**Operation in Progress (OIP):**<br>**Bits**<br>**Description**<br>7:1<br>Reserved<br>0 <br>**Reset During NVM Format (RDNF):**If this bit is set to ‘1’, then a Format NVM command was in<br>progress for a namespace attached to the controller when this reset event occurred. If this bit is<br>cleared to ‘0’, then no Format NVM command was in progress for any namespace attached to<br>the controller when this reset event occurred.|
|15:04|Reserved|
|19:16|**Controller Power Cycle (CPWRC):** Contains the power cycle count for the controller indicated in the<br>Controller ID field.|
|27:20|**Power on milliseconds (POM)**: Contains the power on hours in milliseconds since being manufactured.<br>This may not include time that the controller was powered and in a non-operational power state.<br>The resolution of this field is vendor specific (e.g., an NVM subsystem that only counts power on time in<br>hours only reports values corresponding to whole hours).|
|35:28|**Controller Timestamp (CTSTP):** Contains a timestamp for the controller specified in the Controller ID field<br>at the time when this event occurred using the Timestamp data structure defined in Figure 396.|


237


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.14.2.5 NVM Subsystem Hardware Error Event (Event Type 05h)**


An NVM Subsystem Hardware Error event shall be recorded in the Persistent Event Log when a supported
NVM subsystem hardware error event is detected. Which of the NVM subsystem hardware error events
are supported is vendor specific. The NVM subsystem hardware error event shall set the Persistent Event
Log Event Header:


  - Event Type field to 05h; and

  - Event Type Revision Field to 02h.


All detected NVM Subsystem Hardware Error events supported by the NVM subsystem shall be logged
unless otherwise specified (e.g., suppressed due to reoccurrence frequency (refer to section 5.1.12.1.14)).
NVM Subsystem Hardware Error event fields reporting information that is not available (e.g., due to a PCIe
optional feature that is not implemented) shall be cleared to 0h unless otherwise specified in the NVM
Subsystem Hardware Error Event code description.


The NVM Subsystem Hardware Error Event data is specified in Figure 236.


**Figure 236: NVM Subsystem Hardware Error Event Format (Event Type 05h)**





|Bytes|Description|
|---|---|
|01:00|**NVM Subsystem Hardware Error Event Code (NSHEEC):** This field contains a code (refer to<br>Figure 237) indicating the type of NVM subsystem hardware error that is being reported.|
|03:02|Reserved|
|M+3:04|**Additional Hardware Error Information (AHEI):** This field contains additional information about<br>the hardware error event indicated in the NVM Subsystem Hardware Error Event Code field (refer<br>to Figure 237). Where M is the number of bytes of additional hardware error information.<br>This field is omitted if the subsystem hardware error being reported does not contain additional<br>hardware error information (i.e., if the number of bytes of additional hardware error information, M,<br>is 0h).|


**Figure 237: NVM Subsystem Hardware Error Event Codes**







|Value|Definition|
|---|---|
|00h|Reserved|
|01h|**PCIe Correctable Error:** Indicates that the NVM subsystem has detected that a PCIe correctable<br>error occurred.<br>Refer to Figure 239 for the format of the Additional Hardware Error Information field.|
|02h|**PCIe Uncorrectable Non fatal Error:** Indicates that the NVM subsystem has detected that a PCIe<br>uncorrectable non-fatal error occurred.<br>Refer to Figure 239 for the format of the Additional Hardware Error Information field.|
|03h|**PCIe Uncorrectable Fatal Error:** Indicates that the NVM subsystem has detected that a PCIe<br>uncorrectable fatal error occurred.<br>Refer to Figure 239 for the format of the Additional Hardware Error Information field.|
|04h|**PCIe Link Status Change:** Indicates that a change in the values reported in the PCI Express Link<br>Status register (refer to the PCI Express Link Status section in the NVMe over PCIe Transport<br>Specification) have changed due to an attempt to correct unreliable link operation.<br>The Additional Hardware Error Information field shall be set to the contents of the PCI Express Link<br>Status register at the time of the event.|
|05h|**PCIe Link Not Active:** Indicates that the Data Link Control and Management State Machine (refer<br>to PCI Express Base Specification) has transitioned out of the DL_Active state without a<br>corresponding event (e.g., without an indication from the host that the link is to be disabled).<br>This NVM subsystem hardware error event does not contain additional hardware error information.|


238


NVM Express [®] Base Specification, Revision 2.2


**Figure 237: NVM Subsystem Hardware Error Event Codes**






|Bytes|Description|
|---|---|
|0|**Endurance Group Critical Warning (EGCW):**This field shall be set at the time this<br>event is added to the Persistent Event log page using the same format as is specified<br>for the Critical Warning field of the Endurance Group Information log page.|
|1|Reserved|
|3:2|**Endurance Group Identifier (EGID):** This field shall be set to the Endurance Group<br>Identifier for the associated Endurance Group.|



|Value|Definition|
|---|---|
|06h|**Critical Warning Condition:** Indicates the NVM subsystem has detected a condition that causes a<br>bit in the Critical Warning field of the SMART / Health Information log (refer to section 5.1.12.1.3) to<br>be set to ‘1’.<br>Bits in this field represent the associated state at the time of this event.<br>The Additional Hardware Error Information field shall be set at the time of the event using the same<br>format as is specified for the Critical Warning field of the SMART / Health Information log.|
|07h|**Endurance Group Critical Warning Condition:** Indicates that the NVM subsystem has detected a<br>condition that causes a bit in the Critical Warning field of an Endurance Group Information log page<br>(refer to section 5.1.12.1.10) to be set to ‘1’.<br>Bits in this field represent the state at the time this event is added to the Persistent Event log page.<br>The Additional Hardware Error Information field shall be four bytes long and contain the following<br>information: <br>**Bytes**<br>**Description**<br>0 <br>**Endurance Group Critical Warning (EGCW):**This field shall be set at the time this<br>event is added to the Persistent Event log page using the same format as is specified<br>for the Critical Warning field of the Endurance Group Information log page.<br>1 <br>Reserved <br>3:2<br>**Endurance Group Identifier (EGID):** This field shall be set to the Endurance Group<br>Identifier for the associated Endurance Group.|
|08h|**Unexpected Power Loss:** Indicates that the controller incremented the Unexpected Power Losses<br>field value in the SMART / Health Information Log.<br>Note that this field was previously named Unsafe Shutdown.<br>Refer to Figure 238 for the format of the Additional Hardware Error Information field.|
|09h|**Controller Fatal Status:** Indicates that the Controller Fatal Status (CSTS.CFS) bit has been set to<br>‘1’.<br>This NVM subsystem hardware error event does not contain additional hardware error information.|
|0Ah|**Media and Data Integrity Status:** Indicates that a completion queue entry contained a Media and<br>Data Integrity status code (refer to Figure 106) other than 86h (i.e., Access Denied) or 87h (i.e.,<br>Deallocated or Unwritten logical Block).<br>The Additional Hardware Error Information field shall be set to the contents of the completion queue<br>entry.|
|0Bh|**Controller Ready Timeout Exceeded:** Indicates that:<br>a)<br>the controller was not ready to process at least one command without error as described in<br>section 3.5.4.1 within the amount of time indicated by:<br>• <br>the Controller Ready With Media Timeout (CRTO.CRWMT) field in Controller<br>Ready With Media mode (CC.CRIME is cleared to ‘0’); or<br>• <br>the Controller Ready Independent of Media Timeout (CRTO.CRIMT) field in<br>Controller Ready Independent of Media mode (CC.CRIME is set to ‘1’),<br> <br>since the controller was enabled; or<br>b)<br>at least one namespace attached to the controller or media required to process at least one<br>Admin command was not ready within the amount of time indicated by the Controller Ready<br>With Media Timeout (CRTO.CRWMT) field since the controller was enabled by transitioning<br>CC.EN from ‘0’ to ‘1’.<br>Refer to Figure 240 for the format of the Additional Hardware Error Information field.|
|0Ch to FFh|Reserved|


239


NVM Express [®] Base Specification, Revision 2.2


**Figure 238: Additional Hardware Error Information for Unexpected Power Loss Errors**








|Bytes|Description|
|---|---|
|15:0|**Unexpected Power Loss (UPL):**This field shall indicate the value from the Unexpected<br>Power Losses field in the SMART / Health Information log at the time of the event.|
|16|**Unexpected Power Loss Information (UPLI):**This field contains additional information<br>about the unexpected power loss.<br>**Bits**<br>**Description**<br>7:1<br>Reserved<br>0 <br>**Unexpected Power Loss Due to Out-Of-Band Activity (UPLOA):**If the<br>shutdown was unsafe because media was not in a shutdown state when main<br>power was lost or because an Admin command that accesses media as<br>defined by Figure 84 was processed via the out-of-band mechanism with the<br>Ignore Shutdown bit set to ‘1’ (refer to the NVM Express Management Interface<br>Specification) while shutdown processing was reported as in progress or was<br>reported as complete (i.e., while the value of the CSTS.SHST field was set to<br>01b or 10b), then this bit shall be set to ‘1’; otherwise, this bit shall be cleared<br>to ‘0’.|


|Bits|Description|
|---|---|
|7:1|Reserved|
|0|**Unexpected Power Loss Due to Out-Of-Band Activity (UPLOA):**If the<br>shutdown was unsafe because media was not in a shutdown state when main<br>power was lost or because an Admin command that accesses media as<br>defined by Figure 84 was processed via the out-of-band mechanism with the<br>Ignore Shutdown bit set to ‘1’ (refer to the NVM Express Management Interface<br>Specification) while shutdown processing was reported as in progress or was<br>reported as complete (i.e., while the value of the CSTS.SHST field was set to<br>01b or 10b), then this bit shall be set to ‘1’; otherwise, this bit shall be cleared<br>to ‘0’.|



**Figure 239: Additional Hardware Error Information for correctable and uncorrectable PCIe**


**errors**








|Bits|Description|
|---|---|
|7:1|Reserved|
|0|**PCIe AER Supported (PCIEAERS):**If this bit is set to ‘1’, then the PCIe AER<br>(refer to the PCI Express specification) is supported and that the PCIe AER<br>Error Status field, PCIe AER Error Mask field, PCIe AER Header Log Register<br>field, and the PCIe AER TLP Prefix Log Register field are reported. If this bit is<br>cleared to ‘0’, then the PCIe AER is not supported and that the PCIe AER Error<br>Status field, PCIe AER Error Mask field, PCIe AER Header Log Register field,<br>and PCIe AER TLP Prefix Log Register field are not reported (i.e., bytes 79:16<br>are not reported).|





|Bytes|Description|
|---|---|
|01:00|**PCIe Device Status Register (PCIEDSR):** Contains the contents of the PCI Device Status<br>Register (refer to the PCI Express Base Specification) at the time of the event.|
|02|**PCIe AER Support (PCIEAS):**<br>**Bits**<br>**Description**<br>7:1<br>Reserved<br>0 <br>**PCIe AER Supported (PCIEAERS):**If this bit is set to ‘1’, then the PCIe AER<br>(refer to the PCI Express specification) is supported and that the PCIe AER<br>Error Status field, PCIe AER Error Mask field, PCIe AER Header Log Register<br>field, and the PCIe AER TLP Prefix Log Register field are reported. If this bit is<br>cleared to ‘0’, then the PCIe AER is not supported and that the PCIe AER Error<br>Status field, PCIe AER Error Mask field, PCIe AER Header Log Register field,<br>and PCIe AER TLP Prefix Log Register field are not reported (i.e., bytes 79:16<br>are not reported).|
|15:03|Reserved|
|31:16|**PCIe AER Error Status (PCIEAES):** Contains the contents of:<br>a)<br>the PCIe AER Correctable Error Status Register (refer to the Advanced Error<br>Reporting Capability section in the NVMe over PCIe Transport Specification) at the<br>time of the event if the error is a correctable error; or<br>b)<br>The PCIe AER Uncorrectable Error Status Register (refer to the Advanced Error<br>Reporting Capability section in the NVMe over PCIe Transport Specification), at the<br>time of the event if the error is an uncorrectable error.|
|47:32|**PCIe AER Error Mask (PCIEAEM):** Contains the contents of:<br>a)<br>the PCIe AER Correctable Error Mask Register (refer to the Advanced Error<br>Reporting Capability section in the NVMe over PCIe Transport Specification) at the<br>time of the event if the error is a correctable error; or<br>b)<br>the PCIe AER Uncorrectable Error Mask Register (refer to the Advanced Error<br>Reporting Capability section in the NVMe over PCIe Transport Specification) at the<br>time of the event if the error is an uncorrectable error.|
|63:48|**PCIe AER Header Log Register (PCIEAHLR):** Contains the contents of the PCIe AER<br>Header Log Register (refer to the Advanced Error Reporting Capability section in the NVMe<br>over PCIe Transport Specification), if supported, at the time of the event.|
|79:64|**PCIe AER TLP Prefix Log Register (PCIEATPLR):** Contains the contents of the PCIe AER<br>TLP Prefix Log Register (refer to the Advanced Error Reporting Capability section in the<br>NVMe over PCIe Transport Specification), if supported, at the time of the event.|


240


NVM Express [®] Base Specification, Revision 2.2


**Figure 240: Additional Hardware Error Information for Controller Ready Timeout**


**Exceeded errors**









|Bytes|Description|
|---|---|
|0|**Controller State (CST)**: Indicates the state of the controller at the time the Controller Ready<br>Timeout Exceeded error occurred.<br>**Bits**<br>**Description**<br>7:4<br>Reserved<br>3 <br>**Controller Not Ready (CNR):**Indicates the controller was not ready to process<br>at least one command without error as described in section 3.5.4.1 within the<br>amount of time indicated by:<br>a)<br>the Controller Ready With Media Timeout (CRTO.CRWMT) field in<br>Controller Ready With Media mode (CC.CRIME is cleared to ‘0’); or<br>b)<br>the Controller Ready Independent of Media Timeout (CRTO.CRIMT)<br>field in Controller Ready Independent of Media mode (CC.CRIME is<br>set to ‘1’),<br>since the controller was enabled.<br>2 <br>**Admin Command Media Not Ready (ACMNR):**Indicates media required to<br>process at least one Admin command was not ready within the amount of time<br>indicated by the Controller Ready With Media Timeout (CRTO.CRWMT) field<br>since the controller was enabled by transitioning CC.EN from ‘0’ to ‘1’.<br>1 <br>**Namespace Not Ready (NNR):**Indicates at least one namespace attached to<br>the controller was not ready within the amount of time indicated by the Controller<br>Ready With Media Timeout (CRTO.CRWMT) field since the controller was<br>enabled by transitioning CC.EN from ‘0’ to ‘1’. <br>0 <br>**Controller Ready Independent of Media Enable (CRIME):** Indicates the value<br>of the CC.CRIME bit when the Controller Ready Timeout Exceeded error<br>occurred.|
|3:1|Reserved|


|Bits|Description|
|---|---|
|7:4|Reserved|
|3|**Controller Not Ready (CNR):**Indicates the controller was not ready to process<br>at least one command without error as described in section 3.5.4.1 within the<br>amount of time indicated by:<br>a)<br>the Controller Ready With Media Timeout (CRTO.CRWMT) field in<br>Controller Ready With Media mode (CC.CRIME is cleared to ‘0’); or<br>b)<br>the Controller Ready Independent of Media Timeout (CRTO.CRIMT)<br>field in Controller Ready Independent of Media mode (CC.CRIME is<br>set to ‘1’),<br>since the controller was enabled.|
|2|**Admin Command Media Not Ready (ACMNR):**Indicates media required to<br>process at least one Admin command was not ready within the amount of time<br>indicated by the Controller Ready With Media Timeout (CRTO.CRWMT) field<br>since the controller was enabled by transitioning CC.EN from ‘0’ to ‘1’.|
|1|**Namespace Not Ready (NNR):**Indicates at least one namespace attached to<br>the controller was not ready within the amount of time indicated by the Controller<br>Ready With Media Timeout (CRTO.CRWMT) field since the controller was<br>enabled by transitioning CC.EN from ‘0’ to ‘1’.|
|0|**Controller Ready Independent of Media Enable (CRIME):** Indicates the value<br>of the CC.CRIME bit when the Controller Ready Timeout Exceeded error<br>occurred.|


**5.1.12.1.14.2.6 Change Namespace Event (Event Type 06h)**


The Changed Namespace Event (refer to Figure 241) persists the host parameters used for successful
Namespace Management commands. This event type is specific to namespaces that are associated with
I/O Command Sets that specify logical blocks (e.g., the NVM Command Set and the Zoned Namespace
Command Set). The event contains a Persistent Event Log Event header and the Change Namespace
Event data.


The Changed Namespace Event shall set the Persistent Event Log Event Header:


  - Event Type field to 06h; and

  - Event Type Revision Field to 02h.


**Figure 241: Change Namespace Event Data Format (Event Type 06h)**

|Bytes|Description|
|---|---|
|03:00|**Namespace Management CDW10 (NMCDW10):** Contains the value from command Dword 10 of the<br>Namespace Management command that initiated the namespace change event (refer to Figure 368).|
|07:04|Reserved|
|15:08|**Namespace Size (NSZE):** For a create operation, contains the NSZE value from the Identify<br>Namespace data structure in the Namespace Management command (refer to Figure 370). For a delete<br>operation that specifies a single namespace this field contains the value from the NSZE field of the<br>Identify Namespace data structure (refer to the I/O Command Set specific Identify Namespace data<br>structure in the applicable I/O Command Set specification) for the namespace being deleted. For a<br>delete operation that specifies all namespaces this field is reserved.|
|23:16|Reserved|



241


NVM Express [®] Base Specification, Revision 2.2


**Figure 241: Change Namespace Event Data Format (Event Type 06h)**













|Bytes|Description|
|---|---|
|31:24|**Namespace Capacity (NCAP):** For a creation operation, contains the NCAP value from the Identify<br>Namespace data structure in the Namespace Management command (refer to Figure 370). For a delete<br>operation that specifies a single namespace this field contains the value from the NCAP field of the<br>Identify Namespace data structure (refer to the I/O Command Set specific Identify Namespace data<br>structure in the applicable I/O Command Set specification) for the namespace being deleted. For a<br>delete operation that specifies all namespaces this field is reserved. For I/O Command Sets that do not<br>define this field, this field is considered reserved.|
|32|**Formatted LBA Size (FLBAS):** Refer to the applicable I/O Command Set specification for details. For<br>I/O Command Sets that do not define this field, this field is considered reserved.<br>NOTE: This field applies to all User Data Formats. The original name has been retained for historical<br>continuity.|
|33|**End-to-end Data Protection Type Settings (DPS):** Refer to the applicable I/O Command Set<br>specification for details. For I/O Command Sets that do not define this field, this field is considered<br>reserved.|
|34|**Namespace Multi-path I/O and Namespace Sharing Capabilities (NMIC):** For a create operation,<br>contains the NMIC value from the Namespace Management – Host Software Specified Fields data<br>structure defined in the applicable I/O Command Set specification. For a delete operation that specifies<br>a single namespace this field contains the value from the NMIC field of the I/O Command Set<br>Independent Identify Namespace data structure (refer to Figure 3201) for the namespace being deleted.<br>For a delete operation that specifies all namespaces this field is reserved.|
|35|Reserved|
|39:36|**ANA Group Identifier (ANAGRPID):** For a create operation, contains the ANAGRPID value from the<br>Namespace Management – Host Software Specified Fields data structure defined in the applicable I/O<br>Command Set specification, if specified, or contains the ANAGRPID value from the I/O Command Set<br>Independent Identify Namespace data structure (refer to Figure 3201) after the namespace was created<br>if an ANA Group Identifier was not specified in the command. For a delete operation that specifies a<br>single namespace this field contains the value from the ANAGRPID field of the I/O Command Set<br>Independent Identify Namespace data structure (refer to Figure 3201) for the namespace being deleted.<br>For a delete operation that specifies all namespaces this field is reserved.<br>If ANA Groups are not supported, then the ANAGRPID field shall be cleared to 0h.|
|41:40|**NVM Set Identifier (NVMSETID):** For a create operation, contains the NVMSETID value from the<br>Namespace Management – Host Software Specified Fields data structure defined in the applicable I/O<br>Command Set specification. For a delete operation that specifies a single namespace this field contains<br>the value from the NVMSETID field of the I/O Command Set Independent Identify Namespace data<br>structure (refer to Figure 3201) for the namespace being deleted. For a delete operation that specifies<br>all namespaces this field is reserved.|
|43:42|**Endurance Group Identifier (ENDGID):** For a create operation, contains the ENDGID value from the<br>Namespace Management – Host Software Specified Fields data structure defined in the applicable I/O<br>Command Set specification. For a delete operation that specifies a single namespace, this field contains<br>the value from the ENDGID field of the I/O Command Set Independent Identify Namespace data<br>structure (refer to Figure 3201) for the namespace being deleted. For a delete operation that specifies<br>all namespaces this field is reserved.|
|47:44|**Namespace ID (NSID):** For a create operation, contains the NSID for the namespace that was created.<br>For a delete operation, contains the NSID for the namespace being deleted or FFFFFFFFh for a delete<br>operation specifying all namespaces.|
|Notes:<br>1.<br>For controllers that implement the NVM Command Set, this field contains the value of the associated field from<br>the Identify Namespace data structure (refer to the NVM Command Set Identify Namespace data structure in<br>the NVM Command Set Specification).|Notes:<br>1.<br>For controllers that implement the NVM Command Set, this field contains the value of the associated field from<br>the Identify Namespace data structure (refer to the NVM Command Set Identify Namespace data structure in<br>the NVM Command Set Specification).|


**5.1.12.1.14.2.7 Format NVM Start Event (Event Type 07h)**


242


NVM Express [®] Base Specification, Revision 2.2


A Format NVM Start event shall be recorded in the Persistent Event Log after successfully validating the
command parameters of a Format NVM command (refer to section 5.1.10) and before modifying any of the
contents of the NVM.


The Format NVM Start event shall set the Persistent Event Log Event Header:


  - Event Type field to 07h; and

  - Event Type Revision field to 01h.


**Figure 242: Format NVM Start Event Data Format (Event Type 07h)**

|Bytes|Description|
|---|---|
|03:00|**Namespace Identifier (NSID):** Contains the namespace identifier specified in the Format NVM<br>command.|
|04|**Format NVM Attributes (FNA):** Contains the value from the identify controller FNA field of the<br>Identify Namespace data structure (refer to Figure 320).|
|07:05|Reserved|
|11:08|**Format NVM CDW10 (FMCDW10):** Contains the value from command Dword 10 of the Format<br>NVM command (refer to Figure 190).|



**5.1.12.1.14.2.8 Format NVM Completion Event (Event Type 08h)**


A Format NVM Completion event shall be recorded in the Persistent Event Log at the completion of a
Format NVM command that resulted in modification of the contents of the NVM.


The Format NVM Completion event shall set the Persistent Event Log Event Header:


  - Event Type field to 08h; and

  - Event Type Revision field to 02h.


**Figure 243: Format NVM Completion Event Data Format (Event Type 08h)**







|Bytes|Description|
|---|---|
|03:00|**Namespace Identifier (NSID):** Contains the namespace identifier specified in the Format NVM<br>command.|
|04|**Smallest Format Progress Indicator (SFPI):** For a Format NVM command that formats a single<br>namespace, this field contains the smallest numerical value that was available for reporting in the<br>Remaining Format NVM (RFNVM) field of the FPI field of the I/O Command Set Independent Identify<br>Namespace data structure (i.e., if the format did not complete successfully and the FPI field is supported,<br>then this field contains the percentage of the namespace that remained to be formatted at the time the<br>Format NVM command completed, refer to Figure 320) during the format operation. For a Format NVM<br>command that formats all namespaces this field shall be cleared to 0h.|
|05|**Format NVM Status (FNVMS):** Contains the status of the format operation.<br>**Bits**<br>**Description**<br>7:2<br>Reserved<br>1 <br>**Incomplete Format (INCPLTF):** If this bit is set to ‘1’, then the format operation modified<br>some or all of the user data but did not complete successfully. If this bit is set to ‘1’, then the<br>Format NVM Error bit shall be set to ‘1’. If this bit is cleared to ‘0’, then the format operation<br>either did not modify any user data or the format operation completed successfully. <br>0 <br>**Format NVM Error (FNVME):** If this bit is set to ‘1’, then the format operation did not complete<br>successfully. If this bit is cleared to ‘0’, then the format operation completed successfully.|
|07:06|**Completion Information (CINFO):** Contains a vendor specific value that may provide more information<br>about the completion of the format operation (e.g., if the format operation did not complete successfully,<br>then this field may contain a vendor specific code that indicates a vendor specific reason).|


|Bits|Description|
|---|---|
|7:2|Reserved|
|1|**Incomplete Format (INCPLTF):** If this bit is set to ‘1’, then the format operation modified<br>some or all of the user data but did not complete successfully. If this bit is set to ‘1’, then the<br>Format NVM Error bit shall be set to ‘1’. If this bit is cleared to ‘0’, then the format operation<br>either did not modify any user data or the format operation completed successfully.|
|0|**Format NVM Error (FNVME):** If this bit is set to ‘1’, then the format operation did not complete<br>successfully. If this bit is cleared to ‘0’, then the format operation completed successfully.|


243






NVM Express [®] Base Specification, Revision 2.2


**Figure 243: Format NVM Completion Event Data Format (Event Type 08h)**








|Bits|Description|
|---|---|
|15:1|**Status (STATUS):**This field indicates the value that was reported in the Status field for the<br>completion queue entry (refer to Figure 100), if any, for the Format NVM command<br>associated with this event. If no completion queue entry was reported, then this field shall be<br>cleared to 0h.|
|0|**Phase Tag (P):**This field may indicate the Phase Tag posted for the command.|


|Bytes|Description|
|---|---|
|09:08|**Status Info (INFO):** Identifies the status for the NVM Format command.<br>**Bits**<br>**Description**<br>15:1<br>**Status (STATUS):**This field indicates the value that was reported in the Status field for the<br>completion queue entry (refer to Figure 100), if any, for the Format NVM command<br>associated with this event. If no completion queue entry was reported, then this field shall be<br>cleared to 0h.<br>0 <br>**Phase Tag (P):**This field may indicate the Phase Tag posted for the command.|
|11:10|Reserved|



**5.1.12.1.14.2.9 Sanitize Start Event (Event Type 09h)**


A Sanitize Start event shall be recorded in the Persistent Event Log at the start of a sanitize operation (i.e.,
the sanitization target transitions to the Restricted Processing state or the Unrestricted Processing state,
as described in section 8.1.24.3).


The Sanitize Start event shall set the Persistent Event Log Event Header:


  - Event Type field to 09h; and

  - Event Type Revision field to 01h.


**Figure 244: Sanitize Start Event Data Format (Event Type 09h)**

|Bytes|Description|
|---|---|
|03:00|**Sanitize Capabilities (SANICAP):** Contains the contents of the SANICAP field from the Identify<br>Controller data structure.|
|07:04|**Sanitize CDW10 (SCDW10):** Contains the value from command Dword 10 of the Sanitize command<br>(refer to Figure 373).|
|11:08|**Sanitize CDW11 (SCDW11):** Contains the value from command Dword 11 of the Sanitize command<br>(refer to Figure 374).|



**5.1.12.1.14.2.10** **Sanitize Completion Event (Event Type 0Ah)**


A Sanitize Completion event shall be recorded in the Persistent Event Log at the completion of a sanitize
operation (i.e., the sanitization target transitions to the Idle state, the Restricted Failure state, or the
Unrestricted Failure state, as described in section 8.1.24.3).


The Sanitize Completion event shall set the Persistent Event Log Event Header:


  - Event Type field to 0Ah; and

  - Event Type Revision field to 01h.


**Figure 245: Sanitize Completion Event Data Format (Event Type 0Ah)**







|Bytes|Description|
|---|---|
|1:0|**Sanitize Progress (SPROG):** Contains the sanitize progress at the time of this event using the format<br>specified for the SPROG field in the Sanitize Status log page (refer to section 5.1.12.1.33).|
|3:2|**Sanitize Status (SSTAT):** Contains the sanitize status for the time of this event using the format specified<br>for the SSTAT field in the Sanitize Status log page. (e.g., the Global Data Erase bit indicates the status<br>at the time of this event).|
|5:4|**Completion Information (CINFO):** Contains a vendor specific value that may provide more information<br>about the completion of the sanitize operation (e.g., if the sanitize operation did not complete successfully,<br>then this field may contain a vendor specific code that indicates a vendor specific reason).|
|7:6|Reserved|


**5.1.12.1.14.2.11** **Set Feature Event (Event Type 0Bh)**


244


NVM Express [®] Base Specification, Revision 2.2


The Set Feature Event persists the data of a successful Set Features command. The event contains a
Persistent Event Log Event header and the Set Feature Event data (refer to Figure 247).


The Set Feature Event shall set the Persistent Event Log Event Header:


  - Event Type field to 0Bh; and

  - Event Type Revision Field to 01h.


A Set Feature Event shall be recorded in the Persistent Event Log when the following criteria are met:


a) A Set Features command completes successfully;
b) The Feature Identifier in that Set Features command is supported to be logged in the Persistent

Event Log; and
c) There is a change to the controller settings for the Feature Identifier in that Set Features command

(i.e., the same setting is not set again).


A Set Feature Event may be recorded in the Persistent Event Log when there is no change to the controller
settings for the Feature Identifier in that Set Features command if the following criteria are met:


a) A Set Features command completes successfully; and
b) The Feature Identifier in that Set Features command is supported to be logged in the Persistent

Event Log.


The Feature Identifiers that may be supported to be logged in the Persistent Event Log are shown in Figure
246.


**Figure 246: Feature Persistent Event Logging Requirements**

|Feature Name|Feature<br>Identifier|1<br>Controller PE Logging Requirements|Col4|Col5|
|---|---|---|---|---|
|**Feature Name**|**Feature**<br>**Identifier**|**I/O**|**Admin**|**Discovery**|
|Arbitration|01h|O|P|P|
|Power Management|02h|NR|NR|P|
||03h|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|
|Temperature Threshold|04h|O|O|P|
||05h|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|
|Volatile Write Cache|06h|O|P|P|
|Number of Queues|07h|O|P|P|
|Interrupt Coalescing|08h|O|O|P|
|Interrupt Vector Configuration|09h|O|O|P|
||0Ah|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|
|Asynchronous Event Configuration|0Bh|NR|NR|NR|
|Autonomous Power State Transition|0Ch|O|O|P|
|Host Memory Buffer|0Dh|O|O|P|
|Timestamp|0Eh|P|P|P|
|Keep Alive Timer|0Fh|O|O|O|
|Host Controlled Thermal Management|10h|O|O|P|
|Non-Operational Power State Config|11h|O|O|P|
|Read Recovery Level Config|12h|O|O|P|
|Predictable Latency Mode Config|13h|O|P|P|
|Predictable Latency Mode Window|14h|P|O|P|
||15h|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|
|Host Behavior Support|16h|O|O|P|
|Sanitize Config|17h|O|O|P|
|Endurance Group Event Configuration|18h|O|O|P|
|I/O Command Set Profile|19h|O|P|P|
|Spinup Control|1Ah|O|P|P|
|Power Loss Signaling Config|1Bh|O|O|P|
||1Ch|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|
|Flexible Data Placement|1Dh|O|P|P|
|Flexible Data Placement Events|1Eh|O|P|P|



245


NVM Express [®] Base Specification, Revision 2.2


**Figure 246: Feature Persistent Event Logging Requirements**









|Feature Name|Feature<br>Identifier|1<br>Controller PE Logging Requirements|Col4|Col5|
|---|---|---|---|---|
|**Feature Name**|**Feature**<br>**Identifier**|**I/O**|**Admin**|**Discovery**|
|Namespace Admin Label|1Fh|O|O|P|
||20h|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|Refer to the applicable I/O Command Set specification|
|Embedded Management Controller<br>Address|78h|O|O|O|
|Host Management Agent Address|79h|O|O|O|
|Enhanced Controller Metadata|7Dh|O|O|O|
|Controller Metadata|7Eh|O|O|O|
|Namespace Metadata|7Fh|O|O|O|
|Software Progress Marker|80h|NR|NR|P|
|Host Identifier|81h|O|O|P|
|Reservation Notification Mask|82h|O|P|P|
|Reservation Persistence|83h|O|P|P|
|Namespace Write Protection Config|84h|O|O|P|
|Boot Partition Write Protection Config|85h|O|O|P|
|Notes:<br>1.<br>O/M/P/NR definition: O = Optional, M = Mandatory, P = Prohibited, NR = Not Recommended|Notes:<br>1.<br>O/M/P/NR definition: O = Optional, M = Mandatory, P = Prohibited, NR = Not Recommended|Notes:<br>1.<br>O/M/P/NR definition: O = Optional, M = Mandatory, P = Prohibited, NR = Not Recommended|Notes:<br>1.<br>O/M/P/NR definition: O = Optional, M = Mandatory, P = Prohibited, NR = Not Recommended|Notes:<br>1.<br>O/M/P/NR definition: O = Optional, M = Mandatory, P = Prohibited, NR = Not Recommended|


The Command Dwords and Memory Buffer logged in the Set Feature Event data use the same formats as
the formats defined by the Set Features and Get Features commands.


**Figure 247: Set Feature Event Data Format**




|Bits|Description|
|---|---|
|31:16|**Memory Buffer Count (MBC):** Defines the number of bytes from the<br>memory buffer that are logged in the Memory Buffer field. A value of<br>0h indicates that the Memory Buffer field does not exist.|
|15:04|Reserved|
|03|**Logged Command Completion Dword 0 (LCCDW0):** If this bit is set<br>to ‘1’, then Dword 0 of the completion queue entry for the Set Features<br>command is included in the log. If this bit is cleared to ‘0’, then Dword<br>0 of the completion queue entry for the Set Features command is not<br>included in the log.|
|02:00|**Dword Count (DWC):** contains the number of consecutive Dwords<br>starting with Dword 10 from the Set Features command that are<br>reported in the Command Dwords field. The values 0h and 7h are<br>reserved.|


















|Bytes|Description|
|---|---|
|03:00|**Set Feature Event Layout (SFEL):** Defines the number of Command Dwords and<br>the amount of data in the Memory Buffer from the Set Features command<br>associated with this event.<br>**Bits**<br>**Description**<br>31:16<br>**Memory Buffer Count (MBC):** Defines the number of bytes from the<br>memory buffer that are logged in the Memory Buffer field. A value of<br>0h indicates that the Memory Buffer field does not exist.<br>15:04<br>Reserved<br>03<br>**Logged Command Completion Dword 0 (LCCDW0):** If this bit is set<br>to ‘1’, then Dword 0 of the completion queue entry for the Set Features<br>command is included in the log. If this bit is cleared to ‘0’, then Dword<br>0 of the completion queue entry for the Set Features command is not<br>included in the log.<br>02:00<br>**Dword Count (DWC):** contains the number of consecutive Dwords<br>starting with Dword 10 from the Set Features command that are<br>reported in the Command Dwords field. The values 0h and 7h are<br>reserved.|
|(Dword Count * 4)+3:4|**Command Dwords (CDWS):** Contains a sequential list of Command Dwords from<br>the Set Features command starting with Command Dword 10. The number of<br>entries in the list is specified by the DWC field. All non-reserved Command Dwords<br>specified by the Set Features command for the Feature Identifier shall be logged.<br>The Command Dwords are ordered as defined by the Common Command Format<br>in Figure 92.|
|(Memory Buffer Count) +<br>(Dword Count * 4) + 3:<br>(Dword Count * 4) + 4|**Memory Buffer (MBUF):** Contains the data in the memory buffer for the Set<br>Features command.<br>If the Memory Buffer Count field is cleared to 0h, then this field does not exist in<br>the logged event.|
|Memory Buffer Count +<br>(Dword Count * 4) + 7:<br>Memory Buffer Count +<br>(Dword Count * 4) + 4|**Command Completion Dword 0 (CCDW0):** If the Logged Command Completion<br>Dword 0 bit is set to ‘1’, then this field contains the Dword 0 value from the Set<br>Features command completion. If the Logged Command Completion Dword 0 bit<br>is cleared to ‘0’, then this field is not logged.|



246


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.14.2.12** **Telemetry Log Create Event (Event Type 0Ch)**


A Telemetry Log Create event may be created if the controller determines that a Telemetry Host-Initiated
log page (refer to section 5.1.12.1.8) or that a Telemetry Controller-Initiated log page (refer to section
5.1.12.1.9) has been generated.


The Telemetry Log Create Event shall set the Persistent Event Log Event Header:


  - Event Type field to 0Ch; and

  - Event Type Revision Field to 01h.


**Figure 248: Telemetry Log Create Event Data Format (Event Type 0Ch)**






|Bytes|Description|
|---|---|
|511:00|**Telemetry Initiated Log (TIL):** Contains a copy of the values from the first 512 bytes of the<br>Telemetry Host-Initiated log page (refer to Figure 215) or the first 512 bytes of the Telemetry<br>Controller-Initiated log page (refer to Figure 217).|



**5.1.12.1.14.2.13** **Thermal Excursion Event (Event Type 0Dh)**


A Thermal Excursion event shall be recorded in the Persistent Event Log if the Composite Temperature
has transitioned from a temperature that is less than:


a) the WCTEMP, if any, (refer to Figure 313) to a temperature that is greater than or equal to the

WCTEMP, if any; or
b) the CCTEMP, if any, (refer to Figure 313), to a temperature that is greater than or equal to the

CCTEMP, if any,


unless recording of the event causes a vendor specific frequency of threshold reports for this threshold to
be exceeded.


A Thermal Excursion event may be recorded in the Persistent Event Log if the Composite Temperature has
transitioned from a temperature:


a) that is less than TMT1 (refer to section 5.1.25.1.9), if any, to a temperature that is greater than or

equal to TMT1, if any (i.e., light throttling has started);
b) that is less than TMT2 (refer to section 5.1.25.1.9), if any, to a temperature that is greater than or

equal to TMT2, if any (i.e., heavy throttling has started);
c) that is less than a vendor specific temperature where thermal throttling occurs due to self-throttling

to a temperature that is greater than that vendor specific temperature (i.e., self-throttling has
started);
d) outside of a temperature threshold to a value that is within all temperature thresholds (i.e., the

temperature returns to normal);
e) at which thermal throttling is occurring to a temperature at which thermal throttling is stopped; or
f) that is greater than an under temperature threshold (refer to section 5.1.25.1.3) to a temperature
that is less than or equal to an under temperature threshold,


unless recording of the event causes a vendor specific frequency of threshold reports for this threshold to
be exceeded.


The Thermal Excursion event shall set the Persistent Event Log Event Header;


  - Event Type field to 0Dh; and

  - Event Type Revision field to 01h.


**Figure 249: Thermal Excursion Event Data Format (Event Type 0Dh)**

|Bytes|Description|
|---|---|
|0|**Over Temperature (OTMP):** Contains the absolute value of the difference (i.e., delta) in Kelvins between<br>the temperature indicated in the threshold field and temperature measured at the time of the event.|



247


NVM Express [®] Base Specification, Revision 2.2


**Figure 249: Thermal Excursion Event Data Format (Event Type 0Dh)**














|Bytes|Description|
|---|---|
|1|**Threshold (THRESH):** Contains an indicator for the temperature threshold crossing that is being reported. <br>**Value**<br>**Definition**<br>**High Temperature Transitions**<br>1h<br>The Composite Temperature has transitioned from a temperature that is less than<br>WCTEMP to a temperature that is greater than or equal to WCTEMP.<br>2h<br>The Composite Temperature has transitioned from a temperature that is less than<br>CCTEMP to a temperature that is greater than or equal to CCTEMP.<br>3h<br>The Composite Temperature has transitioned from a temperature that is less than<br>TMT1 to a temperature is greater than or equal to TMT1 (i.e., vendor specific thermal<br>management actions that minimize the impact on performance, such as light throttling,<br>have started).<br>4h<br>The Composite Temperature has transitioned from a temperature that is less than<br>TMT2 to a temperature that is greater than or equal to TMT2 (i.e., vendor specific<br>thermal management actions that may impact performance, such as heavy throttling,<br>have started).<br>5h<br>The Composite Temperature has transitioned from a temperature where no vendor<br>specific thermal management actions are taken to a temperature that is greater than<br>or equal to a vendor specific temperature at which vendor specific thermal<br>management actions have started (e.g., self-throttling).<br>**Normal Temperature Transitions**<br>88h<br>The Composite Temperature has transitioned from a temperature that is greater than<br>or equal to WCTEMP or is less than or equal to an under temperature threshold to a<br>temperature that is between WCTEMP and that under temperature threshold (i.e., the<br>temperature has transitioned to a normal temperature).<br>89h<br>The Composite Temperature has transitioned from a temperature that is greater than<br>a temperature where thermal management actions are being performed and that is not<br>greater than or equal to WCTEMP to a temperature where thermal management<br>actions are stopped.<br>**Low Temperature Transitions**<br>B0h<br>The Composite Temperature has transition from a temperature that is greater than an<br>under temperature threshold to a temperature that is less than or equal to an under<br>temperature threshold.<br>F0h to FFh<br>Vendor specific <br>All other<br>values<br>Reserved|


|Value|Definition|
|---|---|
|**High Temperature Transitions**|**High Temperature Transitions**|
|1h|The Composite Temperature has transitioned from a temperature that is less than<br>WCTEMP to a temperature that is greater than or equal to WCTEMP.|
|2h|The Composite Temperature has transitioned from a temperature that is less than<br>CCTEMP to a temperature that is greater than or equal to CCTEMP.|
|3h|The Composite Temperature has transitioned from a temperature that is less than<br>TMT1 to a temperature is greater than or equal to TMT1 (i.e., vendor specific thermal<br>management actions that minimize the impact on performance, such as light throttling,<br>have started).|
|4h|The Composite Temperature has transitioned from a temperature that is less than<br>TMT2 to a temperature that is greater than or equal to TMT2 (i.e., vendor specific<br>thermal management actions that may impact performance, such as heavy throttling,<br>have started).|
|5h|The Composite Temperature has transitioned from a temperature where no vendor<br>specific thermal management actions are taken to a temperature that is greater than<br>or equal to a vendor specific temperature at which vendor specific thermal<br>management actions have started (e.g., self-throttling).|
|**Normal Temperature Transitions**|**Normal Temperature Transitions**|
|88h|The Composite Temperature has transitioned from a temperature that is greater than<br>or equal to WCTEMP or is less than or equal to an under temperature threshold to a<br>temperature that is between WCTEMP and that under temperature threshold (i.e., the<br>temperature has transitioned to a normal temperature).|
|89h|The Composite Temperature has transitioned from a temperature that is greater than<br>a temperature where thermal management actions are being performed and that is not<br>greater than or equal to WCTEMP to a temperature where thermal management<br>actions are stopped.|
|**Low Temperature Transitions**|**Low Temperature Transitions**|
|B0h|The Composite Temperature has transition from a temperature that is greater than an<br>under temperature threshold to a temperature that is less than or equal to an under<br>temperature threshold.|
|F0h to FFh|Vendor specific|
|All other<br>values|Reserved|



**5.1.12.1.14.2.14** **Sanitize Media Verification Event (Event Type 0Eh)**


A Sanitize Media Verification event shall be recorded in the Persistent Event log page upon transition to
the Media Verification state (refer to section 8.1.24.3.6).


No Event Data (refer to Figure 228) is defined for this event.


The Sanitize Media Verification event shall set the Persistent Event Log Event Header:


  - Event Type field to 0Eh;

  - Event Type Revision field to 01h; and

  - Event Length field to 0h.


**5.1.12.1.14.2.15** **Vendor Specific Event (Event Type DEh)**


The Vendor Specific Event (refer to Figure 250) contains a set of Vendor Specific Event Descriptors that
describe an event that the vendor has determined is a significant event which should be reported to a host
in the persistent event log and that is not described by any of the other persistent event log events.


248


NVM Express [®] Base Specification, Revision 2.2


The Vendor Specific Event Descriptors follow the format shown in Figure 251 and contain vendor specific
data of the type indicated in the Vendor Specific Event Data Type field of the Vendor Specific Event
Descriptor.


If a UUID Index is specified in the Get Log Page command (refer to section 5.1.12), then the controller shall
return:


a) Vendor specific events based on that UUID index; and
b) Vendor specific events defined by the NVM subsystem manufacturer.


The Sanitize Media Verification event shall set the Persistent Event Log Event Header:


  - Event Type field to DEh; and

  - Event Type Revision field to 01h.


The Vendor Specific Event data is specified in Figure 250.


**Figure 250: Vendor Specific Event Format (Event Type DEh)**









|Bytes|Description|
|---|---|
|**Vendor Specific Event Descriptor List**|**Vendor Specific Event Descriptor List**|
|M-1:0|**Vendor Specific Event Descriptor 0:** Contains the first vendor specific event descriptor (refer to<br>Figure 251). Where M is the length of this vendor specific event descriptor.|
|…|…|
|EL-VSIL-1:<br>EL-VSIL-K1|**Vendor Specific Event Descriptor N:** Contains the last vendor specific event descriptor (refer to<br>Figure 251). Where K is the length of this vendor specific event descriptor (refer to Figure 251).|
|Notes:<br>1.<br>Refer to Figure 228 for the definitions of EL and VSIL.|Notes:<br>1.<br>Refer to Figure 228 for the definitions of EL and VSIL.|


The format of the Vendor Specific Event Descriptor is shown in Figure 251.


**Figure 251: Vendor Specific Event Descriptor Format**







|Bytes|Description|
|---|---|
|01:00|**Vendor Specific Event Code (VSEC):** Contains a vendor specific code that uniquely identifies<br>the type of event that is described in the data that follows. All vendor specific events of the same<br>type should report the same Vendor Specific Event Code field value.|
|02|**Vendor Specific Event Data Type (VSEDT):** Contains a code indicating the type of data reported<br>in the Vendor Specific Event Data field (refer to Figure 252).|
|03|**UUID Index (UIDX):**UUID Index (refer to Figure 659) at the time of this event for the vendor that<br>defined this event.|
|05:04|**Vendor Specific Event Data Length (VSEDL)**: Contains the length in bytes of the Vendor<br>Specific Event Data field.|
|**Vendor Specific Event Data, if any (i.e., VSEDL > 0)**|**Vendor Specific Event Data, if any (i.e., VSEDL > 0)**|
|VSEDL+5:06|**Vendor Specific Event Data (VSED):** Contains vendor specific data that is associated with this<br>event and is of the type specified in the Vendor Specific Event Data Type field.|


The Vendor Specific Event Data Types that are able to be reported in a Vendor Specific Event Descriptor
are shown in Figure 252.


**Figure 252: Vendor Specific Event Data Type Codes**

|Value|Definition|
|---|---|
|00h|Reserved|



249


NVM Express [®] Base Specification, Revision 2.2


**Figure 252: Vendor Specific Event Data Type Codes**







|Value|Definition|
|---|---|
|01h|**Event Name:** The Vendor Specific Event Data field contains a null terminated ASCII string with a<br>vendor specific name for the value in the Vendor Specific Event Code field.<br>The value reported in this field shall be the same for every vendor specific event containing a vendor<br>specific event code that is the same as the value in the Vendor Specific Event Code field in this<br>event.<br>If a Vendor Specific Event Descriptor specifying this data type is reported, then that descriptor shall<br>be the first Vendor Specific Event Descriptor in that event.|
|02h|**ASCII String:** The Vendor Specific Event Data field contains a null terminated ASCII string.|
|03h|**Binary:** The Vendor Specific Event Data field contains binary data. The byte ordering in the binary<br>data is determined by the NVM subsystem vendor.|
|04h|**Signed Integer:** The Vendor Specific Event Data field contains a 64-bit signed integer in two’s<br>complement form.|
|05h to FFh|Reserved|


**5.1.12.1.14.2.16** **TCG Defined Event (Event Type DFh)**


The TCG Defined Event shall set the Persistent Event Log Event Header:


  - Event Type field to DFh.


The Event Type Revision Field and the TCG Defined Event data are reserved for TCG.


**5.1.12.1.15** **Endurance Group Event Aggregate (Log Page Identifier 0Fh)**


This log page indicates if an Endurance Group Event (refer to section 3.2.3) has occurred for a particular
Endurance Group. If an Endurance Group Event has occurred, the details of the particular event are
included in the Endurance Group Information log page for that Endurance Group. An asynchronous event
is generated when an entry for an Endurance Group is newly added to this log page.


If there is an enabled Endurance Group Event pending for an Endurance Group, then the Endurance Group
Event Aggregate log page includes an entry for that Endurance Group. The log page is an ordered list by
Endurance Group Identifier. For example, if Endurance Group Events are pending for Endurance Group 2,
1, and 7, then the log page shall have entries in numerical order of 1, 2, and 7. A particular Endurance
Group entry is removed from this log page after the Get Log Page command is completed successfully with
the Retain Asynchronous Event bit cleared to ‘0’ for the Endurance Group Information log page for that
Endurance Group.


The log page size is limited by the Endurance Group Identifier Maximum value reported in the Identify
Controller data structure (refer to Figure 313). If the host reads beyond the end of the log page, zeroes are
returned. The log page is defined in Figure 253.


**Figure 253: Endurance Group Event Aggregate Log Page**














|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Number of Entries (NUMENT):** This field indicates the number of entries in the list. The maximum<br>number of entries in the list corresponds to the Endurance Group Identifier Maximum field reported<br>in the Identify Controller data structure. A value of 0h indicates there are no entries in the list.|
|**Endurance Group Identified List**|**Endurance Group Identified List**|
|09:08|**Entry 1:** Indicates the Endurance Group that has an Endurance Group Event pending that has<br>the numerically smallest Endurance Group Identifier, if any.|
|11:10|**Entry 2:** Indicates the Endurance Group that has an Endurance Group Event pending that has<br>the second numerically smallest Endurance Group Identifier, if any.|
|…|…|
|2*NUMENT+7:<br>2*NUMENT+6|**Entry NUMENT:** Indicates the Endurance Group that has an Endurance Group Event pending<br>that has the numerically largest Endurance Group Identifier, if any.|



250


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.16** **Media Unit Status (Log Page Identifier 10h)**


This log page is used to describe the configuration and wear of Media Units (refer to section 8.1.4). The log
page contains one Media Unit Status Descriptor for each Media Unit accessible by the specified domain.
Each Media Unit Status Descriptor (refer to Figure 256 ) indicates the configuration of the Media Unit (e.g.,
to which Endurance Group the Media Unit is assigned, to which NVM Set the Media Unit is assigned, to
which Channels the Media Unit is attached) and indications of wear (e.g., the Available Spare field and the
Percentage Used field). The indications of wear change as the Media Unit is written and read.


If the NVM subsystem supports multiple domains, then the controller reports the Media Unit Status log page
for the domain specified in the Log Specific Identifier field (refer to Figure 254), if accessible. If the
information is not accessible, then the log page is not available (refer to section 8.1.1.10). If the Log Specific
Identifier field is cleared to 0h, then the specified domain is the domain containing the controller that is
processing the command.


Media Unit Identifier values (refer to Figure 256) begin with 0h and increase sequentially. If the NVM
subsystem supports multiple domains, then the Media Unit Identifier values are unique within the specified
domain. If the NVM subsystem does not support multiple domains, then the Media Unit Identifier values are
unique within the NVM subsystem.


Media Unit Status Descriptors are listed in ascending order by Media Unit Identifier.


Requirements for supporting the Media Unit Status log page are defined in section 8.1.4.


**Figure 254: Domain Identifier – Log Specific Identifier**





|Bits|Description|
|---|---|
|15:00|**Domain Identifier (DID)**: This field specifies the identifier for the domain (refer to section 3.2.5) used for<br>this log page.<br>If the NVM subsystem does not support multiple domains, then this field is reserved.<br>If this field specifies a non-zero Domain Identifier that is not reported in the Domain List (refer to section<br>5.1.13.2.15), then the controller shall abort the command with a status code of Invalid Field in Command.|


**Figure 255: Media Unit Status Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|01:00|**Number of Media Unit Status Descriptors (NMU):** This field indicates the number of Media Unit Status<br>Descriptors in the log page. If this field is cleared to 0h, then no Media Unit Status Descriptors are<br>reported.|
|03:02|**Number of Channels (CCHANS):** This field indicates the number of Channels accessible by the<br>controller. A value of 0h indicates that the number of Channels accessible by the controller is not reported.|
|05:04|**Selected Configuration (SELC):** This field indicates the Configuration Identifier selected by the most<br>recent successful completion of the Capacity Management command Select Capacity Configuration<br>operation. If a Select Capacity Configuration operation has not been completed, this field may indicate a<br>non-zero value (i.e., a configuration was selected by default). If a Configuration Identifier is not selected,<br>then this field shall be cleared to 0h.|
|15:06|Reserved|
|**Media Unit Status Descriptor List**|**Media Unit Status Descriptor List**|
|NOTE 1|**Media Unit Status Descriptor 0:** This field contains the first Media Unit Status Descriptor (refer to Figure<br>256), if any.|
|NOTE 1|**Media Unit Status Descriptor 1:** This field contains the second Media Unit Status Descriptor, if any.|
|…|…|
|NOTE 1|**Media Unit Status Descriptor NMU-1:** This field contains the last Media Unit Status Descriptor, if any.|
|Notes:<br>1.<br>Media Unit Status Descriptors may be different lengths.|Notes:<br>1.<br>Media Unit Status Descriptors may be different lengths.|


The Media Unit Status Descriptor is defined in Figure 256.


251


NVM Express [®] Base Specification, Revision 2.2


If the Selected Configuration field is cleared to 0h, then the following fields in each Media Unit Status
Descriptor shall be cleared to 0h:


a) Endurance Group Identifier (ENDGID);
b) NVM Set Identifier (NVMSETID);
c) Capacity Adjustment Factor; and
d) Number of Channels (MUCS).


Channel Identifier values begin with 0h and increase sequentially. If the NVM subsystem supports multiple
domains, then Channel Identifier values are unique within the specified domain. If the NVM subsystem does
not support multiple domains, then Channel Identifier values are unique within the NVM subsystem.


In the Media Unit Status Descriptor, Channel Identifiers are listed in ascending order by value, and each
Channel Identifier shall appear only once.


**Figure 256: Media Unit Status Descriptor**







|Bytes|Description|
|---|---|
|**Header**|**Header**|
|01:00|**Media Unit Identifier (MUID):** This field indicates the identifier of the Media Unit.|
|03:02|**Domain Identifier (DID):** This field indicates the identifier of the domain that contains this<br>Media Unit. Refer to section 3.2.5.3. A value of 0h indicates that a Domain Identifier is not<br>reported. If multiple domains are not supported, then this field shall be cleared to 0h.|
|05:04|**Endurance Group Identifier (ENDGID):**This field indicates the identifier of the Endurance<br>Group that contains this Media Unit. Refer to section 3.2.3. The value shall be less than or<br>equal to the value of the Endurance Group Identifier Maximum field (refer to Figure 313). A<br>value of 0h indicates that this Media Unit is not part of an Endurance Group.|
|07:06|**NVM Set Identifier (NVMSETID):** This field indicates the identifier of the NVM Set that<br>contains this Media Unit. Refer to section 3.2.2. This field shall indicate a value less than or<br>equal to the value of the NVM Set Identifier Maximum field (refer to Figure 313).<br>If the controller does not support NVM Sets, then this field shall be cleared to 0h.|
|09:08|**Capacity Adjustment Factor (CAF):** This field indicates the capacity adjustment factor (refer<br>to section 8.1.4.1) for this Endurance Group.<br>A value of FFFFh indicates that value and all higher values.<br>A value of 0h indicates that the Capacity Adjustment Factor is not reported.<br>All Media Unit Status Descriptors which indicate the same Endurance Group Identifier shall<br>indicate the same value in their Capacity Adjustment Factor fields.|
|10|**Available Spare (AVSP):**Contains a normalized percentage (0 to 100%) of the remaining<br>spare capacity available for the Media Unit. The relationship between this value and the value<br>in the Available Spare field in the Endurance Group Information log page (refer to section<br>5.1.12.1.10) is outside the scope of this specification.|
|11|**Percentage Used (PUSED):** Contains a vendor specific estimate of the percentage of life<br>used for the Media Unit based on the actual usage and the manufacturer’s prediction of NVM<br>life. A value of 100 indicates that the estimated endurance of the NVM in the Media Unit has<br>been consumed, but may not indicate an NVM failure. The value is allowed to exceed 100.<br>Percentages greater than 254 shall be represented as 255. This value shall be updated once<br>per power-on hour when the controller is not in a sleep state.<br>Refer to the JEDEC JESD218B-02 standard for SSD device life and endurance measurement<br>techniques.<br>The relationship between this value and the value in the Percentage Used field in the<br>Endurance Group Information log page is outside the scope of this specification.|
|12|**Number of Channels (MUCS):** This field indicates the number of Channels attached to this<br>Media Unit. If this field is cleared to 0h, then no Channel Identifiers are reported for this Media<br>Unit.|
|13|**Channel Identifiers Offset (CIO):** This field indicates the offset of the Channel 0 Identifier<br>field from the beginning of the Media Unit Status Descriptor. This field shall be a non-zero<br>value and a multiple of 16.|
|CIO-1:14|Reserved|


252


NVM Express [®] Base Specification, Revision 2.2


**Figure 256: Media Unit Status Descriptor**








|Bytes|Description|
|---|---|
|**Channel Identifier List**|**Channel Identifier List**|
|CIO+1 : CIO|**Channel 0 Identifier:** This field contains the identifier for the first Channel attached to this<br>Media Unit, if any.|
|CIO+3 : CIO+2|**Channel 1 Identifier:** This field contains the identifier for the second Channel attached to this<br>Media Unit, if reported, if any.|
|…|…|
|(MUCS*2)+CIO-1 :<br>(MUCS*2)+CIO-2|**Channel MUCS-1 Identifier:** This field contains the identifier for the last Channel attached to<br>this Media Unit, if any.|



**5.1.12.1.17** **Supported Capacity Configuration List (Log Page Identifier 11h)**


This log page is used to provide a list of Supported Capacity Configuration Descriptors (refer to Figure 257).
Each entry in the list defines a different configuration of Endurance Groups supported by the domain
specified in the Log Specific Identifier field in Command Dword 11 of the Get Log Page command as defined
in Figure 254.


If the NVM subsystem supports multiple domains, then the controller reports the Supported Capacity
Configuration List log page for the domain specified in the Log Specific Identifier field (refer to Figure 199),
if accessible. If the information is not accessible, then the log page is not available (refer to section 8.1.1.3).
If the Log Specific Identifier field is cleared to 0h, then the specified domain is the domain containing the
controller that is processing the command.


If the NVM subsystem supports multiple domains, then Capacity Configuration Identifier values are unique
within the specified domain. If the NVM subsystem does not support multiple domains, then Capacity
Configuration Identifier values are unique within the NVM subsystem.


In the Supported Capacity Configuration List (refer to Figure 257), Capacity Configuration Descriptors shall
be listed in ascending order by Capacity Configuration Identifier, and each Capacity Configuration Identifier
shall appear only once.


**Figure 257: Supported Capacity Configuration List Log Page**

|Bytes|Description|
|---|---|
|**Header**|**Header**|
|0|**Number of Supported Capacity Configurations (SCCN):** This field indicates the number of<br>Capacity Configuration Descriptors in the list. If this field is cleared to 0h, then no Capacity<br>Configuration Descriptors are reported.|
|15:1|Reserved|
|**Capacity Configuration Descriptor List**|**Capacity Configuration Descriptor List**|
|NOTE 1|**Capacity Configuration 0 Descriptor:** This field indicates the first Capacity Configuration<br>Descriptor (refer to Figure 258) in the list, if any.|
|NOTE 1|**Capacity Configuration 1 Descriptor:** This field indicates the second Capacity Configuration<br>Descriptor in the list, if any.|
|…|…|
|NOTE 1|**Capacity Configuration SCCN-1 Descriptor:** This field indicates the last Capacity Configuration<br>Descriptor in the list, if any.|
|Notes:<br>1.<br>Capacity Configuration Descriptors may be different lengths.|Notes:<br>1.<br>Capacity Configuration Descriptors may be different lengths.|



The Capacity Configuration Descriptor (refer to Figure 258) indicates the details of a particular configuration
of Endurance Groups and contains one Endurance Group Configuration Descriptor for each Endurance
Group accessible by the controller processing the command.


In the Capacity Configuration Descriptor (refer to Figure 258), Endurance Group Configuration Descriptors
shall be listed in ascending order by Endurance Group Identifier, and each Endurance Group Identifier shall
appear only once.


253


NVM Express [®] Base Specification, Revision 2.2


**Figure 258: Capacity Configuration Descriptor**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|1:0|**Capacity Configuration Identifier (CCID):** This field indicates the identifier for this Capacity<br>Configuration.|
|3:2|**Domain Identifier (DID):** This field indicates the identifier of the domain (refer to section 3.2.5.3)<br>containing the Endurance Group configurations described by this Capacity Configuration<br>Descriptor. A value of 0h indicates that a Domain Identifier is not reported. If multiple domains are<br>not supported, then this field shall be cleared to 0h.|
|5:4|**Number of Endurance Group Configuration Descriptors (EGCN):** This field indicates the<br>number of Endurance Group Configuration Descriptors in the list. If this field is cleared to 0h, then<br>no Endurance Group Configuration Descriptors are reported.|
|31:6|Reserved|
|**Endurance Group Configuration Descriptor List**|**Endurance Group Configuration Descriptor List**|
|NOTE 1|**Endurance Group Configuration 0 Descriptor:** This field indicates the first Endurance Group<br>Configuration Descriptor (refer to Figure 259) in the list, if any.|
|NOTE 1|**Endurance Group Configuration 1 Descriptor:** This field indicates the second Endurance Group<br>Configuration Descriptor in the list, if any.|
|…|…|
|NOTE 1|**Endurance Group Configuration EGCN-1 Descriptor:** This field indicates the last Endurance<br>Group Configuration Descriptor in the list, if any.|
|Notes:<br>1.<br>Endurance Group Configuration Descriptors may be different lengths.|Notes:<br>1.<br>Endurance Group Configuration Descriptors may be different lengths.|


The Endurance Group Configuration Descriptor is defined in Figure 259.


In the Endurance Group Configuration Descriptor (refer to Figure 259), NVM Set Identifiers shall be listed
in ascending order by value, and each NVM Set Identifier shall appear only once.


In the Endurance Group Configuration Descriptor, Channel Configuration Descriptors shall be listed in
ascending order by Channel Identifier value, and each Channel Identifier shall appear only once.


**Figure 259: Endurance Group Configuration Descriptor**











|Bytes|Description|
|---|---|
|**Header**|**Header**|
|1:0|**Endurance Group Identifier (ENDGID):**This field indicates the identifier of the Endurance<br>Group (refer to section 3.2.3) described by this Endurance Group Configuration Descriptor.<br>This field shall indicate a value greater than or equal to 1h and less than or equal to the value<br>of the Endurance Group Identifier Maximum field (refer to Figure 313).|
|3:2|**Capacity Adjustment Factor (CADJF):** This field indicates the capacity adjustment factor<br>(refer to section 8.1.4.1) for this Endurance Group.<br>A value of FFFFh indicates that value and all higher values.<br>A value of 0h indicates that the Capacity Adjustment Factor is not reported.|
|15:4|Reserved|
|31:16|**Total Endurance Group Capacity (TEGCAP):** This field indicates the total NVM capacity in<br>this Endurance Group. The value is in bytes. If this field is cleared to 0h, then the NVM<br>subsystem does not report the total NVM capacity in this Endurance Group.|
|47:32|**Spare Endurance Group Capacity (SEGCAP):** This field indicates the spare NVM capacity<br>in this Endurance Group. The value is in bytes. If this field is cleared to 0h, then the NVM<br>subsystem does not report the unallocated NVM capacity in this Endurance Group.|


254


NVM Express [®] Base Specification, Revision 2.2


**Figure 259: Endurance Group Configuration Descriptor**





















|Bytes|Description|
|---|---|
|63:48|**Endurance Estimate (EE):** This field is an estimate of the total number of data bytes that may<br>be written to the Endurance Group over the lifetime of the Endurance Group assuming a write<br>amplification of 1 (i.e., no increase in the number of write operations performed by the device<br>beyond the number of write operations requested by a host). This value is reported in billions<br>(i.e., a value of 1h corresponds to 1,000,000,000 bytes written) and is rounded up (e.g., a value<br>of 1h indicates the number of bytes written is from 1 to 1,000,000,000, 2h indicates the number<br>of bytes written is from 1,000,000,001 to 2,000,000,000).<br>A value of FFFFFFFF_FFFFFFFF_FFFFFFFF_FFFFFFFFh means that value and all higher<br>values.<br>A value of 0h indicates that the Endurance Estimate is not reported.<br>The relationship between this value and the value in the Endurance Estimate field in the<br>Endurance Group Information log page (refer to section 5.1.12.1.10) is outside the scope of<br>this specification.|
|79:64|Reserved|
|**NVM Set Information**|**NVM Set Information**|
|81:80|**Number of NVM Sets (EGSETS):** This field indicates the number of NVM Set Identifiers in<br>this Endurance Group Configuration Descriptor. A value of 0h indicates that no NVM Set<br>Identifiers are reported for this Endurance Group.|
|**NVM Set Identifier List**|**NVM Set Identifier List**|
|83:82|**NVM Set 0 Identifier:** This field indicates the identifier of the first NVM Set assigned to this<br>Endurance Group, if reported. Refer to section 3.2.2.|
|85:84|**NVM Set 1 Identifier:** This field indicates the identifier of the second NVM Set assigned to this<br>Endurance Group, if reported.|
|…|…|
|(EGSETS*2)+81 :<br>(EGSETS*2)+80|**NVM Set EGSETS-1 Identifier:** This field indicates the identifier of the last NVM Set assigned<br>to this Endurance Group, if reported.|
|**Channel Configuration Information**|**Channel Configuration Information**|
|(EGSETS*2)+83 :<br>(EGSETS*2)+82|**Number of Channels (EGCHANS):** This field indicates the number of Channel Configuration<br>Descriptors in this Endurance Group Configuration Descriptor. If this field is cleared to 0h, then<br>no Channel Configuration Descriptors are reported for this Endurance Group.|
|**Channel Configuration Descriptor List**|**Channel Configuration Descriptor List**|
|NOTE 1|**Channel 0 Configuration Descriptor:** This field contains the Channel Configuration<br>Descriptor (refer to Figure 260) for the first Channel in this Endurance Group, if any.|
|NOTE 1|**Channel 1 Configuration Descriptor:** This field contains the Channel Configuration<br>Descriptor for the second Channel in this Endurance Group, if any.|
|…|…|
|NOTE 1|**Channel EGCHANS-1 Configuration Descriptor:** This field contains the Channel<br>Configuration Descriptor for the last Channel in this Endurance Group, if any.|
|Notes:<br>1.<br>Channel Configuration Descriptors may be different lengths.|Notes:<br>1.<br>Channel Configuration Descriptors may be different lengths.|


The Channel Configuration Descriptor (refer to Figure 260) lists the Media Units attached to a Channel.
Media Unit Configuration Descriptors (refer to Figure 261) shall be listed in ascending order by Media Unit
Identifier, and each Media Unit Identifier shall appear only once.


**Figure 260: Channel Configuration Descriptor**





|Bytes|Description|
|---|---|
|**Header**|**Header**|
|1:0|**Channel Identifier (CHID):** This field indicates the identifier of this Channel. A value of FFFFh indicates<br>that the Channel Identifier is not specified.|
|3:2|**Number of Channel Media Units (CHMUS):** This field indicates the number of Media Units that are<br>attached to this Channel. If this field is cleared to 0h, then no Media Unit Configuration Descriptors are<br>reported for this Channel.|


255


NVM Express [®] Base Specification, Revision 2.2


**Figure 260: Channel Configuration Descriptor**



|Bytes|Description|
|---|---|
|**Media Unit Configuration Descriptor List**|**Media Unit Configuration Descriptor List**|
|NOTE 1|**Media Unit 0 Configuration Descriptor:** This field contains the Media Unit Configuration Descriptor<br>(refer to Figure 261) for the first Media Unit attached to this Channel, if any.|
|NOTE 1|**Media Unit 1 Configuration Descriptor:** This field contains the Media Unit Configuration Descriptor for<br>the second Media Unit attached to this Channel, if reported.|
|…|…|
|NOTE 1|**Media Unit CHMUS-1 Configuration Descriptor:** This field contains the Media Unit Configuration<br>Descriptor for the last Media Unit attached to this Channel, if any.|
|Notes:<br>1.<br>Media Unit Configuration Descriptors may be different lengths.|Notes:<br>1.<br>Media Unit Configuration Descriptors may be different lengths.|


The Media Unit Configuration Descriptor is defined in Figure 261.


**Figure 261: Media Unit Configuration Descriptor**






|Bytes|Description|
|---|---|
|1:0|**Media Unit Identifier (MUID):** This field indicates the identifier of this Media Unit.|
|5:2|Reserved|
|7:6|**Media Unit Descriptor Length (MUDL):** This field contains the length in bytes of the descriptor<br>information that follows. The total length of the Media Unit Configuration Descriptor in bytes is the value<br>in this field plus 8.<br>This field shall be cleared to 0h.|



**5.1.12.1.18** **Feature Identifiers Supported and Effects (Log Page Identifier 12h)**


An NVM subsystem may support several interfaces for submitting a Get Log Page command such as an
Admin Submission Queue, PCIe VDM Management Endpoint, or 2-Wire Management Endpoint (refer the
NVM Express Management Interface Specification for details on Management Endpoints) and may have
zero or more instances of each of those interfaces. The feature identifiers (FIDs) supported on each
instance of each interface may be different. This log page describes the FIDs that are supported on the
interface to which the Get Log Page command was submitted and the effects of those features on the state
of the NVM subsystem. The log page is defined in Figure 262. Each Feature Identifier’s effects are
described in a FID Supported and Effects data structure defined in Figure 263.


If the UUID Selection Supported bit is set to ‘1’ for the Get Log Page command in the Commands Supported
and Effects log page (refer to section 5.1.12.1.6), then the log page data reflects the FIDs that are supported
based on the value of the UUID Index field (refer to section 8.1.28).


If the Feature Identifiers Supported and Effects log page is supported and the Feature is supported, then
the scope, as defined in Figure 386, shall be indicated in the FID Scope field (FSP) for that Feature (refer
to Figure 263).


For controllers that implement I/O Queues, the features that the controller supports are dependent on the
I/O Command Set that is based on:


  - the I/O Command Set selected in CC.CSS, if CC.CSS is not set to 110b; and

  - the Command Set Identifier (CSI) field in CDW 14, if CC.CSS is set to 110b.


If CC.CSS is set to 110b, I/O Command Sets that have not been enabled by the I/O Command Set Profile
(FID 19h) (refer to section 5.1.25.1.17) are treated as unsupported.


**Figure 262: Feature Identifiers Effects Log Page**

|Bytes|Description|
|---|---|
|03:00|**Feature Identifier Supported 0 (FIS0):** Contains the FID Supported and Effects data structure (refer<br>to Figure 263) for FID 0h.|



256


NVM Express [®] Base Specification, Revision 2.2


**Figure 262: Feature Identifiers Effects Log Page**

|Bytes|Description|
|---|---|
|07:04|**Feature Identifier Supported 1 (FIS1):**Contains the FID Supported and Effects data structure (refer<br>to Figure 263) for FID 1h.|
|…|…|
|1019:1016|**Feature Identifier Supported 254 (FIS254):**Contains the FID Supported and Effects data structure<br>(refer to Figure 263) for FID FEh.|
|1023:1020|**Feature Identifier Supported 255 (FIS255):**Contains the FID Supported and Effects data structure<br>(refer to Figure 263) for FID FFh.|



The FID Supported and Effects data structure describes the effect of a Set Features command for the FID,
including any optional features of the FID.


**Figure 263: FID Supported and Effects Data Structure**








|Bits|Description|
|---|---|
|11:7|Reserved|
|6|**Controller Data Queue (CDQSCP)**: If this bit is set to ‘1’, then modifying the attributes<br>of the feature identified by this FID may impact a Controller Data Queue (refer to 8.1.6).<br>If this bit is cleared to ‘0’ and the FSP field is non-zero, then modifying the attributes of<br>the feature identified by this FID does not impact a Controller Data Queue.|
|5|**NVM Subsystem Scope (NSSCPE)**: If this bit is set to ‘1’, then modifying the attributes<br>of the feature identified by this FID may impact the whole NVM subsystem. If this bit is<br>cleared to ‘0’ and the FSP field is non-zero, then modifying the attributes of the feature<br>identified by this FID does not impact the whole NVM subsystem.|
|4|**Domain Scope (DSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact a single Domain. If this bit is cleared to ‘0’ and<br>the FSP field is non-zero, then modifying the attributes of the feature identified by this<br>FID does not impact a single Domain.|
|3|**Endurance Group Scope (EGSCPE)**: If this bit is set to ‘1’, then modifying the attributes<br>of the feature identified by this FID may impact Endurance Groups. If this bit is cleared<br>to ‘0’ and the FSP field is non-zero, then modifying the attributes of the feature identified<br>by this FID does not impact Endurance Groups.|
|2|**NVM Set Scope (NSETSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact NVM Sets. If this bit is cleared to ‘0’ and the<br>FSP field is non-zero, then modifying the attributes of the feature identified by this FID<br>does not impact NVM Sets.|
|1|**Controller Scope (CSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact the controller. If this bit is cleared to ‘0’ and the<br>FSP field is non-zero, then the feature identified by this FID does not have controller<br>scope.|
|0|**Namespace Scope (NSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact namespaces. If this bit is cleared to ‘0’ and the<br>FSP field is non-zero, then modifying the attributes of the feature identified by this FID<br>does not impact namespaces.|





|Bits|Description|
|---|---|
|31:20|**FID Scope (FSP):** This field defines the scope for the associated feature identifier. If the value of this<br>field is 0h, then no scope is reported. If this field is non-zero, then only one bit shall be set to ‘1’.<br>**Bits**<br>**Description**<br>11:7<br>Reserved<br>6 <br>**Controller Data Queue (CDQSCP)**: If this bit is set to ‘1’, then modifying the attributes<br>of the feature identified by this FID may impact a Controller Data Queue (refer to 8.1.6).<br>If this bit is cleared to ‘0’ and the FSP field is non-zero, then modifying the attributes of<br>the feature identified by this FID does not impact a Controller Data Queue.<br>5 <br>**NVM Subsystem Scope (NSSCPE)**: If this bit is set to ‘1’, then modifying the attributes<br>of the feature identified by this FID may impact the whole NVM subsystem. If this bit is<br>cleared to ‘0’ and the FSP field is non-zero, then modifying the attributes of the feature<br>identified by this FID does not impact the whole NVM subsystem. <br>4 <br>**Domain Scope (DSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact a single Domain. If this bit is cleared to ‘0’ and<br>the FSP field is non-zero, then modifying the attributes of the feature identified by this<br>FID does not impact a single Domain.<br>3 <br>**Endurance Group Scope (EGSCPE)**: If this bit is set to ‘1’, then modifying the attributes<br>of the feature identified by this FID may impact Endurance Groups. If this bit is cleared<br>to ‘0’ and the FSP field is non-zero, then modifying the attributes of the feature identified<br>by this FID does not impact Endurance Groups.<br>2 <br>**NVM Set Scope (NSETSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact NVM Sets. If this bit is cleared to ‘0’ and the<br>FSP field is non-zero, then modifying the attributes of the feature identified by this FID<br>does not impact NVM Sets.<br>1 <br>**Controller Scope (CSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact the controller. If this bit is cleared to ‘0’ and the<br>FSP field is non-zero, then the feature identified by this FID does not have controller<br>scope.<br>0 <br>**Namespace Scope (NSCPE)**: If this bit is set to ‘1’, then modifying the attributes of the<br>feature identified by this FID may impact namespaces. If this bit is cleared to ‘0’ and the<br>FSP field is non-zero, then modifying the attributes of the feature identified by this FID<br>does not impact namespaces.|
|19|**UUID Selection Supported (USS):** If this bit is set to ‘1’, then the controller supports the selection of<br>a UUID (refer to section 8.1.28) by a Get Features command or a Set Features command using this<br>FID.<br>If this bit is cleared to ‘0’, then the controller does not support the selection of a UUID by a Get<br>Features command or a Set Features command using this FID.|
|18:05|Reserved|


257


NVM Express [®] Base Specification, Revision 2.2


**Figure 263: FID Supported and Effects Data Structure**






|Bits|Description|
|---|---|
|04|**Controller Capability Change (CCC):**If this bit is set to ‘1’, then changing the attributes of the feature<br>identified by this FID may change controller capabilities. Controller capability changes include a<br>firmware update that changes the capabilities reported in the CAP property.<br>If this bit is cleared to ‘0’, then changing the attributes of the feature identified by this FID does not<br>modify controller capabilities.|
|03|**Namespace Inventory Change (NIC):**If this bit is set to ‘1’, then changing the attributes of the feature<br>identified by this FID may change the number of namespaces or capabilities for multiple namespaces.<br>Namespace inventory changes include adding or removing namespaces.<br>If this bit is cleared to ‘0’, then changing the attributes of the feature identified by this FID does not<br>modify the number of namespaces or capabilities for multiple namespaces.|
|02|**Namespace Capability Change (NCC):**If this bit is set to ‘1’, then changing the attributes of the<br>feature identified by this FID may change the capabilities of a single namespace. Namespace<br>capability changes include a logical format change.<br>If this bit is cleared to ‘0’, then changing the attributes of the feature identified by this FID does not<br>modify any namespace capabilities for the specified namespace.|
|01|**User Data Content Change (UDCC):**If this bit is set to ‘1’, then changing the attributes of the feature<br>identified by this FID may modify user data content in one or more namespaces.<br>If this bit is cleared to ‘0’, then changing the attributes of the feature identified by this FID does not<br>modify user data content in any namespace.|
|00|**FID Supported (FSUPP):**If this bit is set to ‘1’, then this FID is supported by the controller.<br>If this bit is cleared to ‘0’, then this FID is not supported by the controller and all other fields in this<br>structure shall be cleared to 0h.<br>Refer to section 3.1.3.6 for the FID support requirements for each controller type.|



**5.1.12.1.19** **NVMe-MI Commands Supported and Effects (Log Page Identifier 13h)**


This log page describes the Management Interface Command Set commands (refer to the NVM Express
Management Interface Specification) that the controller supports using the NVMe-MI Send and NVMe-MI
Receive commands and the effects of those Management Interface Command Set commands on the state
of the NVM subsystem. The log page is defined in Figure 264.


**Figure 264: NVMe-MI Commands Supported and Effects Log Page**













|Bytes|Description|
|---|---|
|03:00|**Management Interface Command Supported 0 (MICS0):**Contains the NVMe-MI Commands<br>Supported and Effects data structure (refer to Figure 265) for the Management Interface command<br>with an opcode value of 0h.|
|07:04|**Management Interface Command Supported 1 (MICS1):**Contains the NVMe-MI Commands<br>Supported and Effects data structure (refer to Figure 265) for the Management Interface command<br>with an opcode value of 1h.|
|…|…|
|1019:1016|**Management Interface Command Supported 254 (MICS254):**Contains the NVMe-MI<br>Commands Supported and Effects data structure (refer to Figure 265) for the Management<br>Interface command with an opcode value of 254.|
|1023:1020|**Management Interface Command Supported 255 (MICS255):**Contains the NVMe-MI<br>Commands Supported and Effects data structure (refer to Figure 265) for the Management<br>Interface command with an opcode value of 255.|
|4095:1024|Reserved|


The NVMe-MI Commands Supported and Effects data structure describes the overall possible effect of a
Management Interface command using the using the NVMe-MI Send command, including any optional
features of the command.


258


NVM Express [®] Base Specification, Revision 2.2


**Figure 265: NVMe-MI Commands Supported and Effects Data Structure**










|Bits|Description|
|---|---|
|11:6|Reserved|
|5|**NVM Subsystem Scope (NSSCPE)**: If this bit is set to ‘1’, then the command<br>performs actions that may impact the whole NVM subsystem. If this bit is cleared to<br>‘0’ and the CSP field is non-zero, then the command performs actions that do not<br>impact the whole NVM subsystem.|
|4|**Domain Scope (DSCPE)**: If this bit is set to ‘1’, then the command has Domain<br>scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the command<br>does not have Domain scope.|
|3|**Endurance Group Scope (EGSCPE)**: If this bit is set to ‘1’, then the command has<br>Endurance Group scope. If this bit is cleared to ‘0’ and the CSP field is non-zero,<br>then the command does not have Endurance Group scope.|
|2|**NVM Set Scope (NSETSCPE)**: If this bit is set to ‘1’, then the command has NVM<br>Set scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the command<br>does not have NVM Set scope.|
|1|**Controller Scope (CSCPE)**: If this bit is set to ‘1’, then the command has controller<br>scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the command<br>does not have controller scope.|
|0|**Namespace Scope (NSCPE)**: If this bit is set to ‘1’, then the command has<br>namespace scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the<br>command does not have namespace scope.|






|Bits|Description|
|---|---|
|31:20|**Command Scope (CSP):** This field defines the scope for the associated NVMe-MI Send command<br>that specifies the Management Interface command opcode for this data structure. If the value of this<br>field is 0h, then no scope is reported. If this field is non-zero, then only one bit shall be set to ‘1’.<br>**Bits**<br>**Description**<br>11:6<br>Reserved<br>5 <br>**NVM Subsystem Scope (NSSCPE)**: If this bit is set to ‘1’, then the command<br>performs actions that may impact the whole NVM subsystem. If this bit is cleared to<br>‘0’ and the CSP field is non-zero, then the command performs actions that do not<br>impact the whole NVM subsystem. <br>4 <br>**Domain Scope (DSCPE)**: If this bit is set to ‘1’, then the command has Domain<br>scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the command<br>does not have Domain scope.<br>3 <br>**Endurance Group Scope (EGSCPE)**: If this bit is set to ‘1’, then the command has<br>Endurance Group scope. If this bit is cleared to ‘0’ and the CSP field is non-zero,<br>then the command does not have Endurance Group scope.<br>2 <br>**NVM Set Scope (NSETSCPE)**: If this bit is set to ‘1’, then the command has NVM<br>Set scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the command<br>does not have NVM Set scope.<br>1 <br>**Controller Scope (CSCPE)**: If this bit is set to ‘1’, then the command has controller<br>scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the command<br>does not have controller scope.<br>0 <br>**Namespace Scope (NSCPE)**: If this bit is set to ‘1’, then the command has<br>namespace scope. If this bit is cleared to ‘0’ and the CSP field is non-zero, then the<br>command does not have namespace scope.|
|19:05|Reserved|
|04|**Controller Capability Change (CCC):**If this bit is set to ‘1’, then this command may change controller<br>capabilities. If this bit is cleared to ‘0’, then this command does not modify controller capabilities.<br>Controller capability changes include a firmware update that changes the capabilities reported in the<br>CAP property.|
|03|**Namespace Inventory Change (NIC):**If this bit is set to ‘1’, then this command may change the<br>number of namespaces or capabilities for multiple namespaces. If this bit is cleared to ‘0’, then this<br>command does not modify the number of namespaces or capabilities for multiple namespaces.<br>Namespace inventory changes include adding or removing namespaces.|
|02|**Namespace Capability Change (NCC):**If this bit is set to ‘1’, then this command may change the<br>capabilities of a single namespace. If this bit is cleared to ‘0’, then this command does not modify any<br>namespace capabilities for the specified namespace. Namespace capability changes include a logical<br>format change.|
|01|**User Data Content Change (UDCC):**If this bit is set to ‘1’, then this command may modify user data<br>content in one or more namespaces. If this bit is cleared to ‘0’, then this command does not modify<br>user data content in any namespace. User data content changes include a write operation.|
|00|**Command Supported (CSUPP):**If this bit is set to ‘1’, then this command is supported by the<br>controller. If this bit is cleared to ‘0’, then this command is not supported by the controller and all other<br>fields in this structure shall be cleared to 0h.|



**5.1.12.1.20** **Command and Feature Lockdown (Log Page Identifier 14h)**


This log page is used to indicate which commands and Set Features Feature Identifiers are supported to
be prohibited from execution using the Command and Feature Lockdown capability (refer to section 8.1.5)
and which commands are currently prohibited if received on an Admin Submission Queue or received outof-band on a Management Endpoint (refer to the NVM Express Management Interface Specification). This
log page uses the Log Specific Parameter field in Command Dword 10 (refer to Figure 198) as defined in
Figure 266. This log page may use the UUID Index field in the Get Log Page command to specify the scope
and content of the list returned in the Command and Feature Identifier List field of this log page. The UUID
Index field may be used if the Scope field is set to 2h, allowing returning of vendor specific Set Features
Feature Identifier lockdown information.


259


NVM Express [®] Base Specification, Revision 2.2


**Figure 266: Command and Feature Lockdown Log Specific Parameter Field**






|Value|Command and Feature Identifier List Definition|
|---|---|
|00b|List of command opcodes or Feature Identifiers specified by the Scope field that are able<br>to be prohibited.|
|01b|List of command opcodes or Feature Identifiers specified by the Scope field that are<br>currently prohibited if received on an Admin submission queue.|
|10b|List of command opcodes or Feature Identifiers specified by the Scope field that are<br>currently prohibited if received out-of-band on a Management Endpoint.|
|11b|Reserved|


|Bits|Description|
|---|---|
|14|Reserved|
|13:12|**Contents (CNTTS**): This field in combination with the Scope field specifies the contents of the<br>Command and Feature Identifier List field in the log page.<br>**Value**<br>**Command and Feature Identifier List Definition**<br>00b<br>List of command opcodes or Feature Identifiers specified by the Scope field that are able<br>to be prohibited.<br>01b<br>List of command opcodes or Feature Identifiers specified by the Scope field that are<br>currently prohibited if received on an Admin submission queue.<br>10b<br>List of command opcodes or Feature Identifiers specified by the Scope field that are<br>currently prohibited if received out-of-band on a Management Endpoint.<br>11b<br>Reserved|
|11:08|**Scope (SCP):**This field in combination with the Contents field specifies the contents of the<br>Command and Feature Identifier List field in the log page.<br>**Value**<br>**Command and Feature Identifier List Definition**<br>0h<br>List of Admin Command Set opcodes<br>1h<br>Reserved<br>2h<br>List of Feature Identifiers<br>3h<br>List of Management Interface Command Set opcodes (refer to the NVM Express<br>Management Interface Specification)<br>4h<br>List of PCIe Command Set opcodes (refer to the NVM Express Management Interface<br>Specification)<br>5h to Fh<br>Reserved|


|Value|Command and Feature Identifier List Definition|
|---|---|
|0h|List of Admin Command Set opcodes|
|1h|Reserved|
|2h|List of Feature Identifiers|
|3h|List of Management Interface Command Set opcodes (refer to the NVM Express<br>Management Interface Specification)|
|4h|List of PCIe Command Set opcodes (refer to the NVM Express Management Interface<br>Specification)|
|5h to Fh|Reserved|



If a UUID Index is specified in the Get Log Page command (refer to section 5.1.12) and the Scope field is
set to 2h, then the controller should return vendor specific Set Features lockdown information based on that
UUID index. If the Scope field is not set to 2h, then the controller ignores the UUID index field.


If a controller processes this command with the Contents field set to 10b and the NVM subsystem does not
contain a Management Endpoint, then the command shall be aborted with a status code of Invalid Field in
Command.


The log page returned is defined in Figure 267.


260


NVM Express [®] Base Specification, Revision 2.2


**Figure 267: Command and Feature Lockdown Log Page**














|Value|Definition|
|---|---|
|00b|List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope Selected field that are supported to be prohibited|
|01b|List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope Selected field that are currently prohibited if received on an<br>Admin submission queue|
|10b|List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope field that are currently prohibited if received out-of-band on a<br>Management Endpoint|
|11b|Reserved|




|Bits|Description|
|---|---|
|7:6|Reserved|
|5:4|**Contents Selected (CS)**: This field in combination with the Scope Selected field<br>indicates the contents of the Command and Feature Identifier List field in the log page.<br>The Content Selected field is specified by the contents of the Contents field in the Log<br>Specific Parameter field of the Get Log Page command.<br>**Value**<br>**Definition**<br>00b<br>List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope Selected field that are supported to be prohibited<br>01b<br>List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope Selected field that are currently prohibited if received on an<br>Admin submission queue<br>10b<br>List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope field that are currently prohibited if received out-of-band on a<br>Management Endpoint<br>11b<br>Reserved|
|3:0|**Scope Selected (SS):**This field in combination with the Contents Selected field<br>indicates what the Command and Feature Identifier List field contains in the log page.<br>The Scope Selected field is specified by the contents of the Scope field in the Log<br>Specific Parameter field of the Get Log Page command.<br>**Value**<br>**Definition**<br>0h<br>List contains Admin Command Set opcodes<br>1h<br>Reserved<br>2h<br>List contains Set Features Feature Identifiers<br>3h<br>List contains Management Interface Command Set opcodes<br>4h<br>List contains PCIe Command Set opcodes<br>5h to Fh<br>Reserved|


|Value|Definition|
|---|---|
|0h|List contains Admin Command Set opcodes|
|1h|Reserved|
|2h|List contains Set Features Feature Identifiers|
|3h|List contains Management Interface Command Set opcodes|
|4h|List contains PCIe Command Set opcodes|
|5h to Fh|Reserved|







|Bytes|Description|
|---|---|
|0|**Command and Feature Identifier List Attributes (CFILA):** This field indicates the contents of the<br>Command and Feature Identifier List field in the log page.<br>**Bits**<br>**Description**<br>7:6<br>Reserved<br>5:4<br>**Contents Selected (CS)**: This field in combination with the Scope Selected field<br>indicates the contents of the Command and Feature Identifier List field in the log page.<br>The Content Selected field is specified by the contents of the Contents field in the Log<br>Specific Parameter field of the Get Log Page command.<br>**Value**<br>**Definition**<br>00b<br>List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope Selected field that are supported to be prohibited<br>01b<br>List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope Selected field that are currently prohibited if received on an<br>Admin submission queue<br>10b<br>List contains command opcodes or Set Features Feature Identifiers based<br>on the Scope field that are currently prohibited if received out-of-band on a<br>Management Endpoint<br>11b<br>Reserved<br>3:0<br>**Scope Selected (SS):**This field in combination with the Contents Selected field<br>indicates what the Command and Feature Identifier List field contains in the log page.<br>The Scope Selected field is specified by the contents of the Scope field in the Log<br>Specific Parameter field of the Get Log Page command.<br>**Value**<br>**Definition**<br>0h<br>List contains Admin Command Set opcodes<br>1h<br>Reserved<br>2h<br>List contains Set Features Feature Identifiers<br>3h<br>List contains Management Interface Command Set opcodes<br>4h<br>List contains PCIe Command Set opcodes<br>5h to Fh<br>Reserved|
|2:1|Reserved|
|3|**Length (LNGTH):**This field indicates the length in bytes (n) of the Command and Feature Identifier<br>List field that follow in the log page. If the Command and Feature Identifier List field contains no<br>coded values, then this field shall be cleared to 0h.|
|n+3:4|**Command and Feature Identifier List (CFIL)**: The contents of this field are dependent on the<br>setting of the Contents Selected field and Scope Selected field. This field contains a list of coded<br>values identified by the Scope Selected field and the Content Selected field. The list shall be in order<br>from lowest numerical value to highest numerical value.|
|511:n+4|Reserved|


**5.1.12.1.21** **Boot Partition (Log Page Identifier 15h)**


The Boot Partition log page provides read only access to the Boot Partition (refer to section 8.1.3)
accessible by this controller through the BPRSEL register (refer to section 3.1.4.14).


This log page consists of a header describing the Boot Partition and Boot Partition data as defined by Figure
269. The Boot Partition Identifier bit in the Log Specific Parameter field determines the Boot Partition.


A host reading this log page has no effects on the BPINFO (refer to section 3.1.4.13), BPRSEL, and BPMBL
(refer to section 3.1.4.15) registers.


The Log Specific Parameter field in Command Dword 10 (refer to Figure 198) for this log page is defined
in Figure 268.


261


NVM Express [®] Base Specification, Revision 2.2


**Figure 268: Boot Partition Log Specific Parameter Field**

|Bits|Description|
|---|---|
|14:09|Reserved|
|08|**Boot Partition Identifier (BPID):** This bit specifies the Boot Partition identifier for the Boot<br>Partition to return.|



**Figure 269: Boot Partition Log Page**







|Bytes|Description|
|---|---|
|**Boot Partition Header**|**Boot Partition Header**|
|00|**Log Page Identifier (LID):** This field shall be set to 15h.|
|03:01|Reserved|
|07:04|**Boot Partition Information (BPINFO):**This field indicates the characteristics of Boot<br>Partitions.<br>**Bits**<br>**Description**<br>31<br>**Active Boot Partition ID (ABPID):**This bit indicates the identifier of the<br>active Boot Partition.<br>30:15<br>Reserved<br>14:00<br>**Boot Partition Size (BPSZ):**This field indicates the size of the Boot Partition<br>Data field in multiples of 128 KiB.|
|15:08|Reserved|
|**Boot Partition Data**|**Boot Partition Data**|
|BPSZ*128 KiB + 15:16|**Boot Partition Data (BPD):** Contains the contents of the specified Boot Partition.|


|Bits|Description|
|---|---|
|31|**Active Boot Partition ID (ABPID):**This bit indicates the identifier of the<br>active Boot Partition.|
|30:15|Reserved|
|14:00|**Boot Partition Size (BPSZ):**This field indicates the size of the Boot Partition<br>Data field in multiples of 128 KiB.|


**5.1.12.1.22** **Rotational Media Information Log (Log Page Identifier 16h)**


This log page provides rotational media information (refer to section 8.1.23) for Endurance Groups that
store data on rotational media. The information provided is retained across power cycles and resets.


The Endurance Group Identifier is specified in the Log Specific Identifier field in Command Dword 11 of the
Get Log Page command as defined in Figure 218.


If the NVM subsystem does not contain any Endurance Groups that store data on rotational media, then
the Rotational Media Information Log should not be supported.


**Figure 270: Rotational Media Information Log Page**








|Value|Definition|
|---|---|
|0000h|Not reported|
|0001h|This value is prohibited to maintain backward compatibility with other standards.<br>This value shall not be used.|
|FFFFh|Reserved|
|All other values|Nominal rotational speed in revolutions per minute while the current Power State is<br>0 (refer to section 5.1.25.1.2).|





|Bytes|Description|
|---|---|
|1:0|**Endurance Group Identifier (ENDGID):**The Endurance Group Identifier specified by the Get Log Page<br>command.|
|3:2|**Number of Actuators (NUMA):**Contains the number of actuators in this Endurance Group.|
|5:4|**Nominal Rotational Speed (NRS)**: <br>**Value**<br>**Definition**<br>0000h<br>Not reported<br>0001h<br>This value is prohibited to maintain backward compatibility with other standards.<br>This value shall not be used.<br>FFFFh<br>Reserved<br>All other values<br>Nominal rotational speed in revolutions per minute while the current Power State is<br>0 (refer to section 5.1.25.1.2).|
|7:6|Reserved|
|11:8|**Spinup Count (SPINC):** Contains the total number of successful spinup events for this Endurance Group<br>over the lifetime of the Endurance Group. If the Spinup Count is less than FFFFFFFFh, then the controller<br>shall increment this count by one for each successful spinup event.<br>A successful spinup event occurs when the controller power state transitions from a non-operational<br>power state to an operational power state.|


262


NVM Express [®] Base Specification, Revision 2.2


**Figure 270: Rotational Media Information Log Page**







|Bytes|Description|
|---|---|
|15:12|**Failed Spinup Count (FSPINC):** Contains the total number of failed spinup events for this Endurance<br>Group over the lifetime of the Endurance Group. If the Failed Spinup Count is less than FFFFFFFFh, then<br>the controller shall increment this count by one for each failed spinup event.<br>A failed spinup event occurs when the controller fails an attempt to transition from a non-operational<br>power state to an operational power state.|
|19:16|**Load Count (LDC):** Contains the total number successful actuator load events for this Endurance Group<br>over the lifetime of the Endurance Group. If the Load Count is less than FFFFFFFFh, then the controller<br>shall increment this count by one for each successful actuator load event.<br>A successful actuator load event occurs if an actuator transitions from a non-operational state to an<br>operational state.|
|23:20|**Failed Load Count (FLDC):** Contains the number of failed actuator load events for this Endurance Group<br>over the lifetime of the Endurance Group. If the Failed Load Count is less than FFFFFFFFh, then the<br>controller shall increment this count by one for each failed actuator load event.<br>A failed actuator load event occurs if an actuator fails an attempt to transition from a non-operational state<br>to an operational state.|
|511:24|Reserved|


**5.1.12.1.23** **Dispersed Namespace Participating NVM Subsystems (Log Page Identifier 17h)**


This log page is used to provide a list of NQNs for all participating NVM subsystems which contain
controllers that are able to provide access to the dispersed namespace for the specified NSID. A typical
Dispersed Namespace implementation uses Fabrics based NVM subsystems.


If an NSID of 0h or FFFFFFFFh is specified by the host in the Get Log Page command, then the controller
shall abort that command with a status code of Invalid Namespace or Format as described in Figure 92. If
the NSID specified by the host in the Get Log Page command is associated with a namespace that is not
a dispersed namespace (i.e., the Dispersed Namespace (DISNS) bit is cleared to ‘0’ in the Namespace
Multi-path I/O and Namespace Sharing Capabilities (NMIC) field of the I/O Command Set Independent
Identify Namespace data structure (refer to Figure 320) or the Identify Namespace data structure
associated with that namespace), then the controller shall abort that command with a status code of Invalid
Field in Command as described in section 5.1.12.


The method used by the NVM subsystem containing the controller processing the command to discover
the NQNs of separate participating NVM subsystems which contain controllers that are able to provide
access to the same dispersed namespace is outside the scope of this specification.


The log page returned is defined in Figure 271. Each entry in the Participating NVM Subsystems List shall
contain an NQN that matches the NQN contained in the NVM Subsystem NVMe Qualified Name (SUBNQN)
field of that participating NVM subsystem’s Identify Controller data structure (refer to Figure 313). The
Participating NVM Subsystem Entry 0 field (i.e., first entry in the Participating NVM Subsystems List) shall
contain the NQN of the NVM subsystem containing the controller processing the command.


**Figure 271: Dispersed Namespace Participating NVM Subsystems Log Page**







|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Generation Counter (GENCTR):**This field contains a value that is incremented each time<br>the participating NVM subsystem information for the specified NSID changes (i.e., each time<br>participating NVM subsystems are added or removed for the specified NSID) since the last<br>time the host read this log page. If the value of this field is FFFFFFFF_FFFFFFFFh, then<br>the field shall be cleared to 0h when incremented (i.e., rolls over to 0h).|
|15:08|**Number of Participating NVM Subsystems (NUMPSUB):**This field indicates the number<br>of participating NVM subsystems contained in the log page.|
|255:16|Reserved|


263


NVM Express [®] Base Specification, Revision 2.2


**Figure 271: Dispersed Namespace Participating NVM Subsystems Log Page**






|Bytes|Description|
|---|---|
|**Participating NVM Subsystems List**|**Participating NVM Subsystems List**|
|511:256|**Participating NVM Subsystem Entry 0:**This field contains the NQN of the NVM subsystem<br>containing the controller processing the command.|
|767:512|**Participating NVM Subsystem Entry 1:**This field contains the NQN of a participating NVM<br>subsystem that contains controllers that are able to provide access to the dispersed<br>namespace.|
|…|…|
|(((N + 2) * 256) – 1):<br>((N + 1) * 256)|**Participating NVM Subsystem Entry N:**This field contains the NQN of a participating NVM<br>subsystem that contains controllers that are able to provide access to the dispersed<br>namespace.|



**5.1.12.1.24** **Management Address List (Log Page Identifier 18h)**


This log consists of a Management Address List (refer to Figure 272) of up to eight Management Address
Descriptors (refer to Figure 273). Management addresses are described in section 8.1.14.


**Figure 272: Management Address List – Log Page**









|Bytes|Description|
|---|---|
|511:00|**Management Address Descriptor 0 (MAD0):**This field contains the first Management Address<br>Descriptor (refer to Figure 273), if any. If the Management Address Type field is set to FFh, then<br>subsequent Management Address Descriptors are reserved.|
|1023:512|**Management Address Descriptor 1 (MAD1):** This field contains the second Management Address<br>Descriptor (refer to Figure 273), if any. If the Management Address Type field is set to FFh, then<br>subsequent Management Address Descriptors are reserved.|
|…|…|
|4095:3584|**Management Address Descriptor 7 (MAD7):** This field contains the last Management Address<br>Descriptor (refer to Figure 273), if any.|


Figure 273 describes the Management Address Descriptor.


**Figure 273: Management Address Descriptor**












|Value|Definition|
|---|---|
|0h|The Management Address field is reserved.|
|1h|The Management Address field contains the address of a management agent in the<br>NVM subsystem (e.g., in an Ethernet-attached SSD).|
|2h|The Management Address field contains the address of a fabric interface manager<br>(e.g., a Service URI for the Simple Network Management Protocol (SNMPv3) agent<br>as defined in RFC 4088).|
|FFh|The Management Address field is reserved and all subsequent Management<br>Address Descriptors, if any, are reserved.|
|Other values|Reserved|






|Bytes|Description|
|---|---|
|00|**Management Address Type (MAT):** This field describes the contents of the Management Address<br>field:<br>**Value** <br>**Definition** <br>0h<br>The Management Address field is reserved.<br>1h<br>The Management Address field contains the address of a management agent in the<br>NVM subsystem (e.g., in an Ethernet-attached SSD).<br>2h<br>The Management Address field contains the address of a fabric interface manager<br>(e.g., a Service URI for the Simple Network Management Protocol (SNMPv3) agent<br>as defined in RFC 4088).<br>FFh<br>The Management Address field is reserved and all subsequent Management<br>Address Descriptors, if any, are reserved.<br>Other values<br>Reserved|
|03:01|Reserved|
|511:04|**Management Address (MADRS):**A uniform resource indicator (URI; refer to RFC 3986) as a UTF-8<br>null-terminated string, containing the address of a management entity of the type indicated by the MAT<br>field.|



Because the list is able to contain from zero to eight Management Address Descriptors with a MAT field
less than FFh, a host scans the list starting with Management Address Descriptor 0, and ending with either
Management Address Descriptor 7 or a Management Address Descriptor having a MAT field set to FFh.


264


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.25** **Reachability Groups (Log Identifier 1Ah)**


This log page consists of a header describing the log page and a list of descriptors containing the
Reachability Groups (refer to section 8.1.19) that contain namespaces attached to the controller processing
this command that all have the same reachability attributes.


If the Index Offset Supported bit is cleared to ‘0’ in the LID Support and Effects data structure for this log
page (refer to Figure 205), then:


  - if the RGO bit is cleared to ‘0’ in Command Dword 10, then the LPOL field in Command Dword 12
and the LPOU field in Command Dword 13 of the Get Log Page command should be cleared to
0h.


If the Index Offset Supported bit is set to ‘1’ in the LID Supported and Effects data structure for this log page
(refer to Figure 205), then:


  - for indexes greater than 0, the entry data structure that is indexed is a Reachability Group descriptor
(e.g., specifying an index offset of 2 returns this log page starting at the second descriptor (i.e.,
Reachability Group Descriptor 1)); and

  - for index 0, the data structure starting from the beginning of the log page is returned.


If the host performs multiple Get Log Page commands to read this log page (e.g., using the LPOL field or
the LPOU field), then the host should re-read the header of the log page and ensure that the Change Count
field in the log page matches the original value read. If it does not match, then the data captured is not
consistent and this log page should be re-read.


The Log Specific Parameter field in Command Dword 10 (refer to Figure 198) for this log page is defined
in Figure 274.


**Figure 274: Reachability Groups Log Specific Parameter Field**





|Bits|Description|
|---|---|
|14:09|Reserved|
|08|**Return Groups Only (RGO):** If this bit is set to ‘1’, then the controller shall return Reachability Group<br>Descriptors with the Number of NSID Values field in each Reachability Group Descriptor cleared to 0h<br>(i.e., no Namespace Identifiers are returned). If this bit is cleared to ‘0’, then the controller shall return<br>Reachability Group Descriptors that contain the Namespace Identifiers of attached namespaces that are<br>members of the Reachability Group described by that Reachability Group Descriptor and the Number of<br>NSID Values field set to the number of Namespace Identifier values in that Reachability Group<br>Descriptor.|


**Figure 275: Reachability Groups Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Change Count (CHNGC):** This field contains a 64-bit incrementing Reachability Groups log page<br>change count, indicating an identifier for this set of reachability groups information. The count starts at<br>0h following a Controller Level Reset and is incremented each time the contents of the log page change.<br>If the value of this field is FFFFFFFF_FFFFFFFFh, then the field shall be set to 0h when incremented<br>(i.e., rolls over to 0h).|
|09:08|**Number of Reachability Group Descriptors (NRGD):** This field indicates the number of Reachability<br>Group Descriptors available in the log page. The log page shall contain one Reachability Group<br>Descriptor for each Reachability Group that contains namespaces that are attached to the controller.<br>If, for a Reachability Group, there are no namespaces attached to the controller processing the<br>command, then no Reachability Group Descriptor is returned for that Reachability Group (i.e., a<br>Reachability Group Descriptor is returned only if that Reachability Group contains namespaces that are<br>attached to the controller processing the command).<br>If no namespaces are attached to the controller, then the log page does not contain any Reachability<br>Group Descriptors and this field shall be cleared to 0h.|
|15:10|Reserved|


265


NVM Express [®] Base Specification, Revision 2.2


**Figure 275: Reachability Groups Log Page**

|Bytes|Description|
|---|---|
|**Reachability Group Descriptor List**|**Reachability Group Descriptor List**|
|n:16|**Reachability Group Descriptor 0:** The first Reachability Group Descriptor (refer to Figure 276), if any.|
|m:n+1|**Reachability Group Descriptor 1:** The second Reachability Group Descriptor (refer to Figure 276), if<br>any.|
|…|…|
|x:y|**Reachability Group Descriptor NRGD-1:** The last Reachability Group Descriptor (refer to Figure 276),<br>if any.|



The format of the Reachability Group Descriptor is defined in Figure 276. Namespace Identifiers shall be
listed in ascending NSID order.


**Figure 276: Reachability Group Descriptor format**














|Bytes|Description|
|---|---|
|**Header**|**Header**|
|03:00|**Reachability Group ID (RGID):** The Reachability Group Identifier associated with<br>namespaces in the Reachability Group (refer to section 8.1.19) described by this Reachability<br>Group Descriptor.|
|07:04|**Number of NSID Values (NNID):** This field indicates the number of Namespace Identifier<br>values in this Reachability Group Descriptor.<br>If the RGO bit is set to ‘1’, then this field shall be cleared to 0h.|
|15:08|**Change Count (CHNGC):** This field contains a 64-bit incrementing count, indicating an<br>identifier for the information contained in this Reachability Group Descriptor. A value of 0h<br>indicates that the controller does not report a Change Count for this Reachability Group<br>Descriptor. If a Change Count is reported, then the count starts at 1h following a Controller<br>Level Reset and is incremented each time the data in this Reachability Group Descriptor<br>changes. If the value of this field is FFFFFFFF_FFFFFFFFh, then the field shall be set to 1h<br>when incremented (i.e., rolls over to 1h).<br>If this field contains 0h, the host should examine this Reachability Group Descriptor for any<br>changes and not use this field as an indicator that a change has occurred.|
|31:16|Reserved|
|**Namespace Identifier List**|**Namespace Identifier List**|
|35:32|**Namespace Identifier 0:** The Namespace Identifier of the first attached namespace, if any,<br>that is a member of this Reachability Group.|
|39:36|**Namespace Identifier 1:** The Namespace Identifier of the second attached namespace, if<br>any, that is a member of this Reachability Group.|
|…|…|
|(((NNID-1)*4) + 35):<br>(((NNID-1)*4) + 32)|**Namespace Identifier NNID-1:** The Namespace Identifier of the NNID attached namespace,<br>if any, that is a member of this Reachability Group.|



**5.1.12.1.26** **Reachability Associations (Log Identifier 1Bh)**


This log page consists of a header describing the log page and a list of descriptors containing the
Reachability Associations (refer to section 8.1.19), for the controller processing the Get Log Page command
requesting the Reachability Associations log page, that contain Reachability Groups (refer 5.1.12.1.25) that
all have the same reachability attributes.


If the Index Offset Supported bit is cleared to ‘0’ in the LID Support and Effects data structure for this log
page (refer to Figure 205), then:


  - if the RAO bit is cleared to ‘0’ in Command Dword 10, then the LPOL field in Command Dword 12
and the LPOU field in Command Dword 13 of the Get Log Page command should be cleared to
0h.


If the Index Offset Supported bit is set to ‘1’ in the LID Supported and Effects data structure for this log page
(refer to Figure 205), then:


266


NVM Express [®] Base Specification, Revision 2.2


  - for indexes greater than 0, the entry data structure that is indexed is a Reachability Association
descriptor (e.g., specifying an index offset of 2 returns this log page starting at the second descriptor
(i.e., Reachability Association Descriptor 1)).


If the host performs multiple Get Log Page commands to read this log page (e.g., using the LPOL field or
the LPOU field), then the host should re-read the header of the log page and ensure that the Change Count
field in this log page matches the original value read. If it does not match, then the data captured is not
consistent and this log page should be re-read.


The Log Specific Parameter field in Command Dword 10 (refer to Figure 198) for this log page is defined
in Figure 277.


**Figure 277: Reachability Associations Log Specific Parameter Field**





|Bits|Description|
|---|---|
|14:09|Reserved|
|08|**Return Associations Only (RAO):** If this bit is set to ‘1’, then the controller shall return<br>Reachability Association Descriptors with the Number of RGID Values field in each Reachability<br>Association Descriptor cleared to 0h (i.e., no Reachability Group Identifiers are returned). If this<br>bit is cleared to ‘0’, then the controller shall return Reachability Association Descriptors that<br>contain the RGIDs of reachability groups that are members of the Reachability Association<br>described by that Reachability Association Descriptor and the Number of RGID Values field set<br>to the number of Reachability Group Identifier values in that Reachability Association Descriptor.|


**Figure 278: Reachability Associations Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Change Count (CHNGC):** This field contains a 64-bit incrementing Reachability Associations log<br>change count, indicating an identifier for this set of reachability associations information. The<br>count starts at 0h following a Controller Level Reset and is incremented each time the contents<br>of the log page change. If the value of this field is FFFFFFFF_FFFFFFFFh, then the field shall be<br>set to 0h when incremented (i.e., rolls over to 0h).|
|09:08|**Number of Reachability Association Descriptors (NRAD):** This field indicates the number of<br>Reachability Association Descriptors available in the log page. The log page shall contain one<br>Reachability Association Descriptor for each Reachability Association that contains a<br>Reachability Group that contains namespaces that are attached to the controller.<br>If, for a Reachability Association, there are no Reachability Groups that contains namespaces<br>that are attached to the controller processing the command, then no Reachability Association<br>Descriptor shall be returned for that Reachability Association (i.e., a Reachability Association<br>Descriptor is returned only if that Reachability Association contains Reachability Groups<br>associated with the controller processing the command.<br>If no namespaces are attached to the controller, then the log page does not contain any<br>Reachability Association Descriptors and this field shall be cleared to 0h.|
|15:10|Reserved|
|**Reachability Association Descriptor List**|**Reachability Association Descriptor List**|
|n:16|**Reachability Association Descriptor 0:** This is the first Reachability Association Descriptor<br>(Figure 279), if any.|
|m:n+1|**Reachability Association Descriptor 1:** This is the second Reachability Association Descriptor<br>(Figure 279), if any.|
|…|…|
|x:y|**Reachability Association Descriptor NRAD-1:** This is the last Reachability Association<br>Descriptor (Figure 279), if any.|


The format of the Reachability Association Descriptor is defined in Figure 279. Reachability Group
Identifiers shall be listed in ascending order.


267


NVM Express [®] Base Specification, Revision 2.2


**Figure 279: Reachability Association Descriptor format**














|Value|Definition|Reference|
|---|---|---|
|01h|Reachable with no performance<br>characteristics specified|8.1.19|
|02h|Fast<br>copy<br>operations<br>are<br>supported|The Fast copy operations section in the<br>NVM Command Set Specification|
|03h|Fast copy operations are not<br>supported|The Fast copy operations section in the<br>NVM Command Set Specification|
|All<br>other<br>values|Reserved|Reserved|










|Bytes|Description|
|---|---|
|**Header**|**Header**|
|03:00|**Reachability Association ID (RASID):** The Reachability Association Identifier associated<br>with Reachability Groups in the Reachability Association (refer to section 8.1.19) described<br>by this Reachability Association Descriptor.|
|07:04|**Number of RGID Values (NRID):** This field indicates the number of Reachability Group<br>Identifier values in this Reachability Association Descriptor.<br>If the RAO bit is set to ‘1’, then this field shall be cleared to 0h.|
|15:08|**Change Count (CHNGC):** This field contains a 64-bit incrementing count, indicating an<br>identifier for the information contained in this Reachability Association Descriptor. A value of<br>0h indicates that the controller does not report a Change Count for this Reachability<br>Association Descriptor. If a Change Count is reported, then the count starts at 1h following a<br>Controller Level Reset and is incremented each time the data in this Reachability Association<br>Descriptor changes. If the value of this field is FFFFFFFF_FFFFFFFFh, then the field shall<br>be set to 1h when incremented (i.e., rolls over to 1h).<br>If this field is cleared to 0h, then the host should examine this Reachability Association<br>Descriptor for any changes and not use this field as an indicator that a change has occurred.|
|16|**Reachability Association Characteristics (RAC):** This field indicates the Access<br>characteristics for all Reachability Groups in this Reachability Association Descriptor for<br>operations between the namespaces represented by the Reachability Groups.<br>**Value** <br>**Definition** <br>**Reference**<br>01h<br>Reachable with no performance<br>characteristics specified<br>8.1.19<br>02h<br>Fast<br>copy<br>operations<br>are<br>supported<br>The Fast copy operations section in the<br>NVM Command Set Specification<br>03h<br>Fast copy operations are not<br>supported<br>The Fast copy operations section in the<br>NVM Command Set Specification<br>All<br>other<br>values<br>Reserved|
|31:17|Reserved|
|**Reachability Group Identifier List**|**Reachability Group Identifier List**|
|35:32|**Reachability Group Identifier 0:** The Reachability Group Identifier of the first Reachability<br>Group, if any, that is a member of this Reachability Association.|
|39:36|**Reachability Group Identifier 1:**The Reachability Group Identifier of the second<br>Reachability Group, if any, that is a member of this Reachability Association.|
|…|…|
|(((NRID-1)*4)+35):<br>(((NRID-1)*4)+32)|**Reachability Group Identifier NRID-1:** The Reachability Group Identifier of the last<br>Reachability Group, if any, that is a member of this Reachability Association.|



**5.1.12.1.27** **Changed Allocated Namespace List (Log Identifier 1Ch)**


This log page is used to describe changes to allocated namespaces (refer to section 1.5.6), since the last
time that this log page was read, that:


a) have changed information in their Identify Namespace data structures (refer to section 1.5.49);
b) were previously unattached to the controller and have since been attached to the controller;
c) were previously attached to the controller and have since been unattached from the controller;
d) were created; and
e) were deleted.


The log page contains a Namespace List with up to 1,024 entries. If more than 1,024 namespaces have
changed attributes since the last time the log page was read, the first entry in the log page shall be set to
FFFFFFFFh and the remainder of the list shall be zero filled.


268


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.28** **Flexible Data Placement (FDP) Configurations (Log Page Identifier 20h)**


The FDP Configurations log page (refer to Figure 280) identifies a list of static FDP configurations that are
allowed to be applied to the specified Endurance Group. The Endurance Group Identifier in the Log Specific
Identifier field as defined in Figure 218 specifies the Endurance Group. The creation of an Endurance Group
or the enablement of an FDP configuration in an Endurance Group within the NVM subsystem may affect
which FDP configurations are currently allowed (refer to the FDP Configuration Valid bit in Figure 281).
Refer to section 8.1.10 for the usage of this log page by the host.


**Figure 280: FDP Configurations Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|01:00|**Number of FDP Configurations (NUMFDPC):** This field indicates the number of FDP<br>Configuration Descriptors contained in this log page. This is a 0’s based number.|
|02|**Version (VER):** This field indicates the version of the log page that includes the header and the<br>FDP Configuration Descriptor List. This field shall be cleared to 0h.|
|03|Reserved|
|07:04|**Size (SZE):** This field identifies the size of this log page in bytes.|
|15:08|Reserved|
|**FDP Configuration Descriptor List**|**FDP Configuration Descriptor List**|
|Variable Sized:<br>16|**FDP Configuration Descriptor 0:** The FDP Configuration Descriptor (refer to Figure 281) of the<br>first configuration.|
|Variable Sized|**FDP Configuration Descriptor 1:** The FDP Configuration Descriptor (refer to Figure 281) of the<br>second configuration, if any.|
|…|…|
|Variable Sized|**FDP Configuration Descriptor NUMFDPC-1:** The FDP Configuration Descriptor (refer to Figure<br>281) of the last configuration, if any.|


Figure 281 defines the format of an FDP Configuration Descriptor. The Reclaim Unit Handles in the Reclaim
Unit Handle list shall be listed in ascending order of Reclaim Unit Handle Identifier.


**Figure 281: FDP Configuration Descriptor**







|Bytes|Description|
|---|---|
|01:00|**Descriptor Size (DSZE):** This field indicates the size in bytes of this FDP Configuration<br>Descriptor.|
|02|**FDP Attributes (FDPA):**This field identifies attributes of this FDP configuration.<br>**Bits**<br>**Description**<br>7 <br>**FDP Configuration Valid (FDPCV):** This bit is set to ‘1’ to indicate that this FDP<br>configuration is valid. This bit is cleared to ‘0’ to indicate that this entry is not<br>currently available and the host should ignore this FDP configuration.<br>6:5<br>Reserved<br>4 <br>**FDP Volatile Write Cache (FDPVWC):** If this bit is set to ‘1’, then a volatile write<br>cache is present for this FDP configuration. If this bit is cleared to ‘0’, then a volatile<br>write cache is not present for this FDP configuration. Refer to section 5.1.25.1.4.<br>If the controller reports one or more FDP configurations with this bit set to ‘1’, then<br>the Volatile Write Cache Present (VWCP) bit in the Identify Controller data structure<br>(refer to Figure 313) shall be set to ‘1’. This results in the VWCP bit being set to ‘1’<br>even though there is no volatile write cache in the controller to support hosts not<br>aware of the Flexible Data Placement capability (refer to section 8.1.10).<br>Refer to section 7.2 to determine if a volatile write cache is present if a namespace<br>exists in an Endurance Group that has Flexible Data Placement enabled.<br>3:0<br>**Reclaim Group Identifier Format (RGIF):**This field identifies the number of most-<br>significant bits in the Placement Identifier that contain the Reclaim Group Identifier<br>(refer to Figure 283 and Figure 284). If the NRG field in this data structure is set to<br>1h (i.e., there is a single Reclaim Group), then this field may be cleared to 0h. If the<br>NRG field is greater than 1h, then this field shall be a non-zero value.|


|Bits|Description|
|---|---|
|7|**FDP Configuration Valid (FDPCV):** This bit is set to ‘1’ to indicate that this FDP<br>configuration is valid. This bit is cleared to ‘0’ to indicate that this entry is not<br>currently available and the host should ignore this FDP configuration.|
|6:5|Reserved|
|4|**FDP Volatile Write Cache (FDPVWC):** If this bit is set to ‘1’, then a volatile write<br>cache is present for this FDP configuration. If this bit is cleared to ‘0’, then a volatile<br>write cache is not present for this FDP configuration. Refer to section 5.1.25.1.4.<br>If the controller reports one or more FDP configurations with this bit set to ‘1’, then<br>the Volatile Write Cache Present (VWCP) bit in the Identify Controller data structure<br>(refer to Figure 313) shall be set to ‘1’. This results in the VWCP bit being set to ‘1’<br>even though there is no volatile write cache in the controller to support hosts not<br>aware of the Flexible Data Placement capability (refer to section 8.1.10).<br>Refer to section 7.2 to determine if a volatile write cache is present if a namespace<br>exists in an Endurance Group that has Flexible Data Placement enabled.|
|3:0|**Reclaim Group Identifier Format (RGIF):**This field identifies the number of most-<br>significant bits in the Placement Identifier that contain the Reclaim Group Identifier<br>(refer to Figure 283 and Figure 284). If the NRG field in this data structure is set to<br>1h (i.e., there is a single Reclaim Group), then this field may be cleared to 0h. If the<br>NRG field is greater than 1h, then this field shall be a non-zero value.|


269


NVM Express [®] Base Specification, Revision 2.2


**Figure 281: FDP Configuration Descriptor**















|Bytes|Description|
|---|---|
|03|**Vendor Specific Size (VSS):**This field identifies the size in bytes of the Vendor Specific<br>field.|
|07:04|**Number of Reclaim Groups (NRG):** This field indicates the number of Reclaim Groups in<br>this FDP configuration. This field shall be a non-zero value.|
|09:08|**Number of Reclaim Unit Handles (NRUH)**: This field identifies the number of Reclaim Unit<br>Handle Descriptors in the Reclaim Unit Handle List. This field shall be a non-zero value.|
|11:10|**Max Placement Identifiers (MAXPIDS):** This field indicates the maximum value allowed in<br>the Number of Placement Identifiers (NPID) field (refer to Figure 567) in an I/O Management<br>Send command for the Reclaim Unit Handle Update Operation (refer to section 7.4.1.1) for<br>this FDP configuration. This is a 0’s based number.<br>The value of this field shall be less than the product of the NRG field and the NRUH field.|
|15:12|**Number of Namespaces Supported (NNS):** This field indicates the number of namespaces<br>allowed to be created in the Endurance Group if Flexible Data Placement is enabled utilizing<br>this FDP configuration.<br>If the MNAN field is set to a value greater than 0h (refer to Figure 313), then this field shall<br>be less than or equal to the value in the MNAN field. If the MNAN field is cleared to 0h, then<br>this field shall be less than or equal to the value in the NN field (refer to Figure 313).|
|23:16|**Reclaim Unit Nominal Size (RUNS):** This field indicates the nominal size, in bytes, of each<br>Reclaim Unit of non-volatile storage within each Reclaim Group.|
|27:24|**Estimated Reclaim Unit Time Limit (ERUTL):** This field indicates the estimated maximum<br>time in seconds that a Reclaim Unit is allowed to be referenced by a Reclaim Unit Handle<br>(refer to section 3.2.4 and section 8.1.10) before the controller is allowed to modify the<br>Reclaim Unit Handle to reference a different Reclaim Unit. If this field is cleared to 0h, then<br>the Estimated Reclaim Unit Time Limit is not reported.|
|63:28|Reserved|
|**Reclaim Unit Handle Descriptor List**|**Reclaim Unit Handle Descriptor List**|
|67:64|**Reclaim Unit Handle Descriptor 0:** This field contains the Reclaim Unit Handle Descriptor<br>(refer to Figure 282) for Reclaim Unit Handle 0 (refer to Figure 70).|
|71:68|**Reclaim Unit Handle Descriptor 1:** This field contains the Reclaim Unit Handle Descriptor<br>(refer to Figure 282) for Reclaim Unit Handle 1 (refer to Figure 70), if any.|
|…|…|
|((NRUH-1)*4)+67:<br>((NRUH-1)*4)+64|**Reclaim Unit Handle Descriptor NRUH-1:** This field contains the Reclaim Unit Handle<br>Descriptor (refer to Figure 282) for Reclaim Unit Handle NRUH-1 (refer to Reclaim Unit<br>Handle_N_-1 in Figure 70), if any.|
|(NRUH*4)+63+VSS:<br>(NRUH*4)+64|**Vendor Specific (VS):** This field is valid if the VSS field is greater than 0h.|
|(NRUH*4)+64+VSS|**Pad (PAD):** Padding to align the size of this descriptor to the next 8-byte boundary, if<br>necessary. This field shall be cleared to 0h.|


**Figure 282: Reclaim Unit Handle Descriptor**







|Bytes|Description|
|---|---|
|00|**Reclaim Unit Handle Type (RUHT):** This field indicates the Reclaim Unit Handle type of the<br>Reclaim Unit Handle.<br>**Value**<br>**Definition**<br>0h<br>Reserved<br>1h<br>**Initially Isolated:**The user data from a write command that utilizes this type<br>of Reclaim Unit Handle is originally isolated in the referenced Reclaim Unit<br>from other user data in write commands that utilize a different Reclaim Unit<br>Handle in the same Reclaim Group. If the controller moves the user data due<br>to vendor specific operations (i.e., garbage collection), then the controller is<br>allowed to move that user data to a Reclaim Unit in the same Reclaim Group<br>that contains other user data moved by the controller that was written by the<br>host utilizing any Reclaim Unit Handle of the same type. Refer to section<br>8.1.10.|


|Value|Definition|
|---|---|
|0h|Reserved|
|1h|**Initially Isolated:**The user data from a write command that utilizes this type<br>of Reclaim Unit Handle is originally isolated in the referenced Reclaim Unit<br>from other user data in write commands that utilize a different Reclaim Unit<br>Handle in the same Reclaim Group. If the controller moves the user data due<br>to vendor specific operations (i.e., garbage collection), then the controller is<br>allowed to move that user data to a Reclaim Unit in the same Reclaim Group<br>that contains other user data moved by the controller that was written by the<br>host utilizing any Reclaim Unit Handle of the same type. Refer to section<br>8.1.10.|


270


NVM Express [®] Base Specification, Revision 2.2


**Figure 282: Reclaim Unit Handle Descriptor**

|Bytes|Description|Col3|Col4|Col5|
|---|---|---|---|---|
|||2h|**Persistently Isolated:**The user data from a write command that utilizes this<br>type of Reclaim Unit Handle is originally isolated in the referenced Reclaim<br>Unit from other user data in write commands that utilize a different Reclaim<br>Unit Handle. If the controller moves the user data due to vendor specific<br>operations (i.e., garbage collection), then the controller shall move that user<br>data to a Reclaim Unit in the same Reclaim Group that only contains user data<br>that was written by the host utilizing the same Reclaim Unit Handle. Refer to<br>section 8.1.10.||
|||3h to BFh|Reserved|Reserved|
|||C0h to FFh|Vendor Specific|Vendor Specific|
|03:01|Reserved|Reserved|Reserved|Reserved|



The format of the Placement Identifier used in the Data Placement Directive (refer to section 8.1.8.4) for a
specific FDP configuration is dependent on the number of Reclaim Groups supported by the FDP
configuration in use and the number of bits allocated for the Reclaim Group Identifier field. If the NRG field
(refer to Figure 281) is set to 1h indicating that there is only one Reclaim Group and zero bits are allocated
to the Reclaim Group Identifier (i.e., the RGIF field (refer to Figure 281) is cleared to 0h), then the format
of the Placement Identifier is defined in Figure 283. If one or more bits are allocated to the Reclaim Group
Identifier (i.e., the RGIF field is non-zero), then the format of the Placement Identifier is defined in Figure
284.


**Figure 283: Placement Identifier Format without Reclaim Group Identifier**

|Bits|Description|
|---|---|
|15:00|**Placement Handle (PHNDL):** This field specifies a Placement Handle associated with the<br>namespace that is used by the controller to determine the Reclaim Unit Handle.|



**Figure 284: Placement Identifier Format with a non-zero RGIF**







|Bits|Description|
|---|---|
|15:(16-RGIF)|**Reclaim Group Identifier (RGID):** This field specifies the Reclaim Group used by the write<br>command.<br>If the NRG field (refer to Figure 281) is set to 1h (i.e., there is only one Reclaim Group), then<br>this field shall be ignored by the controller.|
|(15-RGIF):00|**Placement Handle (PHNDL):** This field specifies a Placement Handle associated with the<br>namespace that is used by the controller to determine the Reclaim Unit Handle.|


**5.1.12.1.29** **Reclaim Unit Handle Usage (Log Page Identifier 21h)**


The Reclaim Unit Handle Usage log page (refer to Figure 285) is used to provide information about the
Reclaim Unit Handles associated with the Placement Handles of the namespaces in the specified
Endurance Group. The Endurance Group is specified by the Endurance Group Identifier field in the Log
Specific Identifier field as defined in Figure 218).


If Flexible Data Placement is enabled in the Endurance Group specified by the Endurance Group Identifier
field and a Get Log Page command specifies the Reclaim Unit Handle Usage log page, then the NSID field
in that command is reserved.


If Flexible Data Placement is disabled in the specified Endurance Group and the Get Log Page command
specifying this log page, then the controller shall abort the command with a status code of FDP Disabled.


271


NVM Express [®] Base Specification, Revision 2.2


**Figure 285: Reclaim Unit Handle Usage Log Page**












|Bytes|Description|
|---|---|
|**Header**|**Header**|
|01:00|**Number of Reclaim Unit Handles (NRUH)**: This field identifies the number of Reclaim Unit<br>Handle Usage Descriptors in the Reclaim Unit Handle Usage Descriptor List. This field shall be<br>a non-zero value.<br>This field shall be set to the value of the NRUH field in the current FDP configuration (refer to<br>Figure 281) for the specified Endurance Group.|
|07:02|Reserved|
|**Reclaim Unit Handle Usage Descriptor List**|**Reclaim Unit Handle Usage Descriptor List**|
|15:08|**Reclaim Unit Handle Usage Descriptor 0:** Contains the Reclaim Unit Handle Usage<br>Descriptor (refer to Figure 286) for Reclaim Unit Handle 0.|
|23:16|**Reclaim Unit Handle Usage Descriptor 1:** Contains the Reclaim Unit Handle Usage<br>Descriptor (refer to Figure 286) for Reclaim Unit Handle 1.|
|…|…|
|(NRUH-1)*8+15:<br>(NRUH-1)*8+8|**Reclaim Unit Handle Usage Descriptor NRUH-1:** Contains the Reclaim Unit Handle Usage<br>Descriptor (refer to Figure 286) for Reclaim Unit Handle NRUH-1.|



The Reclaim Unit Handle Usage Descriptor is defined in Figure 286.


**Figure 286: Reclaim Unit Handle Usage Descriptor**









|Bytes|Description|
|---|---|
|00|**Reclaim Unit Handle Attributes (RUHA):** This field identifies attributes associated with the<br>Reclaim Unit Handle Usage.<br>**Value**<br>**Definition**<br>0h<br>Not used by a namespace.<br>1h<br>**Host Specified:**The Reclaim Unit Handle Identifier is used by a namespace<br>created with a Namespace Management command explicitly requesting the<br>usage of this Reclaim Unit Handle (i.e., specifying a Placement Handle List).<br>2h<br>**Controller Specified:** The Reclaim Unit Handle Identifier is used by a<br>namespace created with a Namespace Management command requesting the<br>controller to select the one and only Reclaim Unit Handle (i.e., not specifying a<br>Placement Handle List).<br>3h to FFh<br>Reserved|
|07:01|Reserved|


|Value|Definition|
|---|---|
|0h|Not used by a namespace.|
|1h|**Host Specified:**The Reclaim Unit Handle Identifier is used by a namespace<br>created with a Namespace Management command explicitly requesting the<br>usage of this Reclaim Unit Handle (i.e., specifying a Placement Handle List).|
|2h|**Controller Specified:** The Reclaim Unit Handle Identifier is used by a<br>namespace created with a Namespace Management command requesting the<br>controller to select the one and only Reclaim Unit Handle (i.e., not specifying a<br>Placement Handle List).|
|3h to FFh|Reserved|


In the list of Reclaim Unit Handle Usage Descriptors, no more than one entry shall have the Reclaim Unit
Handle Attributes field set to Controller Specified (i.e., 2h).


**5.1.12.1.30** **Flexible Data Placement (FDP) Statistics (Log Page Identifier 22h)**


The FDP Statistics log page (refer to Figure 287) is used to provide information about the FDP configuration
over the life of the FDP configuration in an Endurance Group. The Endurance Group is specified by the
Endurance Group Identifier field in the Log Specific Identifier field as defined in Figure 218).


If Flexible Data Placement is enabled in the specified Endurance Group and the Get Log Page command
specifies this log page, then the NSID field in that command is reserved.


If Flexible Data Placement is disabled in the specified Endurance Group and the Get Log Page command
specifies this log page, then the controller shall abort the command with a status code of FDP Disabled.


272


NVM Express [®] Base Specification, Revision 2.2


**Figure 287: FDP Statistics Log Page**







|Bytes|Description|
|---|---|
|15:00|**Host Bytes with Metadata Written (HBMW):** Contains the total number of bytes of user data the host<br>has written to the specified Endurance Group as part of processing I/O commands as defined in the<br>appropriate I/O Command Set specification. This value does not include controller writes due to internal<br>operations such as garbage collection.<br>This field shall not wrap once the value FFFFFFFF_FFFFFFFF_FFFFFFFF_FFFFFFFFh is reached.<br>If the Flexible Data Placement Feature value is modified by a Set Features command, then this field<br>shall be cleared to 0h.|
|31:16|**Media Bytes with Metadata Written (MBMW):** Contains the total number of bytes of user data that<br>have been written to the specified Endurance Group including both host and controller writes (e.g.,<br>garbage collection and background media scan operations) as part of processing as defined in the<br>appropriate I/O Command Set specification.<br>This field shall not wrap once the value FFFFFFFF_FFFFFFFF_FFFFFFFF_FFFFFFFFh is reached.<br>If the Flexible Data Placement Feature value is modified by a Set Features command, then this field<br>shall be cleared to 0h.|
|47:32|**Media Bytes Erased (MBE):** Contains the total number of bytes of data that have been erased in the<br>specified Endurance Group.<br>This field shall not wrap once the value FFFFFFFF_FFFFFFFF_FFFFFFFF_FFFFFFFFh is reached.<br>If the Flexible Data Placement Feature value is modified by a Set Features command, then this field<br>shall be cleared to 0h.|
|63:48|Reserved|


The values reported in this log page are not cleared to 0h by a firmware update.


The values reported in this log page include operations on all namespaces that existed in the specified
Endurance Group since the Flexible Data Placement was last enabled in that Endurance Group (refer to
section 5.1.25.1.20).


**5.1.12.1.31** **Flexible Data Placement (FDP) Events (Log Page Identifier 23h)**


The FDP Events log page is used to provide information about events affecting Reclaim Units and media
usage in an Endurance Group that has Flexible Data Placement enabled. The log page is 4 KiB bytes in
size. The Endurance Group is specified by the Endurance Group Identifier in the Log Specific Identifier field
as defined in Figure 218.


FDP events are associated with Reclaim Unit Handles. An FDP event shall only be reported if the FDP
event occurs and that FDP event is enabled for that Reclaim Unit Handle (refer to section 5.1.25.1.21).


If:


  - an FDP event occurs;

  - that event is enabled; and

  - the number of events recorded is the maximum supported,


then the oldest event shall be discarded.


The FDP Event Type bit (refer to Figure 288) specifies whether the controller reports host events or
controller events in the log page. The controller shall not report both host events and controller events in
the log page.


If Flexible Data Placement is enabled in the specified Endurance Group and a Get Log Page command
specifies this log page, then the NSID field in that command is reserved.


If Flexible Data Placement is disabled in the specified Endurance Group, then a Get Log Page command
that specifies this log page shall be aborted with a status code of FDP Disabled.


273


NVM Express [®] Base Specification, Revision 2.2


**Figure 288: Command Dword 10 – Log Specific Field**





|Bits|Description|
|---|---|
|14:09|Reserved|
|08|**FDP Event Type (FDPET):** This bit specifies the type of events to be reported in the log page. If<br>this bit is set to ‘1’, then the controller shall report host events. If this bit is cleared to ‘0’, then the<br>controller shall report controller events.|


**Figure 289: FDP Events Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|03:00|**Number of FDP Events (NUMFDPE):** This field indicates the number of FDP events (refer<br>to Figure 290) contained in this log.<br>If Flexible Data Placement transitions from disabled to enabled in an Endurance Group, then<br>this field shall be cleared to 0h for that Endurance Group.|
|63:04|Reserved|
|**FDP Event List**|**FDP Event List**|
|127:64|**FDP Event 1:** The oldest FDP event, if any.|
|…|…|
|(NUMFDPC*64)+63:<br>(NUMFDPC*64)|**FDP Event NUMFDPC:** The most recent FDP event, if any.|


The FDP events shall be listed in ascending order of occurrence. Because the Timestamp feature may or
may not have been set by the host after each Controller Level Reset and because the Event Timestamp
field is the time at which the event was created, the FDP events may or may not be in order of ascending
value of the Event Timestamp field.


The number of FDP events reported in the log page is equal to the value of the Number of FDP Events
field. The values of the bytes in this log page which follow the FDP Event List is implementation specific.


The format of the FDP event is described in Figure 290.


**Figure 290: FDP Event**





|Bytes|Description|
|---|---|
|00|**Event Type (ETYP):** This field indicates the type of event:<br>**Value**<br>**O/M1 **<br>**ETS2 **<br>**Definition**<br>**Reference**<br>**Host Events**<br>0h<br>O <br>No<br>Reclaim Unit Not Fully Written To Capacity<br>5.1.12.1.31.1.1<br>1h<br>O <br>No<br>Reclaim Unit Time Limit Exceeded<br>5.1.12.1.31.1.2<br>2h<br>O <br>No<br>Controller Level Reset Modified Reclaim Unit<br>Handles<br>5.1.12.1.31.1.3<br>3h<br>O <br>No<br>Invalid Placement Identifier<br>5.1.12.1.31.1.4<br>4h to 6Fh<br> <br>Reserved<br>70h to 7Fh<br>O <br> <br>Vendor Specific Host Events<br>**Controller Events**<br>80h<br>O <br>Yes<br>Media Reallocated<br>5.1.12.1.31.2.1<br>81h<br>O <br>No<br>Implicitly Modified Reclaim Unit Handle<br>5.1.12.1.31.2.2<br>82h to EFh<br> <br>Reserved<br>F0h to FFh<br>O <br> <br>Vendor Specific Controller Events<br>Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Event Type Specific field: Yes = the field is utilized, No = the field is not utilized.<br>|


|Value|1<br>O/M|2<br>ETS|Definition|Reference|
|---|---|---|---|---|
|**Host Events**|**Host Events**|**Host Events**|**Host Events**|**Host Events**|
|0h|O|No|Reclaim Unit Not Fully Written To Capacity|5.1.12.1.31.1.1|
|1h|O|No|Reclaim Unit Time Limit Exceeded|5.1.12.1.31.1.2|
|2h|O|No|Controller Level Reset Modified Reclaim Unit<br>Handles|5.1.12.1.31.1.3|
|3h|O|No|Invalid Placement Identifier|5.1.12.1.31.1.4|
|4h to 6Fh||Reserved|Reserved|Reserved|
|70h to 7Fh|O||Vendor Specific Host Events|Vendor Specific Host Events|
|**Controller Events**|**Controller Events**|**Controller Events**|**Controller Events**|**Controller Events**|
|80h|O|Yes|Media Reallocated|5.1.12.1.31.2.1|
|81h|O|No|Implicitly Modified Reclaim Unit Handle|5.1.12.1.31.2.2|
|82h to EFh||Reserved|Reserved|Reserved|
|F0h to FFh|O||Vendor Specific Controller Events|Vendor Specific Controller Events|
|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Event Type Specific field: Yes = the field is utilized, No = the field is not utilized.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Event Type Specific field: Yes = the field is utilized, No = the field is not utilized.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Event Type Specific field: Yes = the field is utilized, No = the field is not utilized.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Event Type Specific field: Yes = the field is utilized, No = the field is not utilized.|Notes:<br>1.<br>O/M definition: O = Optional, M = Mandatory.<br>2.<br>Event Type Specific field: Yes = the field is utilized, No = the field is not utilized.|


274


NVM Express [®] Base Specification, Revision 2.2


**Figure 290: FDP Event**








|Bits|Description|
|---|---|
|07:03|Reserved|
|02|**Location Valid (LV):** If this bit is set to ‘1’, then the Reclaim Group Identifier field and the<br>Reclaim Unit Handle Identifier field contain a reported value. If this bit is cleared to ‘0’, then the<br>Reclaim Group Identifier field and the Reclaim Unit Handle Identifier field do not contain a<br>reported value.|
|01|**NSID Valid (NSIDV):** If this bit is set to ‘1’, then the NSID field contains a reported value. If this<br>bit is cleared to ‘0’, then the NSID field does not contain a reported value.|
|00|**Placement Identifier Valid (PIV):** If this bit is set to ‘1’, then the Placement Identifier field<br>contains a reported value. If this bit is cleared to ‘0’, then the Placement Identifier field does not<br>contain a reported value.|

















|Bytes|Description|
|---|---|
|01|**FDP Event Flags (FDPEF):**<br>**Bits**<br>**Description**<br>07:03<br>Reserved<br>02<br>**Location Valid (LV):** If this bit is set to ‘1’, then the Reclaim Group Identifier field and the<br>Reclaim Unit Handle Identifier field contain a reported value. If this bit is cleared to ‘0’, then the<br>Reclaim Group Identifier field and the Reclaim Unit Handle Identifier field do not contain a<br>reported value.<br>01<br>**NSID Valid (NSIDV):** If this bit is set to ‘1’, then the NSID field contains a reported value. If this<br>bit is cleared to ‘0’, then the NSID field does not contain a reported value.<br>00<br>**Placement Identifier Valid (PIV):** If this bit is set to ‘1’, then the Placement Identifier field<br>contains a reported value. If this bit is cleared to ‘0’, then the Placement Identifier field does not<br>contain a reported value.<br>|
|03:02|**Placement Identifier (PID):** This field indicates the Placement Identifier associated with the FDP event.<br>This field is reserved if the PIV bit is cleared to ‘0’.<br>If the FDP event is an Invalid Placement Identifier event (i.e., Event Type 03h), then this field is Placement<br>Identifier from the write command submitted by the host.|
|11:04|**Event Timestamp (ETMSP):** This field indicates a timestamp indicating the current value of the Timestamp<br>feature (refer to section 5.1.25.1.7) when this FDP event occurred. The format of this field is as defined in<br>Figure 397).|
|15:12|**Namespace Identifier (NSID):**This field indicates the identifier of the namespace associated with the FDP<br>event. If the NSIDV bit is cleared to ‘0’, then this field shall be cleared to 0h and the host should ignore this<br>field.|
|31:16|**Event Type Specific (ETSP):**Each Event Type indicates the use of this field and the format of this field.|
|33:32|**Reclaim Group Identifier (RGICD):**This field indicates the Reclaim Group associated with the event. If<br>the LV bit is cleared to ‘0’, then this field shall be cleared to 0h and the host should ignore this field.<br>If the FDP event is an Invalid Placement Identifier event (i.e., Event Type 03h), then this field indicates the<br>Reclaim Group selected by the controller.|
|35:34|**Reclaim Unit Handle Identifier (RUHID):**This field indicates the Reclaim Unit Handle associated with the<br>FDP event. If the LV bit is cleared to ‘0’, then this field shall be cleared to 0h and the host should ignore this<br>field.<br>If the FDP event is an Invalid Placement Identifier event (i.e., Event Type 03h), then this field indicates the<br>Reclaim Unit Handle selected by the controller.|
|39:36|Reserved|
|**Vendor Specific Information**|**Vendor Specific Information**|
|63:40|**Vendor Specific (VS):** This field may be used by any Event Type (i.e., this field is not only for Vendor<br>specific Event Types).|


If the controller is not able to report the namespace identifier associated with the event, then the NSIDV bit
shall be cleared to ‘0’.


If the controller is not able to report the specific Reclaim Unit Handle, then:


  - the PIV bit shall be cleared to ‘0’; and

  - the LV bit shall be cleared to ‘0’.


**Host Events**


**5.1.12.1.31.1.1 Reclaim Unit Not Fully Written To Capacity (Event Type 0h)**


This FDP event indicates that the Reclaim Unit Handle reported in the Placement Identifier (refer to Figure
283 and Figure 284) was modified to reference a different Reclaim Unit due to an I/O Management Send
command issued by the host prior to the previously referenced Reclaim Unit being written to capacity.


275


NVM Express [®] Base Specification, Revision 2.2


**5.1.12.1.31.1.2 Reclaim Unit Time Limit Exceeded (Event Type 1h)**


This FDP event indicates that the capacity of a Reclaim Unit was not completely written within the time
period defined in the Estimated Reclaim Unit Time Limit field (refer to Figure 281) due to the controller
modifying the Reclaim Unit Handle to reference a different Reclaim Unit.


**5.1.12.1.31.1.3 Controller Level Reset Modified Reclaim Unit Handles (Event Type 2h)**


This FDP event indicates that one or more Reclaim Unit Handles were modified to reference a different

Reclaim Unit due to a Controller Level Reset.


In the FDP event, the NSID field is reserved and the Placement Identifier field is reserved.


**5.1.12.1.31.1.4 Invalid Placement Identifier (Event Type 3h)**


This FDP event indicates that a write command specified an invalid Placement Identifier (refer to Figure
283 and Figure 284) due to an invalid Placement Handle or an invalid Reclaim Group Identifier.


**Controller Events**


**5.1.12.1.31.2.1 Media Reallocated (Event Type 80h)**


This FDP event indicates that user data contained in a Reclaim Unit was written by the host specifying a
Reclaim Unit Handle with a Reclaim Unit Handle type of Initially Isolated and was moved by the controller
to a different Reclaim Unit (e.g., controller performed garbage collection).


The Event Type Specific field is I/O Command Set specific. Refer to the applicable I/O Command Set
specification to determine if this log page is supported and the definition of the Event Type Specific field for
this FDP event.


**5.1.12.1.31.2.2 Implicitly Modified Reclaim Unit Handle (Event Type 81h)**


This FDP event indicates that the controller modified a Reclaim Unit Handle to reference a different Reclaim
Unit where that modification was not due to any host action (e.g., a write command that has a size greater
than the remaining capacity of the initial Reclaim Unit being written).


**5.1.12.1.32** **Reservation Notification (Log Page Identifier 80h)**


The Reservation Notification log page reports one log page from a time ordered queue of Reservation
Notification log pages, if available. A new Reservation Notification log page is created and added to the end
of the queue of reservation notifications whenever an unmasked reservation notification occurs on any
namespace that is attached to the controller. The Get Log Page command:


   - returns a data buffer containing a log page corresponding to the oldest log page in the reservation
notification queue (i.e., the log page containing the lowest Log Page Count field; accounting for
wrapping); and

   - removes that Reservation Notification log page from the queue.


If there are no available Reservation Notification log page entries when a Get Log Page command is issued,
then an empty log page (i.e., all fields in the log page cleared to 0h) shall be returned.


If the controller is unable to store a reservation notification in the Reservation Notification log page due to
the size of the queue, that reservation notification is lost. If a reservation notification is lost, then the
controller shall increment the Log Page Count field of the last reservation notification in the queue (i.e., the
Log Page Count field in the last reservation notification in the queue shall contain the value associated with
the most recent reservation notification that has been lost).


The format of the log page is defined in Figure 291.


276


NVM Express [®] Base Specification, Revision 2.2


**Figure 291: Reservation Notification Log Page**






|Value|Definition|
|---|---|
|0h|**Empty Log Page:** Get Log Page command was processed when no unread<br>Reservation Notification log pages were available. All the fields of an empty log<br>page shall have a value of 0h.|
|1h|**Registration Preempted**|
|2h|**Reservation Released**|
|3h|**Reservation Preempted**|
|4h to FFh|Reserved|




|Bytes|Description|
|---|---|
|07:00|**Log Page Count (LPC):**This is a 64-bit incrementing Reservation Notification log page count,<br>indicating a unique identifier (modulo 64 bit) for this notification. The count starts at 0h following a<br>Controller Level Reset and is incremented for every event that causes a reservation notification<br>regardless of whether that notification is added to the queue. If the value of this field is<br>FFFFFFFF_FFFFFFFFh, then the field is set to 1h when incremented (i.e., rolls over to 1h) and a new<br>log page is created.<br>If there are no Reservation Notification log pages to return (i.e., the queue of Reservation Notification<br>log pages is empty), then this field shall return the value 0h. Subsequent reservation notifications<br>continue incrementing this unique identifier from the last non-zero value (i.e., the value that identified<br>the previous Reservation Notification log page). A value of 0h indicates the log page is empty.|
|08|**Reservation Notification Log Page Type (RNLPT):**This field indicates the Reservation Notification<br>type described by this log page.<br>**Value**<br>**Definition**<br>0h<br>**Empty Log Page:** Get Log Page command was processed when no unread<br>Reservation Notification log pages were available. All the fields of an empty log<br>page shall have a value of 0h.<br>1h<br>**Registration Preempted**<br>2h<br>**Reservation Released**<br>3h<br>**Reservation Preempted**<br>4h to FFh<br>Reserved|
|09|**Number of Available Log Pages (NALP):**This field indicates the number of additional available<br>Reservation Notification log pages (i.e., the number of unread log pages not counting this one). If there<br>are more than 255 additional available log pages, then a value of 255 is returned. A value of 0h indicates<br>that there are no additional available log pages.|
|11:10|Reserved|
|15:12|**Namespace ID (NSID):** This field indicates the namespace ID of the namespace associated with the<br>Reservation Notification described by this log page.|
|63:16|Reserved|



**5.1.12.1.33** **Sanitize Status (Log Page Identifier 81h)**


The Sanitize Status log page is used to report sanitize operation time estimates and information about the
most recent sanitize operation (refer to section 8.1.24). The Get Log Page command returns a data buffer
containing a log page formatted as defined in Figure 292. This log page shall be retained across power
cycles and resets. This log page shall contain valid data whenever CSTS.RDY is set to ‘1’.


If the Sanitize Capabilities (SANICAP) field in the Identify Controller data structure is not cleared to 0h (i.e.,
the Sanitize command is supported), then this log page shall be supported. If the Sanitize Capabilities field
in the Identify Controller data structure is cleared to 0h, then this log page is reserved.


**Figure 292: Sanitize Status Log Page**





|Bytes|Description|
|---|---|
|01:00|**Sanitize Progress (SPROG):**This field indicates the fraction complete of the:<br>• <br>sanitize processing state (i.e., the Restricted Processing state or the Unrestricted Processing<br>state); or<br>• <br>Post-Verification Deallocation state, if the Post-Verification Deallocation state is entered as<br>part of the sanitize operation.<br>The value is the numerator of the fraction complete that has 65,536 (10000h) as its denominator. This<br>value shall be set to FFFFh if the Sanitize Operation Status (SOS) field is set to a value other than 010b<br>(i.e., Sanitizing) or if the sanitization target is in the Media Verification state. Refer to section 8.1.24.3<br>for the effects of state changes that change the value of this field.|


277


NVM Express [®] Base Specification, Revision 2.2











|Bits|Description|
|---|---|
|15:10|Reserved|
|09|**Media Verification Canceled (MVCNCLD):** This bit indicates whether the Media<br>Verification state is canceled.<br>If the most recent sanitize operation was started by a Sanitize command with the EMVS<br>bit set to ‘1’ and during the Restricted Processing state, the Unrestricted Processing<br>state, or the Media Verification state:<br>a)<br>a change in the composition of the NVM subsystem prevents media verification;<br>or<br>b)<br>a Controller Level Reset of any controller in the NVM subsystem occurs that is<br>caused by:<br>• <br>a transport-specific reset type (refer to the applicable NVMe Transport<br>specification); or<br>• <br>an NVM Subsystem Reset,<br>then this bit is set to ‘1’. Otherwise, this bit is cleared to ‘0’.<br>Refer to the Sanitize Operation State Machine defined in section 8.1.24.3 for conditions<br>that affect the setting of this bit.|
|08|**Global Data Erased (GDE):** If no user data has been written to the NVM subsystem and<br>no Persistent Memory Region in the NVM subsystem has been enabled:<br>a)<br>since being manufactured and the NVM subsystem has never been sanitized;<br>or<br>b)<br>since the most recent successful sanitize operation,<br>then this bit shall be set to ‘1’. Otherwise, this bit shall be cleared to ‘0’.|
|07:03|**Overwrite Passes Completed (OPC):** This field shall indicate the number of completed<br>passes if the most recent sanitize operation was an Overwrite. This field shall be cleared<br>to 0h if the most recent sanitize operation was not an Overwrite.|
|02:00|**Sanitize Operation Status (SOS):** This field indicates the status of the most recent<br>sanitize operation as shown below. Sanitize states are described in section 8.1.24.3.<br>**Value**<br>**State**<br>000b<br>**Sanitize Never Started:** If a sanitize operation has never been<br>started in the NVM subsystem, then this value shall be reported.<br>Otherwise, this value shall not be reported.<br>001b<br>**Sanitized:** If:<br>a)<br>the<br>most<br>recent<br>sanitize<br>operation<br>completed<br>successfully; and<br>b)<br>the Sanitize Operation State Machine is in the Idle state,<br>then this value shall be reported. Otherwise, this value shall not be<br>reported.<br>010b<br>**Sanitizing:** If a sanitize operation is currently in progress (i.e., in<br>the Restricted Processing state, the Unrestricted Processing state,<br>the Media Verification state, or the Post-Verification Deallocation<br>state), then this value shall be reported. Otherwise, this value shall<br>not be reported.<br>011b<br>**Sanitize Failed:** If the most recent sanitize operation failed, then<br>this value shall be reported. Otherwise, this value shall not be<br>reported.<br>This value shall be reported when the Sanitize Operation State<br>Machine is in the Restricted Failure state or the Unrestricted Failure<br>state.<br>This value is able to be reported when the Sanitize Operation State<br>Machine is in the Idle state.<br>|


|Value|State|
|---|---|
|000b|**Sanitize Never Started:** If a sanitize operation has never been<br>started in the NVM subsystem, then this value shall be reported.<br>Otherwise, this value shall not be reported.|
|001b|**Sanitized:** If:<br>a)<br>the<br>most<br>recent<br>sanitize<br>operation<br>completed<br>successfully; and<br>b)<br>the Sanitize Operation State Machine is in the Idle state,<br>then this value shall be reported. Otherwise, this value shall not be<br>reported.|
|010b|**Sanitizing:** If a sanitize operation is currently in progress (i.e., in<br>the Restricted Processing state, the Unrestricted Processing state,<br>the Media Verification state, or the Post-Verification Deallocation<br>state), then this value shall be reported. Otherwise, this value shall<br>not be reported.|
|011b|**Sanitize Failed:** If the most recent sanitize operation failed, then<br>this value shall be reported. Otherwise, this value shall not be<br>reported.<br>This value shall be reported when the Sanitize Operation State<br>Machine is in the Restricted Failure state or the Unrestricted Failure<br>state.<br>This value is able to be reported when the Sanitize Operation State<br>Machine is in the Idle state.<br>|


278


NVM Express [®] Base Specification, Revision 2.2


**Figure 292: Sanitize Status Log Page**









|Bytes|Description|Col3|Col4|Col5|Col6|Col7|Col8|
|---|---|---|---|---|---|---|---|
|||||100b|**Sanitized Unexpected Deallocate:** If:<br>a)<br>the most recent sanitize operation for which No-<br>Deallocate After Sanitize (refer to section 5.1.22) was<br>requested has completed successfully with deallocation of<br>all media allocated for user data (refer to section <br>5.1.25.1.15); and<br>b)<br>the Sanitize Operation State Machine is in the Idle state,<br>then this value shall be reported. Otherwise, this value shall not be<br>reported.|||
|||||101b to 111b|Reserved|Reserved|Reserved|
|07:04|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|**Sanitize Command Dword 10 Information (SCDW10):**This field shall indicate the value of the<br>Command Dword 10 field of the Sanitize command that started the sanitize operation whose status is<br>reported in the SSTAT field. Refer to Figure 373.|
|11:08|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite (ETO):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of an Overwrite sanitize operation with 16 passes<br>in the background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field<br>(refer to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|
|15:12|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Block Erase (ETBE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Block Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|
|19:16|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Crypto Erase (ETCE):**This field shall indicate the number of seconds required to<br>complete sanitize processing (i.e., the time difference between entering and exiting the Restricted<br>Processing state or the Unrestricted Processing state) of a Crypto Erase sanitize operation in the<br>background (refer to section 5.1.22) when the No-Deallocate Modifies Media After Sanitize field (refer<br>to Figure 313) is set to a value other than 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|
|23:20|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|**Estimated Time For Overwrite With No-Deallocate Media Modification (ETODMM):** This field shall<br>indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of<br>an Overwrite sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Overwrite sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|


279


NVM Express [®] Base Specification, Revision 2.2


**Figure 292: Sanitize Status Log Page**











|Bytes|Description|
|---|---|
|27:24|**Estimated Time For Block Erase With No-Deallocate Media Modification (ETBENMM):** This field<br>shall indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of a<br>Block Erase sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Block Erase sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported**. **|
|31:28|**Estimated Time For Crypto Erase With No-Deallocate Media Modification (ETCENMM):** This field<br>shall indicate the number of seconds required to complete sanitize processing (i.e., the time difference<br>between entering and exiting the Restricted Processing state or the Unrestricted Processing state) of a<br>Crypto Erase sanitize operation, including associated additional media modification, in the background<br>(refer to section 5.1.22) when:<br>a)<br>the No-Deallocate After Sanitize bit was set to ‘1’ in the Sanitize command that requested the<br>Crypto Erase sanitize operation; and<br>b)<br>the No-Deallocate Modifies Media After Sanitize field (refer to Figure 313) is set to 10b.<br>A value of 0h indicates that the sanitize processing is expected to be completed in the background when<br>the Sanitize command that started that operation is completed. A value of FFFFFFFFh indicates that no<br>time period is reported.|
|35:32|**Estimated Time For Post-Verification Deallocation State (ETPVDS):** This field shall indicate the<br>number of seconds required to deallocate all media allocated for user data after exiting the Media<br>Verification state (i.e., the time difference between entering and exiting the Post-Verification<br>Deallocation state), if that state is entered as part of the sanitize operation. A value of FFFFFFFFh<br>indicates that no time period is reported.|
|36|**Sanitize State Information (SSI):** This field indicates additional information about the state of<br>sanitization.<br>**Bits**<br>**Description**<br>7:4<br>**Failure State (FAILS):** If the SOS field is set to 011b (i.e., Sanitize Failed), then this field<br>shall indicate the state of the Sanitize Operation State Machine (refer to Figure 649) in<br>which the failure occurred.<br>The values of this field are sanitize states, defined in the description of the SANS field.<br>If the VERS bit is cleared to ‘0’, then this field shall be cleared to 0h.<br>If the SOS field is set to a value other than 011b (i.e., Sanitize Failed), then this field shall<br>be cleared to 0h. <br>3:0<br>**Sanitize State (SANS):** This field shall indicate the current state of the Sanitize Operation<br>State Machine (refer to Figure 649).<br>If the VERS bit is cleared to ‘0’, then this field shall be cleared to 0h.<br>**Value**<br>**State**<br>**Reference**<br>0h<br>Idle<br>8.1.24.3.1<br>1h<br>Restricted Processing<br>8.1.24.3.2<br>2h<br>Restricted Failure<br>8.1.24.3.3<br>3h<br>Unrestricted Processing<br>8.1.24.3.4<br>4h<br>Unrestricted Failure<br>8.1.24.3.5<br>5h<br>Media Verification<br>8.1.24.3.6<br>6h<br>Post-Verification Deallocation<br>8.1.24.3.7<br>All other values<br>Reserved<br>|
|511:37|Reserved|


|Bits|Description|
|---|---|
|7:4|**Failure State (FAILS):** If the SOS field is set to 011b (i.e., Sanitize Failed), then this field<br>shall indicate the state of the Sanitize Operation State Machine (refer to Figure 649) in<br>which the failure occurred.<br>The values of this field are sanitize states, defined in the description of the SANS field.<br>If the VERS bit is cleared to ‘0’, then this field shall be cleared to 0h.<br>If the SOS field is set to a value other than 011b (i.e., Sanitize Failed), then this field shall<br>be cleared to 0h.|
|3:0|**Sanitize State (SANS):** This field shall indicate the current state of the Sanitize Operation<br>State Machine (refer to Figure 649).<br>If the VERS bit is cleared to ‘0’, then this field shall be cleared to 0h.<br>**Value**<br>**State**<br>**Reference**<br>0h<br>Idle<br>8.1.24.3.1<br>1h<br>Restricted Processing<br>8.1.24.3.2<br>2h<br>Restricted Failure<br>8.1.24.3.3<br>3h<br>Unrestricted Processing<br>8.1.24.3.4<br>4h<br>Unrestricted Failure<br>8.1.24.3.5<br>5h<br>Media Verification<br>8.1.24.3.6<br>6h<br>Post-Verification Deallocation<br>8.1.24.3.7<br>All other values<br>Reserved<br>|


|Value|State|Reference|
|---|---|---|
|0h|Idle|8.1.24.3.1|
|1h|Restricted Processing|8.1.24.3.2|
|2h|Restricted Failure|8.1.24.3.3|
|3h|Unrestricted Processing|8.1.24.3.4|
|4h|Unrestricted Failure|8.1.24.3.5|
|5h|Media Verification|8.1.24.3.6|
|6h|Post-Verification Deallocation|8.1.24.3.7|
|All other values|Reserved||


280


NVM Express [®] Base Specification, Revision 2.2


**Memory-Based Log Specific Information (PCIe)**


There are no log pages that are specific to the Memory-based transport model.


**Message-Based Log Specific Information (Fabrics)**


This section describes log pages that are specific to the Message-based transport model.


**5.1.12.3.1** **Discovery (Log Page Identifier 70h)**


The Discovery log page shall only be supported by Discovery controllers. The Discovery log page shall not
be supported by controllers that expose namespaces for NVMe over PCIe or NVMe over Fabrics. The
Discovery log page provides an inventory of NVM subsystems with which a host may attempt to form an
association. Depending on the parameters specified in a Get Log Page command, the Discovery log page
may contain entries for:

  - all known NVM subsystems; or

  - a subset of entries specific to the host or Discovery controller requesting the log page.


The Discovery log page is persistent across power cycles.


Figure 293 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.1.12.1.1) for the Discovery log page.


**Figure 293: Discovery Log Page – LID Specific Parameter Field**






|Bits|Description|
|---|---|
|15:3|Reserved|
|2|**All NVM Subsystem Entries Supported (ALLSUBES):** If this bit is set to ‘1’, then the Discovery controller<br>supports returning records for all NVM subsystem ports that are registered without filtering the list of<br>returned records based upon the requesting HOSTNQN. If this bit is cleared to ‘0’, then the Discovery<br>controller does not support returning records for all NVM subsystem ports that are registered.|
|1|**Port Local Entries Only Supported (PLEOS)**: If this bit is set to ‘1’, then the Discovery controller supports<br>returning only port local Discovery Log Page Entries or port local Extended Discovery Log Page Entries. If<br>this bit is cleared to ‘0’, then the Discovery controller does not support returning only port local Discovery<br>Log Page Entries or port local Extended Discovery Log Page Entries. If the Discovery controller is not a<br>DDC, then this bit should be ignored.|
|0|**Extended Discovery Log Page Entry Supported (EXTDLPES):** If this bit is set to ‘1’, then the Discovery<br>controller supports returning Extended Discovery Log Page Entries. If this bit is cleared to ‘0’, then the<br>Discovery controller does not support returning Extended Discovery Log Page Entries. If the Discovery<br>controller is a CDC, then that CDC shall support returning Extended Discovery Log Page Entries.|



If a Discovery controller supports returning Extended Discovery Log Page Entries (i.e., the Extended
Discovery Log Page Entries Supported (EXTDLPES) bit is set to ‘1’ in the LID Specific Parameter field as
defined in Figure 293) and that Discovery controller processes a Get Log Page command for this log page
with the Extended Discovery Log Page Entries (EXTDLPE) bit set to ‘1’ in the Log Specific Parameter (LSP)
field (refer to Figure 294), then each entry returned by that Discovery controller may be either a Discovery
Log Page Entry or an Extended Discovery Log Page Entry. Extended Discovery Log Page Entries may
contain zero or more extended attributes. If a Discovery controller returns records that include Extended
Discovery Log Page Entries, then that Discovery controller shall set the Extended (EXTEND) bit to ‘1’ in
the Discovery Log Page Flags (DLPF) field. A Centralized Discovery controller (CDC) shall support
returning Extended Discovery Log Page Entries.


If a Discovery controller supports returning only port local Discovery Log Page Entries or port local Extended
Discovery Log Page Entries (i.e., the Port Local Entries Only Supported (PLEOS) bit is set to ‘1’ in the LID
Specific Parameter field as defined in Figure 293) and that Discovery controller processes a Get Log Page
command for this log page with the Port Local Entries Only (PLEO) bit set to ‘1’ in the LSP field (refer to
Figure 294), then that Discovery controller shall return records for only NVM subsystem ports that are
presented through the same NVM subsystem port that received the Get Log Page command. If a Discovery
controller returns records for only NVM subsystem ports that are presented through the same NVM
subsystem port that received the Get Log Page command, then that Discovery controller shall set the Port


281


NVM Express [®] Base Specification, Revision 2.2


Local (PORTLCL) bit to ‘1’ in the DLPF field. Only a Direct Discovery controller (DDC) may support returning
only port local Discovery Log Page Entries or port local Extended Discovery Log Page Entries.


If a Discovery controller supports returning records for all NVM subsystem ports that are registered (i.e.,
the All NVM Subsystems Entries Supported (ALLSUBES) bit is set to ‘1’ in the LID Specific Parameter field
as defined in Figure 293) and that Discovery controller processes a Get Log Page command for this log
page with the All NVM Subsystem Entries (ALLSUBE) bit set to ‘1’ in the LSP field (refer to Figure 294),
then that Discovery controller shall return records for all NVM subsystem ports that are registered. The list
of records returned by that Discovery controller shall not be filtered based upon the requesting HOSTNQN.
If a Discovery controller returns records for all NVM subsystem ports that are registered, then that Discovery
controller shall set the All Subsystems (ALLSUB) bit to ‘1’ in the DLPF field. A Discovery controller may
require authentication before reporting the ALLSUBES bit being set to ‘1’ or may require configuration
outside the scope of this specification.


The Log Page Offset may be used to retrieve specific records. If the Discovery controller supports an index
offset for this log page (i.e., the Index Offset Supported (IOS) bit is set to ‘1’ in the Supported Log Pages
log page (refer to section 5.1.12.1.1) for this log page), then the index values specified in the Log Page
Offset Lower (LPOL) field (refer to Figure 200) and Log Page Offset Upper (LPOU) field (refer to Figure
201) in the Get Log Page command shall be used to index into the header and list of entries within this log
page (e.g., specifying an index offset of 0 returns this log page starting at the header, specifying an index
offset of 1 returns this log page starting at the offset of Entry 0, etc.). The number of records is returned in
the header of the log page. The format for a Discovery Log Page Entry is defined in Figure 295. The format
for an Extended Discovery Log Page Entry is defined in Figure 296. The format for an extended attribute is
defined in Figure 500. The format for the Discovery log page is defined in Figure 297.


A single Get Log Page command used to read the Discovery log page shall be atomic. If the Discovery log
page is read using multiple Get Log Page commands, then the reader should validate the Generation
Counter field to ensure that there has not been a change in the contents of the data. The Discovery log
page contents should be processed in the following sequence:


1. read the Discovery log page contents in order (i.e., with increasing Log Page Offset values);
2. re-read the Generation Counter field after the entire log page is transferred; and
3. if the Generation Counter field does not match the original value read, then discard the log page

read, as the entries may be inconsistent, and restart the sequence.; or
4. if the Generation Counter field does match the original value read, then process the returned data.


If the log page contents change during this command sequence, then the controller may return a status
code of Discover Restart.


Every record indicates via the SUBTYPE field if that record is describing the current Discovery Service,
referring to another Discovery Service, or if the record indicates an NVM subsystem composed of
controllers that may expose namespaces. A referral to another Discovery Service (i.e., SUBTYPE field set
to 01h) is a mechanism to find additional Discovery subsystems. An NVM subsystem entry (i.e., SUBTYPE
field set to 02h) is a mechanism to find NVM subsystems that contain controllers that may expose
namespaces. An entry that describes the current Discovery Service (i.e., SUBTYPE field set to 03h) is a
mechanism to find additional access information (e.g., other NVM subsystem ports) for the current
Discovery service. Hosts or Discovery controllers are not required to process referral entries deeper than
eight levels.


For entries that describe the current Discovery Service, the DUPRETINFO bit set to ‘1’ in the Entry Flags
field indicates those ports that return duplicate information. A host need not retrieve the Discovery Log Page
from all NVM subsystem ports described by a Discovery Log Page Entry that contains the DUPRETINFO
bit set to ‘1’ (refer to Figure 295), as each of those ports return the same information. A host may retrieve
the Discovery Log Page from multiple ports with the DUPRETINFO bit set to ‘1’ to act as redundant access
to the same information. A host may choose to enable the Discovery Log Page Change AEN on one of the
connections associated with an entry with the DUPRETINFO bit set to ‘1’. If the Discovery Log Page Change
AEN is enabled on multiple ports represented by entries with the DUPRETINFO bit set to ‘1’, then the host
may process a Discovery Log Page Change AEN for one connection as applying to all ports represented
by entries that also have the DUPRETINFO bit set to ‘1’.


282


NVM Express [®] Base Specification, Revision 2.2


If an NVM subsystem supports the dynamic controller model, then all entries for that NVM subsystem shall
have the Controller ID field set to FFFFh. For a particular NVM subsystem port and NVMe Transport
address in an NVM subsystem, there shall be no more than one entry with the Controller ID field set to:


   - FFFFh if that NVM subsystem supports the dynamic controller model; or

   - FFFEh if that NVM subsystem supports the static controller model.


**Figure 294: Discovery Log Specific Parameter Field**





|Bits|Description|
|---|---|
|14:11|Reserved|
|10|**All NVM Subsystem Entries (ALLSUBE)**: If this bit is set to ‘1’, then the Discovery controller shall<br>return records for all NVM subsystem ports that are registered without filtering the list of returned<br>records based upon the requesting HOSTNQN. If this bit is cleared to ‘0’, then this bit has no effect.|
|09|**Port Local Entries Only (PLEO):** If this bit is set to ‘1’, then the Discovery controller shall return<br>records for only NVM subsystem ports that are presented through the same NVM subsystem port that<br>received the Get Log Page command. If this bit is cleared to ‘0’, then this bit has no effect.|
|08|**Extended Discovery Log Page Entries (EXTDLPE):** If this bit is set to ‘1’, then each record returned<br>by the Discovery controller may be either a Discovery Log Page Entry or an Extended Discovery Log<br>Page Entry. If this bit is cleared to ‘0’, then this bit has no effect.|


**Figure 295: Discovery Log Page Entry Data Structure**







|Bytes|Description|
|---|---|
|00|**Transport Type (TRTYPE):**Specifies the NVMe Transport type.<br>**Value**<br>**Definition**<br>00<br>Reserved<br>01<br>RDMA Transport (refer to the NVMe RDMA Transport specification)<br>02<br>Fibre Channel Transport (refer to INCITS 556)<br>03<br>TCP Transport (refer to the NVMe TCP Transport specification)<br>04 to 253<br>Reserved<br>254<br>Intra-host Transport (i.e., loopback) (NOTE: This is a reserved value for use by<br>host software.)<br>255<br>Reserved|
|01|**Address Family (ADRFAM):**Specifies the address family.<br>**Value**<br>**Definition**<br>00<br>Reserved<br>01<br>**AF_INET:** IPv4 address family. IPv4address format syntax specified in section<br>3.2.2 of IETF RFC 3986.<br>02<br>**AF_INET6:** IPv6 address family. IPv6address format syntax specified in section<br>3.2.2 of IETF RFC 3986.<br>03<br>**AF_IB:** InfiniBand address family.<br>04<br>Fibre Channel address family.<br>05 to 253<br>Reserved<br>254<br>Intra-host Transport (i.e., loopback) (NOTE: This is a reserved value for use by<br>host software.)<br>255<br>Reserved|


|Value|Definition|
|---|---|
|00|Reserved|
|01|RDMA Transport (refer to the NVMe RDMA Transport specification)|
|02|Fibre Channel Transport (refer to INCITS 556)|
|03|TCP Transport (refer to the NVMe TCP Transport specification)|
|04 to 253|Reserved|
|254|Intra-host Transport (i.e., loopback) (NOTE: This is a reserved value for use by<br>host software.)|
|255|Reserved|


|Value|Definition|
|---|---|
|00|Reserved|
|01|**AF_INET:** IPv4 address family. IPv4address format syntax specified in section<br>3.2.2 of IETF RFC 3986.|
|02|**AF_INET6:** IPv6 address family. IPv6address format syntax specified in section<br>3.2.2 of IETF RFC 3986.|
|03|**AF_IB:** InfiniBand address family.|
|04|Fibre Channel address family.|
|05 to 253|Reserved|
|254|Intra-host Transport (i.e., loopback) (NOTE: This is a reserved value for use by<br>host software.)|
|255|Reserved|


283


NVM Express [®] Base Specification, Revision 2.2


**Figure 295: Discovery Log Page Entry Data Structure**






|Value|Definition|
|---|---|
|00|Reserved|
|01|**Referral:** The entry describes a referral to another Discovery Service<br>composed of Discovery controllers that provide additional discovery records.<br>Multiple Referral entries may be reported for each Discovery Service (e.g., if<br>that Discovery Service has multiple NVM subsystem ports or supports multiple<br>protocols).|
|02|**NVM Subsystem:** The entry describes an NVM subsystem whose controllers<br>may have attached namespaces (i.e., an NVM subsystem that is not composed<br>of Discovery controllers). Multiple NVM Subsystem entries may be reported for<br>each NVM subsystem if that NVM subsystem has multiple NVM subsystem<br>ports.|
|03|**Current Discovery Subsystem:** The entry describes this Discovery<br>subsystem (i.e., the Discovery Service that contains the controller processing<br>the Get Log Page command). Multiple Current Discovery Subsystem entries<br>may be reported for this Discovery subsystem if the current Discovery<br>subsystem has multiple NVM subsystem ports.|
|04 to 255|Reserved|


|Value|Definition|
|---|---|
|00b|Not specified|
|01b|Authentication required|
|10b|Authentication concatenated to secure channel establishment required|
|11b|Reserved|


|Bits|Description|
|---|---|
|7:6|Reserved|
|5:4|**Transport Authentication and Secure Channel (TASC):**Indicates whether an<br>authentication transaction (refer to section 8.3.4.2) or an authentication transaction<br>concatenated to a secure channel establishment (refer to section 8.3.4.3) is required<br>upon completion of the Connect command. These bits do not override the AUTHREQ<br>bits in the Connect response; these bits apply only when the AUTHREQ bits specify<br>no requirements (refer to Figure 549).<br>**Value**<br>**Definition**<br>00b<br>Not specified<br>01b<br>Authentication required<br>10b<br>Authentication concatenated to secure channel establishment required<br>11b<br>Reserved|
|3|**Zero Host ID Support (ZHIDS):**If this bit is set to ‘1’, then the controller supports a<br>Host Identifier value of 0h in a Connect command. If this bit is cleared to ‘0’, then the<br>controller does not support a Host Identifier value of 0h in a Connect command.|
|2|**SQ Flow Control Disable (SQFCD):**If this bit is set to ‘1’, then the controller is<br>capable of disabling SQ flow control. A controller that is capable of disabling SQ flow<br>control may accept or reject a host request to disable SQ flow control. If this bit is<br>cleared to ‘0’, then the controller requires use of SQ flow control.|
|1:0|**Transport Secure Channel (TSC):**Indicates whether connections shall be made<br>over a fabric secure channel (refer to section 8.3.4.1).<br>**Value**<br>**Definition**<br>00b<br>Not specified<br>01b<br>Required<br>10b<br>Not required (i.e., not supported or supported but not required)<br>11b<br>Reserved|


|Value|Definition|
|---|---|
|00b|Not specified|
|01b|Required|
|10b|Not required (i.e., not supported or supported but not required)|
|11b|Reserved|



|Bytes|Description|
|---|---|
|02|**Subsystem Type (SUBTYPE):**Specifies the type of the NVM subsystem that is indicated in this<br>entry.<br>**Value**<br>**Definition**<br>00<br>Reserved<br>01<br>**Referral:** The entry describes a referral to another Discovery Service<br>composed of Discovery controllers that provide additional discovery records.<br>Multiple Referral entries may be reported for each Discovery Service (e.g., if<br>that Discovery Service has multiple NVM subsystem ports or supports multiple<br>protocols).<br>02<br>**NVM Subsystem:** The entry describes an NVM subsystem whose controllers<br>may have attached namespaces (i.e., an NVM subsystem that is not composed<br>of Discovery controllers). Multiple NVM Subsystem entries may be reported for<br>each NVM subsystem if that NVM subsystem has multiple NVM subsystem<br>ports.<br>03<br>**Current Discovery Subsystem:** The entry describes this Discovery<br>subsystem (i.e., the Discovery Service that contains the controller processing<br>the Get Log Page command). Multiple Current Discovery Subsystem entries<br>may be reported for this Discovery subsystem if the current Discovery<br>subsystem has multiple NVM subsystem ports.<br>04 to 255<br>Reserved|
|03|**Transport Requirements (TREQ):**Indicates requirements for the NVMe Transport.<br>**Bits**<br>**Description **<br>7:6<br>Reserved<br>5:4<br>**Transport Authentication and Secure Channel (TASC):**Indicates whether an<br>authentication transaction (refer to section 8.3.4.2) or an authentication transaction<br>concatenated to a secure channel establishment (refer to section 8.3.4.3) is required<br>upon completion of the Connect command. These bits do not override the AUTHREQ<br>bits in the Connect response; these bits apply only when the AUTHREQ bits specify<br>no requirements (refer to Figure 549).<br>**Value**<br>**Definition**<br>00b<br>Not specified<br>01b<br>Authentication required<br>10b<br>Authentication concatenated to secure channel establishment required<br>11b<br>Reserved<br>3 <br>**Zero Host ID Support (ZHIDS):**If this bit is set to ‘1’, then the controller supports a<br>Host Identifier value of 0h in a Connect command. If this bit is cleared to ‘0’, then the<br>controller does not support a Host Identifier value of 0h in a Connect command.<br>2 <br>**SQ Flow Control Disable (SQFCD):**If this bit is set to ‘1’, then the controller is<br>capable of disabling SQ flow control. A controller that is capable of disabling SQ flow<br>control may accept or reject a host request to disable SQ flow control. If this bit is<br>cleared to ‘0’, then the controller requires use of SQ flow control.<br>1:0<br>**Transport Secure Channel (TSC):**Indicates whether connections shall be made<br>over a fabric secure channel (refer to section 8.3.4.1).<br>**Value**<br>**Definition**<br>00b<br>Not specified<br>01b<br>Required<br>10b<br>Not required (i.e., not supported or supported but not required)<br>11b<br>Reserved|
|05:04|**Port ID (PORTID):**Specifies a particular NVM subsystem port. Different NVMe Transports or<br>address families may utilize the same Port ID value (e.g., a Port ID may support both iWARP and<br>RoCE).|


284










NVM Express [®] Base Specification, Revision 2.2


**Figure 295: Discovery Log Page Entry Data Structure**
















|Bits|Description|
|---|---|
|15:3|Reserved|
|2|**No CDC Connectivity (NCC):** If this bit is set to ‘1’, then no DDC that describes this<br>entry is currently connected to the CDC. If this bit is cleared to ‘0’, then at least one<br>DDC that describes this entry is currently connected to the CDC. If the Discovery<br>controller returning this log page is not a CDC, then this bit shall be cleared to ‘0’<br>and should be ignored by the host.|
|1|**Explicit Persistent Connection Support for Discovery (EPCSD):** If this bit is set<br>to ‘1’, then Explicit Persistent Connections are supported for the Discovery controller<br>described by this entry. If this bit is cleared to ‘0’, then support for Explicit Persistent<br>Connections is not reported.<br>For entries with the SUBTYPE field set to 2h, this bit shall be cleared to ‘0’.|
|0|**Duplicate Returned Information (DUPRETINFO):** If this bit is set to ‘1’, then using<br>the content of this entry to access this Discovery Service returns the same<br>information that is returned by using the content of other entries in this log page that<br>also have this bit set to ‘1’. If this bit is cleared to ‘0’, then using the content of this<br>entry to access this Discovery Service may or may not return different information<br>than is returned by using the content of any other entry in this log page.<br>For entries with the SUBTYPE field set to a value other than 3h, this bit shall be<br>cleared to ‘0’.|





|Bytes|Description|
|---|---|
|07:06|**Controller ID (CNTLID):**Specifies the controller ID. If the NVM subsystem uses a dynamic<br>controller model, then this field shall be set to FFFFh. If the NVM subsystem uses a static<br>controller model, then this field may be set to a specific controller ID (values 0h to FFEFh are<br>valid). If the NVM subsystem uses a static controller model and the value indicated is FFFEh,<br>then the host should remember the Controller ID returned as part of the Fabrics Connect<br>command in order to re-establish an association in the future with the same controller.|
|09:08|**Admin Max SQ Size (ASQSZ):**Specifies the maximum size of an Admin Submission Queue.<br>This applies to all controllers in the NVM subsystem. The value shall be a minimum of 32 entries.|
|11:10|**Entry Flags (EFLAGS):**This field Indicates additional information related to the current entry.<br>**Bits**<br>**Description **<br>15:3<br>Reserved<br>2 <br>**No CDC Connectivity (NCC):** If this bit is set to ‘1’, then no DDC that describes this<br>entry is currently connected to the CDC. If this bit is cleared to ‘0’, then at least one<br>DDC that describes this entry is currently connected to the CDC. If the Discovery<br>controller returning this log page is not a CDC, then this bit shall be cleared to ‘0’<br>and should be ignored by the host.<br>1 <br>**Explicit Persistent Connection Support for Discovery (EPCSD):** If this bit is set<br>to ‘1’, then Explicit Persistent Connections are supported for the Discovery controller<br>described by this entry. If this bit is cleared to ‘0’, then support for Explicit Persistent<br>Connections is not reported.<br>For entries with the SUBTYPE field set to 2h, this bit shall be cleared to ‘0’.<br>0 <br>**Duplicate Returned Information (DUPRETINFO):** If this bit is set to ‘1’, then using<br>the content of this entry to access this Discovery Service returns the same<br>information that is returned by using the content of other entries in this log page that<br>also have this bit set to ‘1’. If this bit is cleared to ‘0’, then using the content of this<br>entry to access this Discovery Service may or may not return different information<br>than is returned by using the content of any other entry in this log page.<br>For entries with the SUBTYPE field set to a value other than 3h, this bit shall be<br>cleared to ‘0’.|
|31:12|Reserved|
|63:32|**Transport Service Identifier (TRSVCID):** Specifies the NVMe Transport service identifier as an<br>ASCII string. The NVMe Transport service identifier is specified by the associated NVMe<br>Transport binding specification.|
|255:64|Reserved|
|511:256|**NVM Subsystem Qualified Name (SUBNQN):**NVMe Qualified Name (NQN) that uniquely<br>identifies the NVM subsystem. Refer to section 4.7.<br>For a Discovery subsystem, if that Discovery subsystem has a unique Discovery Service NQN<br>(i.e., the NVM Subsystem NVMe Qualified Name (SUBNQN) field in that Discovery subsystem’s<br>Identify Controller data structure contains a unique Discovery Service NQN value), then the value<br>returned shall be that unique Discovery Service NQN. If the Discovery subsystem does not have<br>a unique Discovery Service NQN, then the value returned shall be the well-known Discovery<br>Service NQN (i.e., nqn.2014-08.org.nvmexpress.discovery).|
|767:512|**Transport Address (TRADDR):**Specifies the address of the NVM subsystem that may be used<br>for a Connect command as an ASCII string. The Address Family field describes the reference for<br>parsing this field. Refer to section 1.4.2 for ASCII string requirements. For the definition of this<br>field, refer to the appropriate NVMe Transport binding specification.|
|1023:768|**Transport Specific Address Subtype (TSAS):**Specifies NVMe Transport specific information<br>about the address. For the definition of this field, refer to the appropriate NVMe Transport binding<br>specification.|


285


NVM Express [®] Base Specification, Revision 2.2


**Figure 296: Extended Discovery Log Page Entry**





























|Bytes|Description|
|---|---|
|**Header**|**Header**|
|00|**Transport Type (TRTYPE):** This field indicates the transport type as defined in the<br>Transport Type (TRTYPE) field in Figure 295.|
|01|**Address Family (ADRFAM):** This field indicates the address family as defined in<br>the Address Family (ADRFAM) field in Figure 295.|
|02|**Subsystem Type (SUBTYPE):**This field indicates the type of the NVM subsystem<br>that is indicated in this entry as defined in the Subsystem Type (SUBTYPE) field in<br>Figure 295.|
|03|**Transport Requirements (TREQ):**This field indicates requirements for the NVMe<br>Transport as defined in the Transport Requirements (TREQ) field in Figure 295.|
|05:04|**Port ID (PORTID):** This field indicates a particular NVM subsystem port as defined<br>in the Port ID (PORTID) field in Figure 295.|
|07:06|**Controller ID (CNTLID):** This field indicates the controller ID as defined in the<br>Controller ID (CNTLID) field in Figure 295.|
|09:08|**Admin Max SQ Size (ASQSZ):** This field indicates the maximum size of an Admin<br>Submission Queue as defined in the Admin Max SQ Size (ASQSZ) field in Figure<br>295.|
|11:10|**Entry Flags (EFLAGS):** This field indicates additional information related to the<br>current entry as defined in the Entry Flags (EFLAGS) field in Figure 295.|
|31:12|Reserved|
|63:32|**Transport Service Identifier (TRSVCID):** This field indicates the NVMe Transport<br>service identifier as an ASCII string as defined in the Transport Service Identifier<br>(TRSVCID) field in Figure 295.|
|255:64|Reserved|
|511:256|**NVM Subsystem Qualified Name (NQN**): This field indicates the NVMe Qualified<br>Name (NQN) that uniquely identifies the NVM subsystem as defined in the NVM<br>Subsystem Qualified Name (SUBNQN) field in Figure 295.|
|767:512|**Transport Address (TRADDR):** This field indicates the address of the NVM<br>subsystem that may be used for a Connect command as an ASCII string as defined<br>in the Transport Address (TRADDR) field in Figure 295.|
|1023:768|**Transport Specific Address Subtype (TSAS):** This field indicates NVMe Transport<br>specific information about the address as defined in the Transport Specific Address<br>Subtype (TSAS) field in Figure 295.|
|1027:1024|**Total Entry Length (TEL):** This field indicates the length in bytes of the entire<br>Extended Discovery Log Page Entry.|
|1029:1028|**Number of Extended Attributes (NUMEXAT):** This field indicates the number of<br>extended attributes contained in the Extended Discovery Log Page Entry.|
|1031:1030|Reserved|
|**Extended Attribute List**|**Extended Attribute List**|
|((EXATLEN - 1) + 4) + 1032:<br>1032|**Extended Attribute 0:** This field contains the first extended attribute as defined in<br>Figure 500 (if present), where EXATLEN is the size specified in the Extended<br>Attribute Length (EXATLEN) field of the extended attribute.|
|…|…|
|TEL - 1:<br>TEL - (EXATLEN + 4)|**Extended Attribute N:** This field contains the Nth extended attribute as defined in<br>Figure 500 (if present), where EXATLEN is the size specified in the Extended<br>Attribute Length (EXATLEN) field of the extended attribute and TEL is the size<br>specified in the Total Entry Length (TEL) field.|


**Figure 297: Discovery Log Page**







|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Generation Counter (GENCTR):**Indicates the version of the discovery information,<br>starting at a value of 0h. For each change in the Discovery log page, this counter is<br>incremented by one. If the value of this field is FFFFFFFF_FFFFFFFFh, then the field shall<br>be cleared to 0h when incremented (i.e., rolls over to 0h).|


286


NVM Express [®] Base Specification, Revision 2.2


**Figure 297: Discovery Log Page**












|Bits|Description|
|---|---|
|7:3|Reserved|
|2|**All Subsystems (ALLSUB):** If this bit is set to ‘1’, then the records contained<br>in the log page are for all NVM subsystem ports. If this bit is cleared to ‘0’, then<br>the records contained in the log page may or may not be for all NVM subsystem<br>ports.|
|1|**Port Local (PORTLCL):** If this bit is set to ‘1’, then the records contained in the<br>log page are only for NVM subsystem ports that are presented through the<br>same NVM subsystem port that is returning this log. If this bit is cleared to ‘0’,<br>then the records contained in the log page may be for NVM subsystem ports<br>that are presented through any NVM subsystem port on that NVM subsystem.|
|0|**Extended (EXTEND):** If this bit is set to ‘1’, then the records contained in the<br>log page may include Extended Discovery Log Page Entries. If this bit is<br>cleared to ‘0’, then the records contained in the log page do not include<br>Extended Discovery Log Page Entries.|












|Bytes|Description|
|---|---|
|15:08|**Number of Records (NUMREC):**Indicates the number of records contained in the log<br>page.|
|17:16|**Record Format (RECFMT):**Specifies the format of the Discovery log page. If a new format<br>is defined, this value is incremented by one. The format of the record specified in this<br>definition shall be 0h.|
|18|**Discovery Log Page Flags (DLPF):** This field indicates additional information related to<br>the Discovery log page.<br>**Bits**<br>**Description **<br>7:3<br>Reserved<br>2 <br>**All Subsystems (ALLSUB):** If this bit is set to ‘1’, then the records contained<br>in the log page are for all NVM subsystem ports. If this bit is cleared to ‘0’, then<br>the records contained in the log page may or may not be for all NVM subsystem<br>ports.<br>1 <br>**Port Local (PORTLCL):** If this bit is set to ‘1’, then the records contained in the<br>log page are only for NVM subsystem ports that are presented through the<br>same NVM subsystem port that is returning this log. If this bit is cleared to ‘0’,<br>then the records contained in the log page may be for NVM subsystem ports<br>that are presented through any NVM subsystem port on that NVM subsystem.<br>0 <br>**Extended (EXTEND):** If this bit is set to ‘1’, then the records contained in the<br>log page may include Extended Discovery Log Page Entries. If this bit is<br>cleared to ‘0’, then the records contained in the log page do not include<br>Extended Discovery Log Page Entries.|
|19|Reserved|
|23:20|**Total Discovery Log Page Length (TDLPL):** This field indicates the length in bytes of the<br>entire Discovery log page. If the value in this field is cleared to 0h, then this field is not<br>reported.|
|1023:24|Reserved|
|**Discovery Log Page Entry List**|**Discovery Log Page Entry List**|
|(TEL – 1) + 1024:<br>1024|**Entry 0:**Contains either the first Discovery Log Page Entry as defined in Figure 295 or the<br>first Extended Discovery Log Page Entry as defined in Figure 296. TEL is the size indicated<br>in the Total Entry Length (TEL) field of the Extended Discovery Log Page Entry. For<br>Discovery Log Page Entries, TEL shall be 1,024 bytes.|
|…|…|
|TDLPL - 1:<br>TDLPL - TEL|**Entry N:**Contains either the Nth Discovery Log Page Entry as defined in Figure 295 (if<br>present) or the Nth Extended Discovery Log Page Entry as defined in Figure 296 (if<br>present). TEL is the size indicated in the Total Entry Length (TEL) field of the Extended<br>Discovery Log Page Entry and TDLPL is the size indicated in the Total Discovery Log Page<br>Length (TDLPL) field. For Discovery Log Page Entries, TEL shall be 1,024 bytes. If the<br>TDLPL field is reserved (i.e., this log page does not contain any Extended Discovery Log<br>Page Entries), then the byte position of the Nth Discovery Log Page Entry shall be: (((N +<br>2) * 1024) - 1):((N + 1) * 1024).|



**5.1.12.3.2** **Host Discovery (Log Page Identifier 71h)**


The Host Discovery log page shall only be supported by Discovery controllers. The Host Discovery log
page shall not be supported by controllers that expose namespaces for NVMe over PCIe or NVMe over
Fabrics. The Host Discovery log page provides an inventory of hosts that have registered discovery
information with the Discovery controller. A host or a Discovery controller may obtain the host inventory
from this log page. Depending on the parameters specified in a Get Log Page command, the Host Discovery
log page may contain entries for:


  - all known hosts; or

  - a subset of entries specific to the host or Discovery controller requesting the log page.


Each Host Extended Discovery Log Page Entry shall contain at least one extended attribute containing a
Host Identifier.


287


NVM Express [®] Base Specification, Revision 2.2


Figure 298 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.1.12.1.1) for the Host Discovery log page.


**Figure 298: Host Discovery – LID Specific Parameter Field**






|Bits|Description|
|---|---|
|15:1|Reserved|
|0|**All Host Entries Supported (ALLHOSTES):** If this bit is set to ‘1’, then the Discovery controller supports<br>returning records for all hosts that are registered without filtering the list of returned records based upon the<br>requesting HOSTNQN. If this bit is cleared to ‘0’, then the Discovery controller does not support returning<br>records for all hosts that are registered.|



If a Discovery controller supports returning records for all hosts that are registered (i.e., the All Host Entries
Supported (ALLHOSTES) bit is set to ‘1’ in the LID Specific Parameter field as defined in Figure 298) and
that Discovery controller processes a Get Log Page command for this log page with the All Host Entries
(ALLHOSTE) bit set to ‘1’ in the Log Specific Parameter field (refer to Figure 299), then that Discovery
controller shall return records for all hosts that are registered. The list of records returned by the Discovery
controller shall not be filtered based upon the requesting HOSTNQN. If a Discovery controller returns
records for all hosts that are registered, then that Discovery controller shall set the All Hosts (ALLHOST)
bit to ‘1’ in the Host Discovery Log Page Flags (HDLPF) field. A Discovery controller may require
authentication before reporting the ALLHOSTES bit being set to ‘1’ or may require configuration outside the
scope of this specification.


The Log Page Offset may be used to retrieve specific records. If the Discovery controller supports an index
offset for this log page (i.e., the Index Offset Supported (IOS) bit is set to ‘1’ in the Supported Log Pages
log page (refer to section 5.1.12.1.1) for this log page), then the index values specified in the Log Page
Offset Lower (LPOL) field (refer to Figure 200) and Log Page Offset Upper (LPOU) field (refer to Figure
201) in the Get Log Page command shall be used to index into the header and list of entries within this log
page (e.g., specifying an index offset of 0 returns this log page starting at the header, specifying an index
offset of 1 returns this log page starting at the offset of Entry 0, etc.). The number of records is returned in
the header of the log page. The format for a Host Extended Discovery Log Page Entry is defined in Figure
300. The format for an extended attribute is defined in Figure 500. The format for the Host Discovery log
page is defined in Figure 301.


A single Get Log Page command used to read the Host Discovery log page shall be atomic. If the Host
Discovery log page is read using multiple Get Log Page commands, then the reader should validate the
Generation Counter field to ensure that there has not been a change in the contents of the data. The Host
Discovery log page contents should be processed in the following sequence:


1. read the Host Discovery log page contents in order (i.e., with increasing Log Page Offset values);
2. re-read the Generation Counter field after the entire log page is transferred; and
3. if the Generation Counter field does not match the original value read, then discard the log page

read, as the entries may be inconsistent, and restart the sequence; or
4. if the Generation Counter field does match the original value read, then process the returned data.


If the log page contents change during this command sequence, then the Discovery controller may return
a status code of Discover Restart.


**Figure 299: Host Discovery Log Specific Parameter Field**





|Bits|Description|
|---|---|
|14:9|Reserved|
|08|**All Host Entries (ALLHOSTE):** If this bit is set to ‘1’, then the Discovery controller shall return records for<br>all hosts that are registered without filtering the list of returned records based upon the requesting<br>HOSTNQN. If this bit is cleared to ‘0’, then this bit has no effect.|


288


NVM Express [®] Base Specification, Revision 2.2


**Figure 300: Host Extended Discovery Log Page Entry**








|Bits|Description|
|---|---|
|15:3|Reserved|
|2|**No CDC Connectivity (NCC):** If this bit is set to ‘1’, then the host that describes<br>this entry is not currently connected to the CDC. If this bit is cleared to ‘0’, then<br>the host that describes this entry is currently connected to the CDC. If the<br>Discovery controller returning this log page is not a CDC, then this bit shall be<br>cleared to ‘0’ and should be ignored by the host.|
|1:0|Reserved|

















|Bytes|Description|
|---|---|
|**Header**|**Header**|
|00|**Transport Type (TRTYPE):** This field indicates the transport type as defined in the<br>Transport Type (TRTYPE) field in Figure 295.|
|01|**Address Family (ADRFAM)**: This field indicates the address family as defined in the<br>Address Family (ADRFAM) field in Figure 295.|
|09:02|Reserved|
|11:10|**Entry Flags (EFLAGS):**This field indicates additional information related to the current<br>entry.<br>**Bits**<br>**Description **<br>15:3<br>Reserved<br>2 <br>**No CDC Connectivity (NCC):** If this bit is set to ‘1’, then the host that describes<br>this entry is not currently connected to the CDC. If this bit is cleared to ‘0’, then<br>the host that describes this entry is currently connected to the CDC. If the<br>Discovery controller returning this log page is not a CDC, then this bit shall be<br>cleared to ‘0’ and should be ignored by the host.<br>1:0<br>Reserved|
|255:12|Reserved|
|511:256|**Host NVMe Qualified Name (HOSTNQN):** This field indicates the NVMe Qualified Name<br>(NQN) that uniquely identifies the host. Refer to section 4.7 for the formatting requirements<br>for NQNs.|
|767:512|**Transport Address (TRADDR):** This field indicates the address of the host that may be<br>used for a Connect command as an ASCII string. The Address Family field describes the<br>reference for parsing this field. Refer to section 1.4.2 for ASCII string requirements. For the<br>definition of this field, refer to the appropriate NVMe Transport binding specification.|
|1023:768|**Transport Specific Address Subtype (TSAS):** This field indicates NVMe Transport specific<br>information about the address as defined in the Transport Specific Address Subtype (TSAS)<br>field in Figure 295.|
|1027:1024|**Total Entry Length (TEL):** This field indicates the length in bytes of the entire Host Extended<br>Discovery Log Page Entry.|
|1029:1028|**Number of Extended Attributes (NUMEXAT):** This field indicates the number of extended<br>attributes contained in the Host Extended Discovery Log Page Entry. This field shall be non-<br>zero (i.e., the Host Extended Discovery Log Page Entry contains at least one extended<br>attribute containing a Host Identifier as described in this section).|
|1031:1030|Reserved|
|**Extended Attributes List**|**Extended Attributes List**|
|((EXATLEN - 1) + 4)<br>+ 1032:1032|**Extended Attribute 0:** This field contains the first extended attribute as defined in Figure<br>500, where EXATLEN is the size specified in the Extended Attribute Length (EXATLEN) field<br>of the extended attribute.|
|…|…|
|TEL - 1:TEL -<br>(EXATLEN + 4)|**Extended Attribute N:** This field contains the Nth extended attribute as defined in Figure<br>500 (if present), where EXATLEN is the size specified in the Extended Attribute Length<br>(EXATLEN) field of the extended attribute and TEL is the size specified in the Total Entry<br>Length (TEL) field.|


**Figure 301: Host Discovery Log Page**









|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Generation Counter (GENCTR):** This field indicates the version of the discovery<br>information, starting at a value of 0h. For each change in the Host Discovery log page, this<br>counter is incremented by one. If the value of this field is FFFFFFFF_FFFFFFFFh, then the<br>field shall be cleared to 0h when incremented (i.e., rolls over to 0h).|
|15:08|**Number of Records (NUMREC):** Indicates the number of records contained in the log<br>page.|


289


NVM Express [®] Base Specification, Revision 2.2


**Figure 301: Host Discovery Log Page**










|Bits|Description|
|---|---|
|7:1|Reserved|
|0|**All Hosts (ALLHOST):** If this bit is set to ‘1’, then the records contained in the<br>log page are for all hosts. If this bit is cleared to ‘0’, then the records contained<br>in the log page may or may not be for all hosts.|














|Bytes|Description|
|---|---|
|17:16|**Record Format (RECFMT):** This field indicates the format of the Host Discovery log page.<br>If a new format is defined, this value is incremented by one. The format of the record<br>specified in this definition shall be 0h.|
|18|**Host Discovery Log Page Flags (HDLPF)**: This field indicates additional information<br>related to the Host Discovery log page.<br>**Bits**<br>**Description **<br>7:1<br>Reserved<br>0 <br>**All Hosts (ALLHOST):** If this bit is set to ‘1’, then the records contained in the<br>log page are for all hosts. If this bit is cleared to ‘0’, then the records contained<br>in the log page may or may not be for all hosts.<br>|
|19|Reserved|
|23:20|**Total Host Discovery Log Page Length (THDLPL):** This field indicates the length in bytes<br>of the entire Host Discovery log page.|
|1023:24|Reserved|
|**Host Extended Discovery Log Page Entry List**|**Host Extended Discovery Log Page Entry List**|
|(TEL - 1) + 1024:<br>1024|**Host Extended Discovery Log Page Entry 0:**This field contains the first Host Extended<br>Discovery Log Page Entry as defined in Figure 300. TEL is the size indicated in the Total<br>Entry Length (TEL) field of the Host Extended Discovery Log Page Entry.|
|…|…|
|THDLPL - 1:<br>THDLPL – TEL|**Host Extended Discovery Log Page Entry N:** This field contains the Nth Host Extended<br>Discovery Log Page Entry as defined in Figure 300 (if present). TEL is the size indicated in<br>the Total Entry Length (TEL) field of the Host Extended Discovery Log Page Entry and<br>THDLPL is the size indicated in the Total Host Discovery Log Page Length (THDLPL) field.|



**5.1.12.3.3** **AVE Discovery Log Page (Log Page Identifier 72h)**


The format of the AVE Discovery Log Page is shown in Figure 302.


**Figure 302: Get Log Page – AVE Discovery Log Page**











|Bytes|Description|
|---|---|
|**Header**|**Header**|
|07:00|**Generation Counter (GENCTR):** This field indicates the version of the discovery<br>information, starting at a value of 0h. For each change in the AVE Discovery log page,<br>this<br>field<br>shall<br>be<br>incremented by<br>one.<br>If<br>the<br>value<br>of<br>this field is<br>FFFFFFFF_FFFFFFFFh, then the field shall be cleared to 0h when incremented (i.e.,<br>rolls over to 0h).|
|15:08|**Number of Records (NUMREC):** Indicates the number of records contained in the log<br>page.|
|17:16|**Record Format (RECFMT):** This field indicates the format of the AVE Discovery log<br>page. If a new format is defined, this value is incremented by one. The format of the<br>record specified in this definition shall be 0h.|
|19:18|Reserved|
|23:20|**Total AVE Discovery Log Page Length (TADLPL):** This field indicates the length in<br>bytes of the entire AVE Discovery log page.|
|1023:24|Reserved|
|**AVE Discovery Log Page Entry List**|**AVE Discovery Log Page Entry List**|
|TEL + 1023:1024|**AVE Discovery Log Page Entry 0:**This field contains the first AVE Discovery Log<br>Page Entry as defined in Figure 303. TEL is the size indicated in the Total Entry Length<br>(TEL) field of the AVE Discovery Log Page Entry.|
|…|…|
|TADLPL - 1:<br>TADLPL – TEL|**AVE Discovery Log Page Entry NUMREC-1:** This field contains the NUMREC-1 AVE<br>Discovery Log Page Entry as defined in Figure 303 (if present). TEL is the size indicated<br>in the Total Entry Length (TEL) field of the AVE Discovery Log Page Entry and TADLPL<br>is the size indicated in the Total AVE Log Page Length (TADLPL) field.|


290


NVM Express [®] Base Specification, Revision 2.2


The format of the AVE Discovery Log Page Entry is shown in Figure 303.


**Figure 303: Get Log Page – AVE Discovery Log Page Entry**








|Bytes|Description|
|---|---|
|**Header**|**Header**|
|03:00|**Total Entry Length (TEL):** This field indicates the length in bytes of the AVE Discovery<br>Log Page Entry.|
|227:04|**AVE NQN (AVENQN):** This field indicates the NQN (represented as a null-terminated<br>string, NULL padded as necessary to the 224-byte maximum length) of the AVE.|
|228|**Number of AVE Transport Records (NUMATR)**: This field indicates the number of<br>subsequent AVE transport records.|
|231:229|Reserved|
|**AVE Transport Record List**|**AVE Transport Record List**|
|251:232|**AVE Transport Record 1:** The first AVE Transport Record (refer toFigure 304), if any.|
|271:252|**AVE Transport Record 2:** The second AVE Transport Record (refer toFigure 304), if<br>any.|
|…|…|
|(NUMATR*20)+231:<br>(NUMATR*20)+212|**AVE Transport Record NUMATR:** The last AVE Transport Record (refer toFigure<br>304), if any.|



The format of the AVE Transport Record is shown in Figure 304.


**Figure 304: AVE Transport Record**

|Bytes|Description|
|---|---|
|00|**AVE Address Family (AVEADRFAM):**This field identifies the IP address family. This field shall be set<br>to one of the following values:<br>• <br>1h: IPv4 address family; or<br>• <br>2h: IPv6 address family.|
|01|Reserved|
|03:02|**AVE Transport Service Identifier (AVETRSVCID):** This field identifies the TCP port.|
|19:04|**AVE Transport Address (AVETRADDR):**This field identifies the IP address. An IPv6 address is<br>encoded in binary as follows:<br>**Bytes**<br>**Description **<br>15:00<br>**IPv6 Address (IPV6ADDR):** This field contains an IPv6 address.<br>An IPv4 address is encoded in binary as follows:<br>**Bytes**<br>**Description **<br>03:00<br>**IPv4 Address (IPV4ADDR):** This field contains an IPv4 address.<br>15:04<br>Reserved|


|Bytes|Description|
|---|---|
|15:00|**IPv6 Address (IPV6ADDR):** This field contains an IPv6 address.|


|Bytes|Description|
|---|---|
|03:00|**IPv4 Address (IPV4ADDR):** This field contains an IPv4 address.|
|15:04|Reserved|



**5.1.12.3.4** **Pull Model DDC Request Log Page (Log Page Identifier 73h)**


The format of the Pull Model DDC Request log page is shown in Figure 305.


291


NVM Express [®] Base Specification, Revision 2.2


**Figure 305: Pull Model DDC Request Log Page**

|Bytes|Description|
|---|---|
|**Header**|**Header**|
|00|**Operation Request Identifier (ORI):** This field indicates the operation that a pull model DDC is<br>requesting a CDC to perform. Defined values are:<br>**Value**<br>**Definition**<br>0 <br>Reserved<br>1 <br>Get Active ZoneGroup (GAZ) operation<br>2 <br>Add or Replace Active ZoneGroup (AAZ) operation<br>3 <br>Remove Active ZoneGroup (RAZ) operation<br>4 <br>Discovery Log Page Request operation<br>All others<br>Reserved|
|03:01|Reserved|
|07:04|**Total Pull Model DDC Request Log Page Length (TPDRPL):** This field indicates the length in<br>bytes of the entire Pull Model DDC Request log page.|
|TPDRPL-1:08|**Operation Specific Parameters (OSP)**|


|Value|Definition|
|---|---|
|0|Reserved|
|1|Get Active ZoneGroup (GAZ) operation|
|2|Add or Replace Active ZoneGroup (AAZ) operation|
|3|Remove Active ZoneGroup (RAZ) operation|
|4|Discovery Log Page Request operation|
|All others|Reserved|



**Command Completion**


Upon completion of the Get Log Page command, the controller posts a completion queue entry to the Admin
Completion Queue. Get Log Page command specific status values are defined in Figure 306.


**Figure 306: Get Log Page – Command Specific Status Values**







|Value|Definition|
|---|---|
|9h|**Invalid Log Page:** The log page indicated is invalid or not supported. This error condition is also<br>returned if a reserved log page is requested. Controllers compliant with NVM Express Base<br>Specification revision 2.0 and earlier may return Invalid Field in Command for this condition.|
|29h|**I/O Command Set Not Supported:**The specified I/O Command Set is not supported by the<br>controller.|

