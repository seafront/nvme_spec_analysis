**Get Features command**


The Get Features command retrieves the attributes of the Feature specified.


The Get Features command uses the Data Pointer, Command Dword 10 and Command Dword 14 fields.
The use of the Command Dword 11 field is Feature specific. If not used by a Feature, then Command
Dword 11 is reserved unless otherwise stated. All other command specific fields are reserved.


The mandatory, optional, and prohibited Feature Identifiers for each type of controller are defined in section
3.1.3.6.


195


NVM Express [®] Base Specification, Revision 2.2


**Figure 192: Get Features – Data Pointer**







|Bits|Description|
|---|---|
|127:00|**Data Pointer (DPTR):**This field specifies the start of the data buffer. Refer to Figure 92 for the definition<br>of this field. If no data structure is used as part of the specified feature (refer to the FID field), then this<br>field shall be ignored by the controller.|


**Figure 193: Get Features – Command Dword 10**








|Select|Description|
|---|---|
|000b|Current|
|001b|Default|
|010b|Saved|
|011b|Supported Capabilities|
|100b to 111b|Reserved|



|Bits|Description|
|---|---|
|31:11|Reserved|
|10:08|**Select (SEL):** This field specifies the attribute of the value requested in the returned data:<br>**Select**<br>**Description**<br>000b<br>Current<br>001b<br>Default<br>010b<br>Saved<br>011b<br>Supported Capabilities<br>100b to 111b<br>Reserved<br>Refer to section 5.1.11.1 and section 4.4 for details on the data returned in each case.<br>The controller indicates in the Save and Select Feature Support (SSFS) bit of the Optional NVM<br>Command Support field of the Identify Controller data structure in Figure 313 whether this field is<br>supported.<br>If a Get Features command is received with the Select field set to 010b (i.e., saved) and the controller<br>does not support the Feature Identifier being saved or does not currently have any saved values, then<br>the controller shall operate as if the Select field is set to 001b (i.e., default).|
|07:00|**Feature Identifier (FID):**This field specifies the identifier of the Feature for which to provide data.|


If the controller supports selection of a UUID by the Get Features command (refer to Figure 386 and section
8.1.28) and the controller supports selection of a UUID for the specified vendor specific Feature Identifier
(refer to Figure 386), then Command Dword 14 is used to specify a UUID Index value (refer to Figure 194).
If the controller does not support selection of a UUID by the Get Features command or the controller does
not support selection of a UUID for the specified vendor specific Feature Identifier, then Command Dword
14 does not specify a UUID Index value.


**Figure 194: Get Features – Command Dword 14**

|Bits|Description|
|---|---|
|31:07|Reserved|
|06:00|**UUID Index (UIDX):** Refer to Figure 659.|



Figure 195 describes the Feature Identifiers whose attributes may be retrieved using the Get Features
command. The definition of the attributes returned and the associated format is specified in the section
indicated.


**Figure 195: Get Features – Feature Identifiers**








|Description|Feature<br>Identifier|Section Defining<br>Format of Attributes<br>Returned|
|---|---|---|
|Arbitration|01h|5.1.25.1.1|
|Power Management|02h|5.1.25.1.2|
|Temperature Threshold|04h|5.1.25.1.3|
|Volatile Write Cache|06h|5.1.25.1.4|
|Number of Queues|07h|5.1.25.2.1|



196


NVM Express [®] Base Specification, Revision 2.2


**Figure 195: Get Features – Feature Identifiers**









|Description|Feature<br>Identifier|Section Defining<br>Format of Attributes<br>Returned|
|---|---|---|
|Interrupt Coalescing|08h|5.1.25.2.2|
|Interrupt Vector Configuration|09h|5.1.25.2.3|
|Asynchronous Event Configuration|0Bh|5.1.25.1.5|
|Autonomous Power State Transition|0Ch|5.1.25.1.6|
|Host Memory Buffer|0Dh|5.1.25.2.4|
|Timestamp|0Eh|5.1.25.1.7|
|Keep Alive Timer|0Fh|5.1.25.1.8|
|Host Controlled Thermal Management|10h|5.1.25.1.9|
|Non-Operational Power State Config|11h|5.1.25.1.10|
|Read Recovery Level Config|12h|5.1.25.1.11|
|Predictable Latency Mode Config|13h|5.1.25.1.12|
|Predictable Latency Mode Window|14h|5.1.25.1.13|
|Host Behavior Support|16h|5.1.25.1.14|
|Sanitize Config|17h|5.1.25.1.15|
|Endurance Group Event Configuration|18h|5.1.25.1.16|
|I/O Command Set Profile|19h|5.1.25.1.17|
|Spinup Control|1Ah|5.1.25.1.18|
|Power Loss Signaling Config|1Bh|5.1.25.1.19|
|Flexible Data Placement|1Dh|5.1.25.1.20|
|Flexible Data Placement Events|1Eh|5.1.25.1.21|
|Namespace Admin Label|1Fh|5.1.25.1.22|
|Controller Data Queue|21h|5.1.25.1.23|
|Embedded Management Controller Address|78h|5.1.25.1.24|
|Host Management Agent Address|79h|5.1.25.1.25|
|Enhanced Controller Metadata1|7Dh|5.1.25.1.26.1|
|Controller Metadata1|7Eh|5.1.25.1.26.2|
|Namespace Metadata1|7Fh|5.1.25.1.26.3|
|Software Progress Marker|80h|5.1.25.1.27|
|Host Identifier|81h|5.1.25.1.28|
|Reservation Notification Mask|82h|5.1.25.1.29|
|Reservation Persistence|83h|5.1.25.1.30|
|Namespace Write Protection Config|84h|5.1.25.1.31|
|Boot Partition Write Protection Config|85h|5.1.25.1.32|
|I/O Command Set specific features||I/O Command Set<br>specification|
|Notes:<br>1.<br>Information that is common to all Host Metadata features is described in section<br>5.1.25.1.26.|Notes:<br>1.<br>Information that is common to all Host Metadata features is described in section<br>5.1.25.1.26.|Notes:<br>1.<br>Information that is common to all Host Metadata features is described in section<br>5.1.25.1.26.|


**Select field**


A Select field cleared to 000b (i.e., current) returns the current operating attribute value for the Feature
Identifier specified.


A Select field set to 001b (i.e., default) returns the default attribute value for the Feature Identifier specified.


A Select field set to 010b (i.e., saved) returns the last saved attribute value for the Feature Identifier
specified (i.e., the last Set Features command completed without error, with the Save bit set to ‘1’ for the
Feature Identifier specified).


A Select field set to 011b (i.e., supported capabilities) returns the capabilities supported for this Feature
Identifier. The capabilities supported are returned in Dword 0 of the completion queue entry of the Get
Features command (refer to Figure 196).


197


NVM Express [®] Base Specification, Revision 2.2


**Command Completion**


Upon completion of the Get Features command, the controller posts a completion queue entry to the Admin
Completion Queue. If the Select field is not set to 011b, then Dword 0 of the completion queue entry may
contain feature-dependent information (refer to section 5.1.25).


If the Select field is set to 011b, then Figure 196 describes the contents of Dword 0 of the completion queue
entry.


**Figure 196: Completion Queue Entry Dword 0 when Select is set to 11b**

|Bits|Description|
|---|---|
|31:3|Reserved|
|2|**Changeable (CHANG)**: If this bit is set to ‘1’, then the feature values are changeable. If this bit is cleared<br>to ‘0’, then the feature values are not changeable. Changing a feature value is described in section 5.1.25.|
|1|**NS Specific (NSSPEC)**: If this bit is set to ‘1’, then the Feature Identifier has a namespace scope. If this<br>bit is cleared to ‘0’, then the Feature Identifier has a scope as defined in Figure 386.|
|0|**Saveable (SVBL)**: If this bit is set to ‘1’, then the feature values are saveable. If this bit is cleared to ‘0’,<br>then the feature values are not saveable.|



If the controller supports any changeable value of any attribute of a feature, then the controller reports that
feature as changeable (i.e., the controller sets the Changeable bit to '1' in Completion Queue Entry Dword
0 for a Get Features command that specifies that feature and has the Select field set to 011b), even if the
feature has been set to a value or values that are not changeable.


For some features (e.g., Namespace Write Protection Config (refer to section 5.1.25.1.31), Boot Partition
Write Protection Config (refer to section 5.1.25.1.32)), the changeability of feature values is valuedependent (e.g., the Permanent Write Protect (i.e., 011b) value of the Write Protection State in the
Namespace Write Protection Config feature is not changeable).

